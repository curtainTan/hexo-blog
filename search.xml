<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ€è·¯æ¸…æ™°--å‰ç«¯æ€§èƒ½ä¼˜åŒ–</title>
      <link href="/2020/02/14/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2020/02/14/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="1-åŸåˆ™"><a href="#1-åŸåˆ™" class="headerlink" title="1. åŸåˆ™"></a>1. åŸåˆ™</h1><ol><li>å¤šä½¿ç”¨å†…å­˜ã€ç¼“å­˜æˆ–å…¶ä»–æ–¹æ³•æ¥å­˜å‚¨</li><li>å‡å°‘ cpu è®¡ç®—ï¼Œå‡å°‘ http ç½‘ç»œè¯·æ±‚</li></ol><h1 id="2-ä»å“ªé‡Œå…¥æ‰‹"><a href="#2-ä»å“ªé‡Œå…¥æ‰‹" class="headerlink" title="2. ä»å“ªé‡Œå…¥æ‰‹"></a>2. ä»å“ªé‡Œå…¥æ‰‹</h1><ol><li>åŠ è½½é¡µé¢å’Œé™æ€èµ„æº</li><li>é¡µé¢æ¸²æŸ“</li></ol><h2 id="2-1-åŠ è½½èµ„æºä¼˜åŒ–"><a href="#2-1-åŠ è½½èµ„æºä¼˜åŒ–" class="headerlink" title="2.1 åŠ è½½èµ„æºä¼˜åŒ–"></a>2.1 åŠ è½½èµ„æºä¼˜åŒ–</h2><ol><li>é™æ€èµ„æºçš„å‹ç¼©å’Œåˆå¹¶</li><li>é™æ€èµ„æºç¼“å­˜</li><li>ä½¿ç”¨ CDN è®©èµ„æºåŠ è½½æ›´å¿«</li><li>ä½¿ç”¨ SSR åç«¯æ¸²æŸ“ï¼Œæ•°æ®ç›´æ¥è¾“å‡ºåˆ° HTML ä¸­</li></ol><h2 id="2-2-æ¸²æŸ“ä¼˜åŒ–"><a href="#2-2-æ¸²æŸ“ä¼˜åŒ–" class="headerlink" title="2.2 æ¸²æŸ“ä¼˜åŒ–"></a>2.2 æ¸²æŸ“ä¼˜åŒ–</h2><ol><li>CSS æ”¾å‰é¢ï¼ŒJS æ”¾åé¢</li><li>æ‡’åŠ è½½ï¼ˆå›¾ç‰‡æ‡’åŠ è½½ã€ä¸‹æ‹‰åŠ è½½æ›´å¤šï¼‰</li><li>å‡å°‘ DOM æŸ¥è¯¢ï¼Œå¯¹ DOM æŸ¥è¯¢åšç¼“å­˜</li><li>å‡å°‘ DOM æ“ä½œï¼Œå¤šä¸ªæ“ä½œå°½é‡åˆå¹¶åœ¨ä¸€èµ·æ‰§è¡Œï¼ˆä¾‹å¦‚ï¼šæ’å…¥åˆ—è¡¨ï¼‰</li><li>ä½¿ç”¨äº‹ä»¶èŠ‚æµä¸é˜²æŠ–</li><li>å°½æ—©æ‰§è¡Œæ“ä½œï¼ˆ å¦‚ï¼šDOMContentLoaded ï¼‰</li></ol><h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h1><p>ç®€ç•¥çš„æ¦‚è¿°äº†ä¸€ä¸‹å‰ç«¯æ€§èƒ½çš„ä¼˜åŒ–ã€‚</p><h1 id="4-èµ„æºæ¨è"><a href="#4-èµ„æºæ¨è" class="headerlink" title="4. èµ„æºæ¨è"></a>4. èµ„æºæ¨è</h1><p>æ¡†æ¶æ‰“åŒ…ä¼˜åŒ–</p><p><a href="https://juejin.im/post/5cd4d991e51d453a4a357e69" target="_blank" rel="noopener">ğŸš€ è®°ä¸€æ¬¡å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a></p><p><a href="https://csspod.com/frontend-performance-best-practices/" target="_blank" rel="noopener">å‰ç«¯æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€§èƒ½ä¼˜åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[è½¬è½½]webpackä¼˜åŒ–</title>
      <link href="/2020/02/12/%5B%E8%BD%AC%E8%BD%BD%5D-webpack%E4%BC%98%E5%8C%96/"/>
      <url>/2020/02/12/%5B%E8%BD%AC%E8%BD%BD%5D-webpack%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="webpackå„ç§ä¼˜åŒ–"><a href="#webpackå„ç§ä¼˜åŒ–" class="headerlink" title="webpackå„ç§ä¼˜åŒ–"></a>webpackå„ç§ä¼˜åŒ–</h1><p>ä¸Šä¸€ç« èŠ‚æˆ‘ä»¬å·²ç»æŒæ¡äº†webpackå¸¸è§çš„æ‰€æœ‰é…ç½®</p><p>è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°webpackä¸­çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å…ˆæ¥ç¼–å†™æœ€åŸºæœ¬çš„webpacké…ç½®ï¼Œç„¶åä¾æ¬¡å®ç°å„ç§ä¼˜åŒ–ï¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">mode</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    mode: mode,</span><br><span class="line">    entry: <span class="string">"./src/main.js"</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">"bundle.js"</span>,</span><br><span class="line">      path: path.resolve(__dirname, <span class="string">"dist"</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">          use: <span class="string">"file-loader"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">          use: <span class="string">"babel-loader"</span> <span class="comment">// .babelrcå·²ç»é…ç½®æ”¯æŒreact</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            mode !== <span class="string">"development"</span></span><br><span class="line">              ? MiniCssExtractPlugin.loader</span><br><span class="line">              : <span class="string">"style-loader"</span>,</span><br><span class="line">            <span class="string">"css-loader"</span></span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> PurgecssPlugin(&#123;</span><br><span class="line">        paths: glob.sync(<span class="string">`<span class="subst">$&#123;path.join(__dirname, <span class="string">"src"</span>)&#125;</span>/**/*`</span>, &#123; <span class="attr">nodir</span>: <span class="literal">true</span> &#125;) <span class="comment">// ä¸åŒ¹é…ç›®å½•ï¼ŒåªåŒ¹é…æ–‡ä»¶</span></span><br><span class="line">      &#125;),</span><br><span class="line">      mode !== <span class="string">"development"</span> &amp;&amp;</span><br><span class="line">        <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">          filename: <span class="string">"css/[name].css"</span></span><br><span class="line">        &#125;),</span><br><span class="line">      <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        template: <span class="string">"./src/template.html"</span>,</span><br><span class="line">        filename: <span class="string">"index.html"</span></span><br><span class="line">      &#125;)</span><br><span class="line">    ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>.babelrc</code>é…ç½®æ–‡ä»¶</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        <span class="string">"@babel/preset-env"</span>,</span><br><span class="line">        <span class="string">"@babel/preset-react"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-åˆ é™¤æ— ç”¨çš„Cssæ ·å¼"><a href="#1-åˆ é™¤æ— ç”¨çš„Cssæ ·å¼" class="headerlink" title="1.åˆ é™¤æ— ç”¨çš„Cssæ ·å¼"></a>1.åˆ é™¤æ— ç”¨çš„Cssæ ·å¼</h2><p>å…ˆæ¥çœ‹ç¼–å†™çš„ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./style.css'</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'root'</span>));</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: red</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: red</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œçš„<code>.class1</code>æ˜¾ç„¶æ˜¯æ— ç”¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥æœç´¢<code>src</code>ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œåˆ é™¤æ— ç”¨çš„æ ·å¼</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>);</span><br><span class="line"><span class="keyword">const</span> PurgecssPlugin = <span class="built_in">require</span>(<span class="string">'purgecss-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦é…åˆmini-css-extract-pluginæ’ä»¶</span></span><br><span class="line">mode !== <span class="string">"development"</span> &amp;&amp; <span class="keyword">new</span> PurgecssPlugin(&#123;</span><br><span class="line">    paths: glob.sync(<span class="string">`<span class="subst">$&#123;path.join(__dirname, <span class="string">"src"</span>)&#125;</span>/**/*`</span>, &#123; <span class="attr">nodir</span>: <span class="literal">true</span> &#125;) <span class="comment">// ä¸åŒ¹é…ç›®å½•ï¼ŒåªåŒ¹é…æ–‡ä»¶</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure><h2 id="2-å›¾ç‰‡å‹ç¼©æ’ä»¶"><a href="#2-å›¾ç‰‡å‹ç¼©æ’ä»¶" class="headerlink" title="2.å›¾ç‰‡å‹ç¼©æ’ä»¶"></a>2.å›¾ç‰‡å‹ç¼©æ’ä»¶</h2><p>å°†æ‰“åŒ…åçš„å›¾ç‰‡è¿›è¡Œä¼˜åŒ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install image-webpack-loader --save-dev</span><br></pre></td></tr></table></figure><p>åœ¨file-loaderä¹‹å‰ä½¿ç”¨å‹ç¼©å›¾ç‰‡æ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">loader: <span class="string">"image-webpack-loader"</span>,</span><br><span class="line">options: &#123;</span><br><span class="line">  mozjpeg: &#123;</span><br><span class="line">    progressive: <span class="literal">true</span>,</span><br><span class="line">    quality: <span class="number">65</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// optipng.enabled: false will disable optipng</span></span><br><span class="line">  optipng: &#123;</span><br><span class="line">    enabled: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  pngquant: &#123;</span><br><span class="line">    quality: [<span class="number">0.90</span>, <span class="number">0.95</span>],</span><br><span class="line">    speed: <span class="number">4</span></span><br><span class="line">  &#125;,</span><br><span class="line">  gifsicle: &#123;</span><br><span class="line">    interlaced: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// the webp option will enable WEBP</span></span><br><span class="line">  webp: &#123;</span><br><span class="line">    quality: <span class="number">75</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥å‘ç°å›¾ç‰‡å¤§å°æ˜¯æœ‰äº†æ˜æ˜¾çš„å˜åŒ–</p></blockquote><h2 id="3-CDNåŠ è½½æ–‡ä»¶"><a href="#3-CDNåŠ è½½æ–‡ä»¶" class="headerlink" title="3.CDNåŠ è½½æ–‡ä»¶"></a>3.CDNåŠ è½½æ–‡ä»¶</h2><p>æˆ‘ä»¬å¸Œæœ›é€šè¿‡cdnçš„æ–¹å¼å¼•å…¥èµ„æº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AddAssetHtmlCdnPlugin = <span class="built_in">require</span>(<span class="string">'add-asset-html-cdn-webpack-plugin'</span>)</span><br><span class="line"><span class="keyword">new</span> AddAssetHtmlCdnPlugin(<span class="literal">true</span>,&#123;</span><br><span class="line">    <span class="string">'jquery'</span>:<span class="string">'https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åœ¨ä»£ç ä¸­è¿˜å¸Œæœ›å¼•å…¥<code>jquery</code>æ¥è·å¾—æç¤º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'$'</span>,$)</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æ‰“åŒ…æ—¶ä¾ç„¶ä¼šå°†<code>jquery</code>è¿›è¡Œæ‰“åŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">externals:&#123;</span><br><span class="line">  <span class="string">'jquery'</span>:<span class="string">'$'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æ ‡æ³¨<code>jquery</code>æ˜¯å¤–éƒ¨çš„ï¼Œè¿™æ ·æ‰“åŒ…æ—¶å°±ä¸ä¼šå°†jqueryè¿›è¡Œæ‰“åŒ…äº†</p><h2 id="4-Tree-shaking-amp-amp-Scope-Hoisting"><a href="#4-Tree-shaking-amp-amp-Scope-Hoisting" class="headerlink" title="4.Tree-shaking &amp;&amp; Scope-Hoisting"></a>4.Tree-shaking &amp;&amp; Scope-Hoisting</h2><h3 id="4-1-Tree-shaking"><a href="#4-1-Tree-shaking" class="headerlink" title="4.1 Tree-shaking"></a>4.1 Tree-shaking</h3><p>é¡¾åæ€ä¹‰å°±æ˜¯å°†æ²¡ç”¨çš„å†…å®¹æ‘‡æ™ƒæ‰,æ¥çœ‹ä¸‹é¢ä»£ç </p><p><code>main.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; minus &#125; <span class="keyword">from</span> <span class="string">"./calc"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(minus(<span class="number">1</span>,<span class="number">1</span>));</span><br></pre></td></tr></table></figure><p><code>calc.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;test&#125; <span class="keyword">from</span> <span class="string">'./test'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + <span class="string">'sum'</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> minus = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a - b + <span class="string">'minus'</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>test.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> test = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(test());</span><br></pre></td></tr></table></figure><blockquote><p>è§‚å¯Ÿä¸Šè¿°ä»£ç å…¶å®æˆ‘ä»¬ä¸»è¦ä½¿ç”¨<code>minus</code>æ–¹æ³•,<code>test.js</code>ä»£ç æ˜¯æœ‰å‰¯ä½œç”¨çš„! </p></blockquote><p>é»˜è®¤<code>mode:production</code>æ—¶ï¼Œä¼šè‡ªåŠ¨<code>tree-shaking</code>,ä½†æ˜¯æ‰“åŒ…å<code>&#39;hello&#39;</code>ä¾ç„¶ä¼šè¢«æ‰“å°å‡ºæ¥,è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦é…ç½®ä¸ä½¿ç”¨å‰¯ä½œç”¨</p><p>åœ¨<code>package.json</code>ä¸­é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"sideEffects"</span>:<span class="literal">false</span>,</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™æ ·è®¾ç½®ï¼Œé»˜è®¤å°±ä¸ä¼šå¯¼å…¥<code>css</code>æ–‡ä»¶å•¦ï¼Œå› ä¸ºæˆ‘ä»¬å¼•å…¥cssä¹Ÿæ˜¯é€šè¿‡<code>import &#39;./style.css&#39;</code></p><p>è¿™é‡Œé‡ç‚¹å°±æ¥äº†,<code>tree-shaking</code>ä¸»è¦é’ˆå¯¹<strong>es6æ¨¡å—</strong>,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>require</code>è¯­æ³•å¯¼å…¥css,ä½†æ˜¯è¿™æ ·ç”¨èµ·æ¥æœ‰ç‚¹æ ¼æ ¼ä¸å…¥,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é…ç½®<code>css</code>æ–‡ä»¶ä¸æ˜¯å‰¯ä½œç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"sideEffects"</span>:[</span><br><span class="line">    <span class="string">"**/*.css"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>åœ¨å¼€å‘ç¯å¢ƒä¸‹é»˜è®¤<code>tree-shaking</code>ä¸ä¼šç”Ÿæ•ˆ,å¯ä»¥é…ç½®æ ‡è¯†æç¤º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">optimization:&#123;</span><br><span class="line">  usedExports:<span class="literal">true</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-Scope-Hoisting"><a href="#4-2-Scope-Hoisting" class="headerlink" title="4.2 Scope Hoisting"></a>4.2 Scope Hoisting</h3><p>ä½œç”¨åŸŸæå‡,å¯ä»¥å‡å°‘ä»£ç ä½“ç§¯ï¼ŒèŠ‚çº¦å†…å­˜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> c = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">let</span> d = a+b+c</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> d;</span><br><span class="line"><span class="comment">// å¼•å…¥d</span></span><br><span class="line"><span class="keyword">import</span> d <span class="keyword">from</span> <span class="string">'./d'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(d)</span><br></pre></td></tr></table></figure><blockquote><p>æœ€ç»ˆæ‰“åŒ…åçš„ç»“æœä¼šå˜æˆ <code>console.log(6)</code></p></blockquote><ul><li>ä»£ç é‡æ˜æ˜¾å‡å°‘</li><li>å‡å°‘å¤šä¸ªå‡½æ•°åå†…å­˜å ç”¨ä¹Ÿå°†å‡å°‘</li></ul><h2 id="5-DllPlugin-amp-amp-DllReferencePlugin"><a href="#5-DllPlugin-amp-amp-DllReferencePlugin" class="headerlink" title="5.DllPlugin &amp;&amp; DllReferencePlugin"></a>5.DllPlugin &amp;&amp; DllReferencePlugin</h2><p>æ¯æ¬¡æ„å»ºæ—¶ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½éœ€è¦é‡æ–°æ„å»ºï¼Œè¿™ä¸ªæ€§èƒ½æ¶ˆè€—æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠç¬¬ä¸‰æ–¹åº“æ‰“åŒ…æˆåŠ¨æ€é“¾æ¥åº“ï¼Œä»¥åæ„å»ºæ—¶åªéœ€è¦æŸ¥æ‰¾æ„å»ºå¥½çš„åº“å°±å¥½äº†ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§èŠ‚çº¦æ„å»ºæ—¶é—´</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">'root'</span>))</span><br></pre></td></tr></table></figure><h3 id="5-1-DllPlugin"><a href="#5-1-DllPlugin" class="headerlink" title="5.1 DllPlugin"></a>5.1 DllPlugin</h3><blockquote><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å…ˆå°†<code>react</code>ã€<code>react-dom</code>å•ç‹¬è¿›è¡Œæ‰“åŒ…</p></blockquote><p>å•ç‹¬æ‰“åŒ…åˆ›å»º<code>webpack.dll.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> DllPlugin = <span class="built_in">require</span>(<span class="string">'webpack/lib/DllPlugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry:[<span class="string">'react'</span>,<span class="string">'react-dom'</span>],</span><br><span class="line">    mode:<span class="string">'production'</span>,</span><br><span class="line">    output:&#123;</span><br><span class="line">        filename:<span class="string">'react.dll.js'</span>,</span><br><span class="line">        path:path.resolve(__dirname,<span class="string">'dll'</span>),</span><br><span class="line">        library:<span class="string">'react'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="keyword">new</span> DllPlugin(&#123;</span><br><span class="line">            name:<span class="string">'react'</span>,</span><br><span class="line">            path:path.resolve(__dirname,<span class="string">'dll/manifest.json'</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>&quot;webpack --config webpack.dll.js</code>å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°dllç›®å½•ä¸‹åˆ›å»ºäº†ä¸¤ä¸ªæ–‡ä»¶åˆ†åˆ«æ˜¯<code>manifest.json</code>,<code>react.dll.js</code></p><p>å…³ç³»æ˜¯è¿™ä¸ªé…±ç´«çš„ï¼Œåˆ°æ—¶å€™æˆ‘ä»¬ä¼šé€šè¿‡<code>manifest.json</code>æ‰¾åˆ°<code>react.dll.js</code>æ–‡ä»¶ä¸­çš„æ¨¡å—è¿›è¡ŒåŠ è½½</p><h3 id="5-2-DllReferencePlugin"><a href="#5-2-DllReferencePlugin" class="headerlink" title="5.2 DllReferencePlugin"></a>5.2 DllReferencePlugin</h3><p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å¯ä»¥å¼•ç”¨åˆšæ‰æ‰“åŒ…å¥½çš„åŠ¨æ€é“¾æ¥åº“</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> DllReferencePlugin = <span class="built_in">require</span>(<span class="string">'webpack/lib/DllReferencePlugin'</span>);</span><br><span class="line"><span class="keyword">const</span> AddAssetHtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'add-asset-html-webpack-plugin'</span>);</span><br><span class="line"><span class="comment">// æ„å»ºæ—¶ä¼šå¼•ç”¨åŠ¨æ€é“¾æ¥åº“çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">new</span> DllReferencePlugin(&#123;</span><br><span class="line">  manifest:path.resolve(__dirname,<span class="string">'dll/manifest.json'</span>)</span><br><span class="line">&#125;),</span><br><span class="line"><span class="comment">// éœ€è¦æ‰‹åŠ¨å¼•å…¥react.dll.js</span></span><br><span class="line"><span class="keyword">new</span> AddAssetHtmlWebpackPlugin(</span><br><span class="line">  &#123; <span class="attr">filepath</span>: path.resolve(__dirname,<span class="string">'dll/react.dll.js'</span>) &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨DllPluginå¯ä»¥å¤§å¹…åº¦æé«˜æ„å»ºé€Ÿåº¦</p><h2 id="6-åŠ¨æ€åŠ è½½"><a href="#6-åŠ¨æ€åŠ è½½" class="headerlink" title="6.åŠ¨æ€åŠ è½½"></a>6.åŠ¨æ€åŠ è½½</h2><p>å®ç°ç‚¹å‡»ååŠ¨æ€åŠ è½½æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.createElement(<span class="string">'button'</span>);</span><br><span class="line">btn.innerHTML = <span class="string">'ç‚¹å‡»åŠ è½½è§†é¢‘'</span>;</span><br><span class="line">btn.addEventListener(<span class="string">'click'</span>,()=&gt;&#123;</span><br><span class="line">    <span class="keyword">import</span>(<span class="string">'./video'</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res.default);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(btn);</span><br></pre></td></tr></table></figure><p>ç»™åŠ¨æ€å¼•å…¥çš„æ–‡ä»¶å¢åŠ åå­—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">output:&#123;</span><br><span class="line">  chunkFilename:<span class="string">'[name].min.js'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "video" */</span> <span class="string">'./video'</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.default);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ ·æ‰“åŒ…åçš„ç»“æœæœ€ç»ˆçš„æ–‡ä»¶å°±æ˜¯ <code>video.min.js</code></p></blockquote><h2 id="7-æ‰“åŒ…æ–‡ä»¶åˆ†æå·¥å…·"><a href="#7-æ‰“åŒ…æ–‡ä»¶åˆ†æå·¥å…·" class="headerlink" title="7.æ‰“åŒ…æ–‡ä»¶åˆ†æå·¥å…·"></a>7.æ‰“åŒ…æ–‡ä»¶åˆ†æå·¥å…·</h2><p>å®‰è£…<code>webpack-bundle-analyzer</code>æ’ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack-bundle-analyzer</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;BundleAnalyzerPlugin&#125; = <span class="built_in">require</span>(<span class="string">'webpack-bundle-analyzer'</span>);</span><br><span class="line">mode !== <span class="string">"development"</span> &amp;&amp; <span class="keyword">new</span> BundleAnalyzerPlugin()</span><br></pre></td></tr></table></figure><p>é»˜è®¤å°±ä¼šå±•ç°å½“å‰åº”ç”¨çš„åˆ†æå›¾è¡¨</p><h2 id="8-SplitChunks"><a href="#8-SplitChunks" class="headerlink" title="8.SplitChunks"></a>8.SplitChunks</h2><p>æˆ‘ä»¬åœ¨æ¥çœ‹ä¸‹SplitChunksè¿™ä¸ªé…ç½®ï¼Œä»–å¯ä»¥åœ¨ç¼–è¯‘æ—¶æŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—ã€å…¬å…±æ¨¡å—</p><p>å°†é¡¹ç›®é…ç½®æˆå¤šå…¥å£æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">entry:&#123;</span><br><span class="line">  a:<span class="string">'./src/a.js'</span>,</span><br><span class="line">  b:<span class="string">'./src/b.js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è®©a,bä¸¤ä¸ªæ¨¡å—åŒæ—¶å¼•ç”¨<code>jquery</code>,åˆ«å¿˜äº†å»æ‰ä¹‹å‰çš„<code>externals</code>é…ç½®</p><p><img src="http://img.fullstackjavascript.cn/analyze-1.png" alt=""></p><p>é…ç½®<code>SplitChunks</code>æ’ä»¶</p><p>é»˜è®¤é…ç½®åœ¨æ­¤ï¼Œæˆ‘ä¸€ä¸ªä¸ªæè¿°ä¸‹å«ä¹‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">splitChunks: &#123;</span><br><span class="line">  chunks: <span class="string">'async'</span>, <span class="comment">// åˆ†å‰²å¼‚æ­¥æ¨¡å—</span></span><br><span class="line">  minSize: <span class="number">30000</span>, <span class="comment">// åˆ†å‰²çš„æ–‡ä»¶æœ€å°å¤§å°</span></span><br><span class="line">  maxSize: <span class="number">0</span>, </span><br><span class="line">  minChunks: <span class="number">1</span>, <span class="comment">// å¼•ç”¨æ¬¡æ•°</span></span><br><span class="line">  maxAsyncRequests: <span class="number">5</span>, <span class="comment">// æœ€å¤§å¼‚æ­¥è¯·æ±‚æ•°</span></span><br><span class="line">  maxInitialRequests: <span class="number">3</span>, <span class="comment">// æœ€å¤§åˆå§‹åŒ–è¯·æ±‚æ•°</span></span><br><span class="line">  automaticNameDelimiter: <span class="string">'~'</span>, <span class="comment">// æŠ½ç¦»çš„å‘½ååˆ†éš”ç¬¦</span></span><br><span class="line">  automaticNameMaxLength: <span class="number">30</span>, <span class="comment">// åå­—æœ€å¤§é•¿åº¦</span></span><br><span class="line">  name: <span class="literal">true</span>,</span><br><span class="line">  cacheGroups: &#123; <span class="comment">// ç¼“å­˜ç»„</span></span><br><span class="line">    vendors: &#123; <span class="comment">// å…ˆæŠ½ç¦»ç¬¬ä¸‰æ–¹</span></span><br><span class="line">      test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">      priority: <span class="number">-10</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">default</span>: &#123; </span><br><span class="line">      minChunks: <span class="number">2</span>,</span><br><span class="line">      priority: <span class="number">-20</span>, <span class="comment">// ä¼˜å…ˆçº§</span></span><br><span class="line">      reuseExistingChunk: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘ä»¬å°†<code>async</code>æ”¹ä¸º<code>initial</code></p></blockquote><p><img src="http://img.fullstackjavascript.cn/analyze-2.png" alt=""></p><p>æˆ‘ä»¬åœ¨ä¸ºæ¯ä¸ªæ–‡ä»¶åŠ¨æ€å¯¼å…¥<code>lodash</code>åº“,å¹¶ä¸”æ”¹æˆ<code>async</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">'lodash'</span>)</span><br></pre></td></tr></table></figure><p><img src="http://img.fullstackjavascript.cn/analyze-3.png" alt=""></p><blockquote><p>ä¸ºæ¯ä¸ªå…¥å£å¼•å…¥<code>c.js</code>,å¹¶ä¸”æ”¹é€ é…ç½®æ–‡ä»¶</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">splitChunks: &#123;</span><br><span class="line">  chunks: <span class="string">'all'</span>,</span><br><span class="line">  name: <span class="literal">true</span>,</span><br><span class="line">  cacheGroups: &#123;</span><br><span class="line">    vendors: &#123;</span><br><span class="line">      test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">      priority: <span class="number">-10</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">default</span>: &#123;</span><br><span class="line">      minSize:<span class="number">1</span>, <span class="comment">// ä¸æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œè¢«å¼•å…¥ä¸¤æ¬¡ä¹Ÿä¼šè¢«æŠ½ç¦»</span></span><br><span class="line">      minChunks: <span class="number">2</span>,</span><br><span class="line">      priority: <span class="number">-20</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://img.fullstackjavascript.cn/analyze-4.png" alt=""></p><blockquote><p>è¿™æ ·å†åè¿‡æ¥çœ‹<code>chunks</code>çš„å‚æ•°æ˜¯ä¸æ˜¯å°±äº†ç„¶äºèƒ¸å•¦ï¼</p></blockquote><h2 id="9-çƒ­æ›´æ–°"><a href="#9-çƒ­æ›´æ–°" class="headerlink" title="9.çƒ­æ›´æ–°"></a>9.çƒ­æ›´æ–°</h2><p>æ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMR - Hot Module Replacementï¼‰æ˜¯ webpack æä¾›çš„æœ€æœ‰ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒå…è®¸åœ¨è¿è¡Œæ—¶æ›¿æ¢ï¼Œæ·»åŠ ï¼Œåˆ é™¤å„ç§æ¨¡å—ï¼Œè€Œæ— éœ€è¿›è¡Œå®Œå…¨åˆ·æ–°é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</p><ul><li>ä¿ç•™åœ¨å®Œå…¨é‡æ–°åŠ è½½é¡µé¢æ—¶ä¸¢å¤±çš„åº”ç”¨ç¨‹åºçš„çŠ¶æ€</li><li>åªæ›´æ–°æ”¹å˜çš„å†…å®¹ï¼Œä»¥èŠ‚çœå¼€å‘æ—¶é—´</li><li>è°ƒæ•´æ ·å¼æ›´åŠ å¿«é€Ÿï¼Œå‡ ä¹ç­‰åŒäºå°±åœ¨æµè§ˆå™¨è°ƒè¯•å™¨ä¸­æ›´æ”¹æ ·å¼</li></ul><p>å¯ç”¨çƒ­æ›´æ–°ï¼Œé»˜è®¤æ ·å¼å¯ä»¥æ”¯æŒçƒ­æ›´æ–°ï¼Œå¦‚æœä¸æ”¯æŒçƒ­æ›´æ–°åˆ™é‡‡ç”¨å¼ºåˆ¶åˆ·æ–°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">devServer:&#123;</span><br><span class="line">  hot:<span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> webpack.NamedModulesPlugin(),</span><br></pre></td></tr></table></figure><p>è®©<code>js</code>æ”¯æŒçƒ­æ›´æ–°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sum <span class="keyword">from</span> <span class="string">'./sum'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(sum(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">module</span>.hot)&#123; <span class="comment">// å¦‚æœæ”¯æŒçƒ­æ›´æ–°</span></span><br><span class="line">    <span class="built_in">module</span>.hot.accept(); <span class="comment">// å½“å…¥å£æ–‡ä»¶å˜åŒ–åé‡æ–°æ‰§è¡Œå½“å‰å…¥å£æ–‡ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="10-IgnorePlugin"><a href="#10-IgnorePlugin" class="headerlink" title="10.IgnorePlugin"></a>10.IgnorePlugin</h2><p>å¿½ç•¥ <code>import</code>å’Œ<code>require</code>è¯­æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> webpack.IgnorePlugin(<span class="regexp">/^\.\/locale$/</span>, /moment$/)</span><br></pre></td></tr></table></figure><h2 id="11-è´¹æ—¶åˆ†æ"><a href="#11-è´¹æ—¶åˆ†æ" class="headerlink" title="11.è´¹æ—¶åˆ†æ"></a>11.è´¹æ—¶åˆ†æ</h2><p>å¯ä»¥è®¡ç®—æ¯ä¸€æ­¥æ‰§è¡Œçš„è¿è¡Œé€Ÿåº¦</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SpeedMeasureWebpackPlugin = <span class="built_in">require</span>(<span class="string">'speed-measure-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> smw = <span class="keyword">new</span> SpeedMeasureWebpackPlugin();</span><br><span class="line">  <span class="built_in">module</span>.exports =smw.wrap(&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="12-noParse"><a href="#12-noParse" class="headerlink" title="12.noParse"></a>12.noParse</h2><p><code>module.noParse</code>ï¼Œå¯¹ç±»ä¼¼jqè¿™ç±»ä¾èµ–åº“ï¼Œå†…éƒ¨ä¸ä¼šå¼•ç”¨å…¶ä»–åº“ï¼Œæˆ‘ä»¬åœ¨æ‰“åŒ…çš„æ—¶å€™å°±æ²¡æœ‰å¿…è¦å»è§£æï¼Œè¿™æ ·èƒ½å¤Ÿå¢åŠ æ‰“åŒ…é€Ÿç‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">noParse:<span class="regexp">/jquery/</span></span><br></pre></td></tr></table></figure><h2 id="13-resolve"><a href="#13-resolve" class="headerlink" title="13.resolve"></a>13.resolve</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  extensions: [<span class="string">".js"</span>,<span class="string">".jsx"</span>,<span class="string">".json"</span>,<span class="string">".css"</span>],</span><br><span class="line">  alias:&#123;&#125;,</span><br><span class="line">  modules:[<span class="string">'node_modules'</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="14-include-exclude"><a href="#14-include-exclude" class="headerlink" title="14.include/exclude"></a>14.include/exclude</h2><p>åœ¨ä½¿ç”¨<code>loader</code>æ—¶,å¯ä»¥æŒ‡å®šå“ªäº›æ–‡ä»¶ä¸é€šè¿‡<code>loader</code>,æˆ–è€…æŒ‡å®šå“ªäº›æ–‡ä»¶é€šè¿‡<code>loader</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  use: <span class="string">"babel-loader"</span>,</span><br><span class="line">  <span class="comment">// include:path.resolve(__dirname,'src'),</span></span><br><span class="line">  exclude:<span class="regexp">/node_modules/</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="15-happypack"><a href="#15-happypack" class="headerlink" title="15.happypack"></a>15.happypack</h2><p>å¤šçº¿ç¨‹æ‰“åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸åŒçš„é€»è¾‘äº¤ç»™ä¸åŒçš„çº¿ç¨‹æ¥å¤„ç†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev happypack</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HappyPack = <span class="built_in">require</span>(<span class="string">'happypack'</span>);</span><br><span class="line">rules:[</span><br><span class="line">  &#123;</span><br><span class="line">    test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    use: <span class="string">'happypack/loader?id=jsx'</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line">    test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    use: <span class="string">'happypack/loader?id=styles'</span></span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">new</span> HappyPack(&#123;</span><br><span class="line">  id: <span class="string">'jsx'</span>,</span><br><span class="line">  threads: <span class="number">4</span>,</span><br><span class="line">  loaders: [ <span class="string">'babel-loader'</span> ]</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> HappyPack(&#123;</span><br><span class="line">  id: <span class="string">'styles'</span>,</span><br><span class="line">  threads: <span class="number">2</span>,</span><br><span class="line">  loaders: [ <span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'less-loader'</span> ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è½¬è½½ </category>
          
          <category> webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[è½¬è½½]ä»0æ­å»ºè‡ªå·±çš„webpackå¼€å‘ç¯å¢ƒï¼ˆäºŒï¼‰</title>
      <link href="/2020/02/12/%5B%E8%BD%AC%E8%BD%BD%5D-%E4%BB%8E0%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84webpack%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2020/02/12/%5B%E8%BD%AC%E8%BD%BD%5D-%E4%BB%8E0%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84webpack%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Webpackä¸­å¿…é¡»æŒæ¡çš„é…ç½®"><a href="#Webpackä¸­å¿…é¡»æŒæ¡çš„é…ç½®" class="headerlink" title="Webpackä¸­å¿…é¡»æŒæ¡çš„é…ç½®"></a>Webpackä¸­å¿…é¡»æŒæ¡çš„é…ç½®</h1><p>loaderä¸»è¦ç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ï¼Œå¯ä»¥åŠ è½½é JS æ¨¡å—ï¼<br>é€šè¿‡ä½¿ç”¨ä¸åŒçš„Loaderï¼ŒWebpackå¯ä»¥æŠŠä¸åŒçš„æ–‡ä»¶éƒ½è½¬æˆJSæ–‡ä»¶,æ¯”å¦‚CSSã€ES6/7ã€JSXç­‰ã€‚  </p><p>æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æˆ‘ä»¬å¿…é¡»æŒæ¡çš„loader!</p><h2 id="1-loaderçš„ç¼–å†™"><a href="#1-loaderçš„ç¼–å†™" class="headerlink" title="1.loaderçš„ç¼–å†™"></a>1.loaderçš„ç¼–å†™</h2><h3 id="1-1-loaderçš„ä½¿ç”¨"><a href="#1-1-loaderçš„ä½¿ç”¨" class="headerlink" title="1.1 loaderçš„ä½¿ç”¨"></a>1.1 loaderçš„ä½¿ç”¨</h3><ul><li>testï¼šåŒ¹é…å¤„ç†æ–‡ä»¶çš„æ‰©å±•åçš„æ­£åˆ™è¡¨è¾¾å¼</li><li>useï¼šloaderåç§°ï¼Œå°±æ˜¯ä½ è¦ä½¿ç”¨æ¨¡å—çš„åç§°</li><li>include/exclude:æ‰‹åŠ¨æŒ‡å®šå¿…é¡»å¤„ç†çš„æ–‡ä»¶å¤¹æˆ–å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶å¤¹</li><li>options:ä¸ºloadersæä¾›é¢å¤–çš„è®¾ç½®é€‰é¡¹</li></ul><p>é»˜è®¤<code>loader</code>çš„é¡ºåºæ˜¯<strong>ä»ä¸‹åˆ°ä¸Š</strong>ã€<strong>ä»å³å‘å·¦</strong>æ‰§è¡Œï¼Œå½“ç„¶æ‰§è¡Œé¡ºåºä¹Ÿå¯ä»¥æ‰‹åŠ¨å®šä¹‰çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¾æ¬¡ä»‹ç»å¸¸è§çš„loaderï¼Œæ¥æ„Ÿå—<code>loader</code>çš„é­…åŠ›!</p><p>æˆ‘ä»¬åŸºäºè¿™ä¸ªåŸºç¡€é…ç½®æ¥ç»§ç»­ç¼–å†™:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> dev = <span class="built_in">require</span>(<span class="string">"./webpack.dev"</span>);</span><br><span class="line"><span class="keyword">const</span> prod = <span class="built_in">require</span>(<span class="string">"./webpack.prod"</span>);</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">"webpack-merge"</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> base = &#123;</span><br><span class="line">  entry:<span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">"[name].js"</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"../dist"</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">'index.html'</span>,</span><br><span class="line">        template: path.resolve(__dirname, <span class="string">"../public/template.html"</span>),</span><br><span class="line">        hash: <span class="literal">true</span>,</span><br><span class="line">        minify: &#123;</span><br><span class="line">            removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(&#123;</span><br><span class="line">        cleanOnceBeforeBuildPatterns: [path.resolve(<span class="string">'xxxx/*'</span>),<span class="string">'**/*'</span>],</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">env</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (env.development) &#123;</span><br><span class="line">    <span class="keyword">return</span> merge(base, dev);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> merge(base, prod);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="2-å¤„ç†CSSæ–‡ä»¶"><a href="#2-å¤„ç†CSSæ–‡ä»¶" class="headerlink" title="2.å¤„ç†CSSæ–‡ä»¶"></a>2.å¤„ç†CSSæ–‡ä»¶</h2><h3 id="2-1-è§£æcssæ ·å¼"><a href="#2-1-è§£æcssæ ·å¼" class="headerlink" title="2.1 è§£æcssæ ·å¼"></a>2.1 è§£æcssæ ·å¼</h3><p>æˆ‘ä»¬åœ¨<code>js</code>æ–‡ä»¶ä¸­å¼•å…¥cssæ ·å¼ï¼</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span>;</span><br></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œæ‰“åŒ…æ—¶ï¼Œä¼šæç¤ºcssæ— æ³•è§£æ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR <span class="keyword">in</span> ./src/index.css 1:4</span><br><span class="line">Module parse failed: Unexpected token (1:4)</span><br><span class="line">You may need an appropriate loader to handle this file <span class="built_in">type</span>, currently no loaders are configured to process this file. See https://webpack.js.org/concepts<span class="comment">#loaders</span></span><br></pre></td></tr></table></figure><p><strong>å®‰è£…loader</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install style-loader css-loader --save-dev</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">       test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">       use: [<span class="string">"style-loader"</span>, <span class="string">"css-loader"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-æŠ½ç¦»æ ·å¼æ–‡ä»¶"><a href="#2-2-æŠ½ç¦»æ ·å¼æ–‡ä»¶" class="headerlink" title="2.2 æŠ½ç¦»æ ·å¼æ–‡ä»¶"></a>2.2 æŠ½ç¦»æ ·å¼æ–‡ä»¶</h3><p>é»˜è®¤åªåœ¨æ‰“åŒ…æ—¶è¿›è¡Œæ ·å¼æŠ½ç¦»</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">env</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> isDev = env.development;</span><br><span class="line">  <span class="keyword">const</span> base = &#123;<span class="comment">/*source...*/</span>&#125;</span><br><span class="line">  <span class="keyword">if</span> (isDev) &#123;</span><br><span class="line">    <span class="keyword">return</span> merge(base, dev);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> merge(base, prod);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å®‰è£…æŠ½ç¦»æ’ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mini-css-extract-plugin --save-dev</span><br></pre></td></tr></table></figure><p>é…ç½®æŠ½ç¦»æ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">        !isDev &amp;&amp; MiniCssExtractPlugin.loader,</span><br><span class="line">        isDev &amp;&amp; <span class="string">'style-loader'</span>,</span><br><span class="line">        <span class="string">"css-loader"</span></span><br><span class="line">    ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">&#125;</span><br><span class="line">!isDev &amp;&amp; <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">    filename: <span class="string">"css/[name].css"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ–‡ä»¶é…ç½®è´´ä¸€ä¸‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="keyword">const</span> dev = <span class="built_in">require</span>(<span class="string">"./webpack.dev"</span>);</span><br><span class="line"><span class="keyword">const</span> prod = <span class="built_in">require</span>(<span class="string">"./webpack.prod"</span>);</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">"webpack-merge"</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">"html-webpack-plugin"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">env</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> isDev = env.development;</span><br><span class="line">  <span class="keyword">const</span> base = &#123;</span><br><span class="line">    entry: <span class="string">"./src/index.js"</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">      filename: <span class="string">"[name].js"</span>,</span><br><span class="line">      path: path.resolve(__dirname, <span class="string">"../dist"</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">          use: [</span><br><span class="line">            !isDev &amp;&amp; MiniCssExtractPlugin.loader,</span><br><span class="line">            isDev &amp;&amp; <span class="string">'style-loader'</span>,</span><br><span class="line">            <span class="string">"css-loader"</span></span><br><span class="line">          ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins:[</span><br><span class="line">        !isDev &amp;&amp; <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">          filename: <span class="string">"css/[name].css"</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">          filename: <span class="string">"index.html"</span>,</span><br><span class="line">          template: path.resolve(__dirname, <span class="string">"../public/template.html"</span>),</span><br><span class="line">          hash: <span class="literal">true</span>,</span><br><span class="line">          minify: &#123;</span><br><span class="line">            removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">      ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (isDev) &#123;</span><br><span class="line">    <span class="keyword">return</span> merge(base, dev);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> merge(base, prod);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="2-3-cssé¢„å¤„ç†å™¨"><a href="#2-3-cssé¢„å¤„ç†å™¨" class="headerlink" title="2.3 cssé¢„å¤„ç†å™¨"></a>2.3 cssé¢„å¤„ç†å™¨</h3><p>ä¸åŒçš„cssé¢„å¤„ç†å™¨è¦å®‰è£…ä¸åŒçš„loaderæ¥è¿›è¡Œè§£æ</p><ul><li>sass: sass-loader node-sass</li><li>less: less-loader less</li><li>stylus: stylus-loader stylus</li></ul><p>ä½¿ç”¨<code>sass</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/\.scss$/</span>,</span><br><span class="line">    use:[</span><br><span class="line">        !isDev &amp;&amp; MiniCssExtractPlugin.loader,</span><br><span class="line">        isDev &amp;&amp; <span class="string">'style-loader'</span>,</span><br><span class="line">        <span class="string">"css-loader"</span>,</span><br><span class="line">        <span class="string">"sass-loader"</span></span><br><span class="line">    ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨cssæ–‡ä»¶ä¸­å¯èƒ½ä¼šä½¿ç”¨<code>@import</code>è¯­æ³•å¼•ç”¨<code>css</code>æ–‡ä»¶,è¢«å¼•ç”¨çš„<code>css</code>æ–‡ä»¶ä¸­å¯èƒ½è¿˜ä¼šå¯¼å…¥<code>scss</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">    !isDev &amp;&amp; MiniCssExtractPlugin.loader,</span><br><span class="line">    isDev &amp;&amp; <span class="string">'style-loader'</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        loader:<span class="string">"css-loader"</span>,</span><br><span class="line">        options:&#123;</span><br><span class="line">            importLoaders:<span class="number">1</span> <span class="comment">// å¼•å…¥çš„æ–‡ä»¶éœ€è¦è°ƒç”¨sass-loaderæ¥å¤„ç† </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"sass-loader"</span></span><br><span class="line">    ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="2-4-å¤„ç†æ ·å¼å‰ç¼€"><a href="#2-4-å¤„ç†æ ·å¼å‰ç¼€" class="headerlink" title="2.4 å¤„ç†æ ·å¼å‰ç¼€"></a>2.4 å¤„ç†æ ·å¼å‰ç¼€</h3><p>ä½¿ç”¨<code>postcss-loader</code>å¢åŠ æ ·å¼å‰ç¼€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-loader autoprefixer</span><br></pre></td></tr></table></figure><p>åœ¨å¤„ç†csså‰å…ˆå¢åŠ å‰ç¼€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">    !isDev &amp;&amp; MiniCssExtractPlugin.loader,</span><br><span class="line">    isDev &amp;&amp; <span class="string">'style-loader'</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        loader:<span class="string">"postcss-loader"</span>,</span><br><span class="line">        options:&#123;</span><br><span class="line">            plugins:[<span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"postcss-loader"</span>,</span><br><span class="line">    <span class="string">"sass-loader"</span></span><br><span class="line">    ].filter(<span class="built_in">Boolean</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä¹Ÿå¯ä»¥åˆ›å»º<code>postcss</code>çš„é…ç½®æ–‡ä»¶<code>postcss.config.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    plugins:[</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥é…ç½®æµè§ˆå™¨çš„å…¼å®¹æ€§èŒƒå›´  <a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener">.browserslistrc</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cover 99.5%</span><br></pre></td></tr></table></figure><h3 id="2-5-csså‹ç¼©"><a href="#2-5-csså‹ç¼©" class="headerlink" title="2.5 csså‹ç¼©"></a>2.5 csså‹ç¼©</h3><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹æˆ‘ä»¬éœ€è¦å‹ç¼©<code>css</code>æ–‡ä»¶,é…ç½®<code>minimizer</code>é€‰é¡¹,å®‰è£…å‹ç¼©æ’ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i optimize-css-assets-webpack-plugin terser-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure><p>åœ¨<code>webpack.prod.js</code>æ–‡ä»¶ä¸­é…ç½®å‹ç¼©</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> TerserJSPlugin = <span class="built_in">require</span>(<span class="string">'terser-webpack-plugin'</span>);</span><br><span class="line">optimization:&#123;</span><br><span class="line">    minimizer:[<span class="keyword">new</span> TerserJSPlugin(&#123;&#125;), <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6-æ–‡ä»¶æŒ‡çº¹"><a href="#2-6-æ–‡ä»¶æŒ‡çº¹" class="headerlink" title="2.6 æ–‡ä»¶æŒ‡çº¹"></a>2.6 æ–‡ä»¶æŒ‡çº¹</h3><ul><li>Hashæ•´ä¸ªé¡¹ç›®çš„hashå€¼</li><li>chunkhash æ ¹æ®å…¥å£äº§ç”Ÿhashå€¼</li><li>contentHash æ ¹æ®æ¯ä¸ªæ–‡ä»¶çš„å†…å®¹äº§ç”Ÿçš„hashå€¼</li></ul><p>æˆ‘ä»¬å¯ä»¥åˆç†çš„ä½¿ç”¨<code>hash</code>æˆ³ï¼Œè¿›è¡Œæ–‡ä»¶çš„ç¼“å­˜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">!isDev &amp;&amp; <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">    filename: <span class="string">"css/[name].[contentHash].css"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-å¤„ç†æ–‡ä»¶ç±»å‹"><a href="#3-å¤„ç†æ–‡ä»¶ç±»å‹" class="headerlink" title="3.å¤„ç†æ–‡ä»¶ç±»å‹"></a>3.å¤„ç†æ–‡ä»¶ç±»å‹</h2><h3 id="3-1-å¤„ç†å¼•ç”¨çš„å›¾ç‰‡"><a href="#3-1-å¤„ç†å¼•ç”¨çš„å›¾ç‰‡" class="headerlink" title="3.1 å¤„ç†å¼•ç”¨çš„å›¾ç‰‡"></a>3.1 å¤„ç†å¼•ç”¨çš„å›¾ç‰‡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">'./webpack.png'</span>;</span><br><span class="line"><span class="keyword">let</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">img.src = logo;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(img);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>file-loader</code>,ä¼šå°†å›¾ç‰‡è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶å°†æ‰“åŒ…åçš„è·¯å¾„è¿”å›</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/\.jpe?g|png|gif/</span>,</span><br><span class="line">    use:&#123;</span><br><span class="line">        loader:<span class="string">'file-loader'</span>,</span><br><span class="line">        options:&#123;</span><br><span class="line">            name:<span class="string">`img/[name].[ext]`</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-å¤„ç†icon"><a href="#3-2-å¤„ç†icon" class="headerlink" title="3.2 å¤„ç†icon"></a>3.2 å¤„ç†icon</h3><p>äºŒè¿›åˆ¶æ–‡ä»¶ä¹Ÿæ˜¯ä½¿ç”¨<code>file-loader</code>æ¥æ‰“åŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/woff|ttf|eot|svg|otf/</span>,</span><br><span class="line">    use:&#123;</span><br><span class="line">        loader:<span class="string">'file-loader'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-è½¬åŒ–æˆbase64"><a href="#3-3-è½¬åŒ–æˆbase64" class="headerlink" title="3.3 è½¬åŒ–æˆbase64"></a>3.3 è½¬åŒ–æˆbase64</h3><p>ä½¿ç”¨<code>url-loader</code>å°†æ»¡è¶³æ¡ä»¶çš„å›¾ç‰‡è½¬åŒ–æˆbase64,ä¸æ»¡è¶³æ¡ä»¶çš„<code>url-loader</code>ä¼šè‡ªåŠ¨è°ƒç”¨<code>file-loader</code>æ¥è¿›è¡Œå¤„ç†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/\.jpe?g|png|gif/</span>,</span><br><span class="line">    use:&#123;</span><br><span class="line">        loader:<span class="string">'url-loader'</span>,</span><br><span class="line">        options:&#123;</span><br><span class="line">            limit:<span class="number">100</span>*<span class="number">1024</span>,</span><br><span class="line">            name:<span class="string">`img/[name].[ext]`</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-å¤„ç†JSæ¨¡å—"><a href="#4-å¤„ç†JSæ¨¡å—" class="headerlink" title="4.å¤„ç†JSæ¨¡å—"></a>4.å¤„ç†JSæ¨¡å—</h2><h3 id="4-1-å°†es6ä»£ç ç¼–è¯‘æˆes5ä»£ç "><a href="#4-1-å°†es6ä»£ç ç¼–è¯‘æˆes5ä»£ç " class="headerlink" title="4.1 å°†es6ä»£ç ç¼–è¯‘æˆes5ä»£ç "></a>4.1 å°†<code>es6</code>ä»£ç ç¼–è¯‘æˆ<code>es5</code>ä»£ç </h3><p>ä»£ç çš„è½¬åŒ–å·¥ä½œè¦äº¤ç»™<code>babel</code>æ¥å¤„ç†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/core @babel/preset-env babel-loader --save-dev</span><br></pre></td></tr></table></figure><p><code>@babel/core</code>æ˜¯babelä¸­çš„æ ¸å¿ƒæ¨¡å—ï¼Œ<code>@babel/preset-env</code> çš„ä½œç”¨æ˜¯es6è½¬åŒ–es5æ’ä»¶çš„æ’ä»¶é›†åˆï¼Œ<code>babel-loader</code>æ˜¯<code>webpack</code>å’Œ<code>loader</code>çš„æ¡¥æ¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¢åŠ <code>babel</code>çš„é…ç½®æ–‡ä»¶ <code>.babelrc</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">       [<span class="string">"@babel/preset-env"</span>]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é…ç½®loader</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">rules: [&#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">"babel-loader"</span> &#125;]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ‰“åŒ…å·²ç»å¯ä»¥æˆåŠŸçš„å°†es6è¯­æ³•è½¬åŒ–æˆes5è¯­æ³•ï¼</p><h3 id="4-2-è§£æè£…é¥°å™¨"><a href="#4-2-è§£æè£…é¥°å™¨" class="headerlink" title="4.2 è§£æè£…é¥°å™¨"></a>4.2 è§£æè£…é¥°å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @babel/plugin-proposal-class-properties @babel/plugin-proposal-decorators --save-dev</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"plugins": [</span><br><span class="line">  ["@babel/plugin-proposal-decorators", &#123; "legacy": true &#125;],</span><br><span class="line">  [<span class="string">"@babel/plugin-proposal-class-properties"</span>,&#123;<span class="attr">"loose"</span>:<span class="literal">true</span>&#125;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><code>legacy:true</code>è¡¨ç¤ºç»§ç»­ä½¿ç”¨è£…é¥°å™¨è£…é¥°å™¨ï¼Œlooseä¸ºfalseæ—¶ä¼šé‡‡ç”¨<code>Object.defineProperty</code>å®šä¹‰å±æ€§</p><ul><li>Pluginä¼šè¿è¡Œåœ¨Presetä¹‹å‰</li><li>Plugin ä¼šä»ç¬¬ä¸€ä¸ªå¼€å§‹é¡ºåºæ‰§è¡Œï¼ŒPresetåˆ™æ˜¯ç›¸åçš„</li></ul><h3 id="4-3-polyfill"><a href="#4-3-polyfill" class="headerlink" title="4.3 polyfill"></a>4.3 polyfill</h3><p>æ ¹æ®<code>.browserslistrc</code>æ–‡ä»¶ï¼Œè½¬åŒ–ä½¿ç”¨åˆ°çš„æµè§ˆå™¨api</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"presets"</span>: [</span><br><span class="line">    [<span class="string">"@babel/preset-env"</span>,&#123;</span><br><span class="line">        <span class="string">"useBuiltIns"</span>:<span class="string">"usage"</span>, <span class="comment">// æŒ‰éœ€åŠ è½½</span></span><br><span class="line">        <span class="string">"corejs"</span>:<span class="number">2</span> <span class="comment">// corejs æ›¿ä»£äº†ä»¥å‰çš„pollyfill</span></span><br><span class="line">    &#125;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å®‰è£…corejs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install core-js@2 --save</span><br></pre></td></tr></table></figure><blockquote><p><strong>ä½¿ç”¨<code>transform-runtime</code></strong><br>A plugin that enables the re-use of Babelâ€™s injected helper code to save on codesize.å¯ä»¥å¸®æˆ‘ä»¬èŠ‚çœä»£ç </p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @babel/plugin-transform-runtime @babel/runtime</span><br></pre></td></tr></table></figure><p>åœ¨<code>.babelrc</code>ä¸­é…ç½®æ’ä»¶</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"plugins": [</span><br><span class="line">    <span class="string">"@babel/plugin-transform-runtime"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="4-4-æ·»åŠ eslint"><a href="#4-4-æ·»åŠ eslint" class="headerlink" title="4.4 æ·»åŠ eslint"></a>4.4 æ·»åŠ eslint</h3><p>å®‰è£…<code>eslint</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint</span><br><span class="line">npx eslint --init <span class="comment"># åˆå§‹åŒ–é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:&#x2F;\.js&#x2F;,</span><br><span class="line">    enforce:&#39;pre&#39;,</span><br><span class="line">    use:&#39;eslint-loader&#39;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><blockquote><p>é…ç½®<code>eslint-loader</code>å¯ä»¥å®æ—¶æ ¡éªŒjsæ–‡ä»¶çš„æ­£ç¡®æ€§,<code>pre</code>è¡¨ç¤ºåœ¨æ‰€æœ‰<code>loader</code>æ‰§è¡Œå‰æ‰§è¡Œ</p></blockquote><h2 id="5-source-map"><a href="#5-source-map" class="headerlink" title="5.source-map"></a>5.source-map</h2><ul><li>eval ç”Ÿæˆä»£ç  æ¯ä¸ªæ¨¡å—éƒ½è¢«evalæ‰§è¡Œ,æ¯ä¸€ä¸ªæ‰“åŒ…åçš„æ¨¡å—åé¢éƒ½å¢åŠ äº†åŒ…å«sourceURL</li><li>source-map äº§ç”Ÿmapæ–‡ä»¶</li><li>inline ä¸ä¼šç”Ÿæˆç‹¬ç«‹çš„ .mapæ–‡ä»¶,ä¼šä»¥dataURLå½¢å¼æ’å…¥</li><li>cheap å¿½ç•¥æ‰“åŒ…åçš„åˆ—ä¿¡æ¯ï¼Œä¸ä½¿ç”¨loaderä¸­çš„sourcemap</li><li>module æ²¡æœ‰åˆ—ä¿¡æ¯ï¼Œä½¿ç”¨loaderä¸­çš„sourcemap(æ²¡æœ‰åˆ—ä¿¡æ¯)</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtool:isDev?<span class="string">'cheap-module-eval-source-map'</span>:<span class="literal">false</span></span><br></pre></td></tr></table></figure><blockquote><p>æ¯ä¸ªåº“ä¸­é‡‡ç”¨çš„<code>sourcemap</code>æ–¹å¼ä¸ä¸€,å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è‡ªè¡Œé…ç½®</p></blockquote><h2 id="6-resolveè§£æ"><a href="#6-resolveè§£æ" class="headerlink" title="6.resolveè§£æ"></a>6.resolveè§£æ</h2><p>æƒ³å®ç°ä½¿ç”¨requireæˆ–æ˜¯importçš„æ—¶å€™,å¯ä»¥è‡ªåŠ¨å°è¯•æ·»åŠ æ‰©å±•åè¿›è¡ŒåŒ¹é…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">".js"</span>, <span class="string">".jsx"</span>, <span class="string">".json"</span>, <span class="string">".css"</span>, <span class="string">".ts"</span>, <span class="string">".tsx"</span>, <span class="string">".vue"</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="7-æ‹·è´é™æ€æ–‡ä»¶"><a href="#7-æ‹·è´é™æ€æ–‡ä»¶" class="headerlink" title="7.æ‹·è´é™æ€æ–‡ä»¶"></a>7.æ‹·è´é™æ€æ–‡ä»¶</h2><p>æœ‰äº›æ—¶å€™åœ¨æ‰“åŒ…æ—¶å¸Œæœ›å°†ä¸€äº›é™æ€èµ„æºæ–‡ä»¶è¿›è¡Œæ‹·è´,å¯ä»¥ä½¿ç”¨<code>copy-webpack-plugin</code></p><p>å®‰è£…æ’ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i copy-webpack-plugin --save-dev</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ‹·è´æ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">'copy-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">new</span> CopyWebpackPlugin([</span><br><span class="line">    &#123;<span class="attr">from</span>:path.resolve(<span class="string">'./src/static'</span>),<span class="attr">to</span>:path.resolve(<span class="string">'./dist'</span>)&#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure><h2 id="8-é…ç½®TSç¯å¢ƒ"><a href="#8-é…ç½®TSç¯å¢ƒ" class="headerlink" title="8.é…ç½®TSç¯å¢ƒ"></a>8.é…ç½®TSç¯å¢ƒ</h2><h3 id="8-1-ä½¿ç”¨ts-loader"><a href="#8-1-ä½¿ç”¨ts-loader" class="headerlink" title="8.1 ä½¿ç”¨ts-loader"></a>8.1 ä½¿ç”¨ts-loader</h3><p>ä½¿ç”¨<code>ts</code>éœ€è¦å®‰è£…<code>ts</code>ç›¸å…³é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install typescript ts-loader --save-dev</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆ<code>ts</code>çš„é…ç½®æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx tsc --init</span><br></pre></td></tr></table></figure><p>é…ç½®<code>ts-loader</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/\.tsx?/</span>,</span><br><span class="line">    use: [<span class="string">'ts-loader'</span>],</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†å…¥å£æ–‡ä»¶æ›´æ”¹æˆ<code>ts</code>æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a:string = <span class="string">'hello'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>npm run dev</code>å‘ç°å·²ç»å¯ä»¥æ­£å¸¸çš„è§£æ<code>ts</code>æ–‡ä»¶å•¦ï¼</p><h3 id="8-2-ä½¿ç”¨-preset-typescript"><a href="#8-2-ä½¿ç”¨-preset-typescript" class="headerlink" title="8.2 ä½¿ç”¨ preset-typescript"></a>8.2 ä½¿ç”¨ preset-typescript</h3><p>ä¸éœ€è¦å€ŸåŠ©<code>typescript</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/preset-typescript</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">       [<span class="string">"@babel/preset-env"</span>,&#123;</span><br><span class="line">        <span class="attr">"useBuiltIns"</span>:<span class="string">"usage"</span>,</span><br><span class="line">        <span class="attr">"corejs"</span>:<span class="number">2</span> </span><br><span class="line">       &#125;],</span><br><span class="line">       <span class="string">"@babel/preset-react"</span>,</span><br><span class="line">       [<span class="string">"@babel/preset-typescript"</span>,&#123;</span><br><span class="line">           <span class="attr">"allExtensions"</span>: <span class="literal">true</span>  </span><br><span class="line">       &#125;]</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        [<span class="string">"@babel/plugin-proposal-decorators"</span>, &#123; <span class="attr">"legacy"</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">        [<span class="string">"@babel/plugin-proposal-class-properties"</span>,&#123;<span class="attr">"loose"</span>:<span class="literal">true</span>&#125;],</span><br><span class="line">        <span class="string">"@babel/plugin-transform-runtime"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-é…ç½®ts-reactç¯å¢ƒ"><a href="#9-é…ç½®ts-reactç¯å¢ƒ" class="headerlink" title="9.é…ç½®ts+reactç¯å¢ƒ"></a>9.é…ç½®ts+reactç¯å¢ƒ</h2><p>å®‰è£…<code>react</code>ç›¸å…³æ¨¡å—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i @babel/preset-react --save-dev <span class="comment"># è§£æjsxè¯­æ³•</span></span><br><span class="line">npm i react @types/react @types/react-dom react react-dom typescript</span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span>;</span><br><span class="line"><span class="keyword">const</span> state = &#123;<span class="built_in">number</span>:<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">type</span> State = Readonly&lt;<span class="keyword">typeof</span> state&gt;;</span><br><span class="line"><span class="keyword">class</span> Counter <span class="keyword">extends</span> React.Component&lt;object,State&gt;&#123;</span><br><span class="line">    state:State = state</span><br><span class="line">    handleClick =<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;<span class="built_in">number</span>:<span class="keyword">this</span>.state.number+<span class="number">1</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;<span class="built_in">number</span>&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;button onClick=&#123;<span class="keyword">this</span>.handleClick&#125;&gt;ç‚¹å‡»&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">                &#123;number&#125;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;Counter&gt;&lt;<span class="regexp">/Counter&gt;,document.getElementById('root'));</span></span><br></pre></td></tr></table></figure><h2 id="10-é…ç½®ts-vueç¯å¢ƒ"><a href="#10-é…ç½®ts-vueç¯å¢ƒ" class="headerlink" title="10.é…ç½®ts+vueç¯å¢ƒ"></a>10.é…ç½®ts+vueç¯å¢ƒ</h2><p>å®‰è£…<code>vue</code>æ‰€éœ€è¦çš„æ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-loader  vue-template-compiler --save-dev</span><br><span class="line">npm install vue vue-property-decorator</span><br></pre></td></tr></table></figure><p>é…ç½®<code>ts-loader</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.tsx?/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">        loader:<span class="string">'ts-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">            appendTsSuffixTo: [<span class="regexp">/\.vue$/</span>],</span><br><span class="line">        &#125;, </span><br><span class="line">    &#125;,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>vue-loader</code>æ’ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"><span class="keyword">new</span> VueLoaderPlugin();</span><br></pre></td></tr></table></figure><p>é…ç½®è§£æ<code>.vue</code>æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/\.vue$/</span>,</span><br><span class="line">    use:<span class="string">'vue-loader'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¢åŠ <code>vue-shims.d.ts</code>ï¼Œå¯ä»¥è¯†åˆ«<code>.vue</code>æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">declare module &#39;*.vue&#39; &#123;</span><br><span class="line">    import Vue from &#39;vue&#39;;</span><br><span class="line">    export default Vue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>index.tsx</code>æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span>;</span><br><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    render:<span class="function"><span class="params">h</span>=&gt;</span>h(App)</span><br><span class="line">&#125;).$mount(<span class="string">'#root'</span>)</span><br></pre></td></tr></table></figure><p><code>App.vueæ–‡ä»¶</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"(todo,index) in todos"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span>&#123;&#123;todo&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;Component,Vue&#125; <span class="keyword">from</span> <span class="string">'vue-property-decorator'</span>;</span></span><br><span class="line">@Component</span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">Vue</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">public</span> todos = [<span class="string">'é¦™è•‰'</span>,<span class="string">'è‹¹æœ'</span>,<span class="string">'æ©˜å­'</span>]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="11-é…ç½®ä»£ç†"><a href="#11-é…ç½®ä»£ç†" class="headerlink" title="11.é…ç½®ä»£ç†"></a>11.é…ç½®ä»£ç†</h2><p>è®¾ç½®æœåŠ¡ç«¯æ¥å£</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.get(<span class="string">'/api/list'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.send([<span class="string">'é¦™è•‰'</span>, <span class="string">'è‹¹æœ'</span>, <span class="string">'æ©˜å­'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">4000</span>);</span><br></pre></td></tr></table></figure><p>å®‰è£…<code>axios</code>è·å–æ•°æ®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios --save-dev</span><br></pre></td></tr></table></figure><p>é…ç½®æ¥å£è¯·æ±‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"(todo,index) in todos"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">            &#123;&#123;todo&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">"ts"</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;Component ,Vue&#125; <span class="keyword">from</span> <span class="string">'vue-property-decorator'</span>;</span></span><br><span class="line">@Component</span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">Vue</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">public</span> todos:string[] =[];</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> mounted()&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> &#123; data &#125; =  <span class="keyword">await</span> axios.get(<span class="string">'/api/list'</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.todos = data</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®æœåŠ¡å™¨ä»£ç†è·¯ç”±</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">proxy: &#123;</span><br><span class="line">    <span class="string">'/api'</span>: &#123;</span><br><span class="line">    target: <span class="string">'http://localhost:4000'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è½¬è½½ </category>
          
          <category> webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[è½¬è½½]ä»0æ­å»ºè‡ªå·±çš„webpackå¼€å‘ç¯å¢ƒï¼ˆä¸€ï¼‰</title>
      <link href="/2020/02/12/%5B%E8%BD%AC%E8%BD%BD%5D%E4%BB%8E0%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84webpack%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2020/02/12/%5B%E8%BD%AC%E8%BD%BD%5D%E4%BB%8E0%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84webpack%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»0æ­å»ºè‡ªå·±çš„webpackå¼€å‘ç¯å¢ƒ"><a href="#ä»0æ­å»ºè‡ªå·±çš„webpackå¼€å‘ç¯å¢ƒ" class="headerlink" title="ä»0æ­å»ºè‡ªå·±çš„webpackå¼€å‘ç¯å¢ƒ"></a>ä»0æ­å»ºè‡ªå·±çš„webpackå¼€å‘ç¯å¢ƒ</h1><h2 id="1-ä»€ä¹ˆæ˜¯Webpackï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯Webpackï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯Webpackï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯Webpackï¼Ÿ</h2><p>webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler),å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundle<br><img src="http://img.zhufengpeixun.cn/webpack.jpeg" alt=""></p><p>ä½¿ç”¨Webpackä½œä¸ºå‰ç«¯æ„å»ºå·¥å…·ï¼š</p><ul><li>ä»£ç è½¬æ¢ï¼šTypeScript ç¼–è¯‘æˆ JavaScriptã€SCSS ç¼–è¯‘æˆ CSS ç­‰ã€‚</li><li>æ–‡ä»¶ä¼˜åŒ–ï¼šå‹ç¼© JavaScriptã€CSSã€HTML ä»£ç ï¼Œå‹ç¼©åˆå¹¶å›¾ç‰‡ç­‰ã€‚</li><li>ä»£ç åˆ†å‰²ï¼šæå–å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç ã€æå–é¦–å±ä¸éœ€è¦æ‰§è¡Œéƒ¨åˆ†çš„ä»£ç è®©å…¶å¼‚æ­¥åŠ è½½ã€‚</li><li>æ¨¡å—åˆå¹¶ï¼šåœ¨é‡‡ç”¨æ¨¡å—åŒ–çš„é¡¹ç›®é‡Œä¼šæœ‰å¾ˆå¤šä¸ªæ¨¡å—å’Œæ–‡ä»¶ï¼Œéœ€è¦æ„å»ºåŠŸèƒ½æŠŠæ¨¡å—åˆ†ç±»åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ã€‚</li><li>è‡ªåŠ¨åˆ·æ–°ï¼šç›‘å¬æœ¬åœ°æºä»£ç çš„å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°æ„å»ºã€åˆ·æ–°æµè§ˆå™¨ã€‚</li><li>ä»£ç æ ¡éªŒï¼šåœ¨ä»£ç è¢«æäº¤åˆ°ä»“åº“å‰éœ€è¦æ ¡éªŒä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä»¥åŠå•å…ƒæµ‹è¯•æ˜¯å¦é€šè¿‡ã€‚</li><li>è‡ªåŠ¨å‘å¸ƒï¼šæ›´æ–°å®Œä»£ç åï¼Œè‡ªåŠ¨æ„å»ºå‡ºçº¿ä¸Šå‘å¸ƒä»£ç å¹¶ä¼ è¾“ç»™å‘å¸ƒç³»ç»Ÿã€‚</li></ul><p><strong>åœ¨<code>webpack</code>åº”ç”¨ä¸­æœ‰ä¸¤ä¸ªæ ¸å¿ƒ</strong>:</p><ul><li>1) æ¨¡å—è½¬æ¢å™¨ï¼Œç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ï¼Œå¯ä»¥åŠ è½½é JS æ¨¡å—</li><li>2) æ‰©å±•æ’ä»¶ï¼Œåœ¨ Webpack æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºæ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æ„å»ºç»“æœæˆ–åšä½ æƒ³è¦çš„äº‹æƒ…ã€‚</li></ul><h2 id="2-åˆå§‹åŒ–é¡¹ç›®"><a href="#2-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="2.åˆå§‹åŒ–é¡¹ç›®"></a>2.åˆå§‹åŒ–é¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ src   <span class="comment"># æºç ç›®å½•</span></span><br><span class="line">â”‚Â Â  â”œâ”€â”€ a-module.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ index.js</span><br></pre></td></tr></table></figure><p>ç¼–å†™ <em>a-module.js</em></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="string">'hello'</span>;</span><br></pre></td></tr></table></figure><p>ç¼–å†™ <em>index.js</em> </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="built_in">require</span>(<span class="string">'./a-module'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>CommonJS</code>æ¨¡å—çš„æ–¹å¼å¼•å…¥ï¼Œè¿™ç§æ–¹å¼é»˜è®¤åœ¨æµè§ˆå™¨ä¸Šæ˜¯æ— æ³•è¿è¡Œçš„ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ <code>webpack</code> æ¥è¿›è¡Œæ‰“åŒ…ï¼</p></blockquote><h2 id="3-webpackå¿«é€Ÿä¸Šæ‰‹"><a href="#3-webpackå¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="3.webpackå¿«é€Ÿä¸Šæ‰‹"></a>3.webpackå¿«é€Ÿä¸Šæ‰‹</h2><h3 id="3-1-å®‰è£…"><a href="#3-1-å®‰è£…" class="headerlink" title="3.1 å®‰è£…"></a>3.1 å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm install webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure><p><code>webpack</code>é»˜è®¤æ”¯æŒ0é…ç½®,é…ç½®<code>scripts</code>è„šæœ¬</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "build": "webpack"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>npm run build</code>,é»˜è®¤ä¼šè°ƒç”¨ <code>node_modules/.bin</code>ä¸‹çš„<code>webpack</code>å‘½ä»¤ï¼Œå†…éƒ¨ä¼šè°ƒç”¨<code>webpack-cli</code>è§£æç”¨æˆ·å‚æ•°è¿›è¡Œæ‰“åŒ…ã€‚é»˜è®¤ä¼šä»¥ <code>src/index.js</code> ä½œä¸ºå…¥å£æ–‡ä»¶ã€‚</p><blockquote><p>è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>npx webpack</code>,<code>npx</code> æ˜¯ 5.2ç‰ˆæœ¬ä¹‹å<code>npm</code>æä¾›çš„å‘½ä»¤å¯ä»¥æ‰§è¡Œ<code>.bin</code>ä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶</p></blockquote><p><img src="http://img.fullstackjavascript.cn/webpack1.png" alt=""></p><p>æˆ‘ä»¬å¯ä»¥å‘ç°å·²ç»äº§ç”Ÿäº†<code>dist</code>ç›®å½•ï¼Œæ­¤ç›®å½•ä¸ºæœ€ç»ˆæ‰“åŒ…å‡ºçš„ç»“æœã€‚<code>main.js</code>å¯ä»¥åœ¨htmlä¸­ç›´æ¥å¼•ç”¨,è¿™é‡Œè¿˜æç¤ºæˆ‘ä»¬é»˜è®¤<code>mode</code> ä¸º<code>production</code></p><h3 id="3-2-webpack-config-js"><a href="#3-2-webpack-config-js" class="headerlink" title="3.2 webpack.config.js"></a>3.2 webpack.config.js</h3><p>æˆ‘ä»¬æ‰“åŒ…æ—¶ä¸€èˆ¬ä¸ä¼šé‡‡ç”¨0é…ç½®ï¼Œ<code>webpack</code>åœ¨æ‰“åŒ…æ—¶é»˜è®¤ä¼šæŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„ <code>webpack.config.js or webpackfile.js</code> æ–‡ä»¶ã€‚</p><p>é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œæ‰“åŒ…</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry:<span class="string">'./src/index.js'</span>,</span><br><span class="line">    output:&#123;</span><br><span class="line">        filename:<span class="string">'bundle.js'</span>, <span class="comment">// æ‰“åŒ…å‡ºçš„ç»“æœæ–‡ä»¶</span></span><br><span class="line">        path:path.resolve(__dirname,<span class="string">'dist'</span>) <span class="comment">// æ‰“åŒ…åˆ°distç›®å½•ä¸‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-é…ç½®æ‰“åŒ…çš„mode"><a href="#3-3-é…ç½®æ‰“åŒ…çš„mode" class="headerlink" title="3.3 é…ç½®æ‰“åŒ…çš„mode"></a>3.3 é…ç½®æ‰“åŒ…çš„mode</h3><p>æˆ‘ä»¬éœ€è¦åœ¨æ‰“åŒ…æ—¶æä¾›<code>mode</code>å±æ€§æ¥åŒºåˆ†æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒ,æ¥å®ç°é…ç½®æ–‡ä»¶çš„æ‹†åˆ†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ build</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ webpack.base.js</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ webpack.dev.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ webpack.prod.js</span><br></pre></td></tr></table></figure><p><strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šä¸åŒçš„æ–‡ä»¶æ¥è¿›è¡Œæ‰“åŒ…</strong></p><p>é…ç½®<code>scripts</code>è„šæœ¬</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "build": "webpack --config ./build/webpack.prod",</span><br><span class="line">  "dev": "webpack --config ./build/webpack.dev"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ <code>config</code> å‚æ•°æŒ‡å®š,ä½¿ç”¨å“ªä¸ªé…ç½®æ–‡ä»¶æ¥è¿›è¡Œæ‰“åŒ… </p><p><strong>é€šè¿‡envå‚æ•°åŒºåˆ†</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "build": "webpack --env.production --config ./build/webpack.base",</span><br><span class="line">    "dev": "webpack --env.development --config ./build/webpack.base"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ”¹é€ <code>webpack.base</code>æ–‡ä»¶é»˜è®¤å¯¼å‡ºå‡½æ•°ï¼Œä¼šå°†ç¯å¢ƒå˜é‡ä¼ å…¥åˆ°å‡½æ•°çš„å‚æ•°ä¸­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">env</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(env); <span class="comment">// &#123; development: true &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åˆå¹¶é…ç½®æ–‡ä»¶</strong></p><p>æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å½“å‰ç¯å¢ƒæ˜¯å¦æ˜¯å¼€å‘ç¯å¢ƒæ¥åŠ è½½ä¸åŒçš„é…ç½®,è¿™é‡Œæˆ‘ä»¬éœ€è¦åšé…ç½®åˆå¹¶<br>å®‰è£…<code>webpack-merge</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-merge --save-dev</span><br></pre></td></tr></table></figure><p><code>webpack.dev</code>é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode:<span class="string">'development'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>webpack.prod</code>é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode:<span class="string">'production'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>webpack.base</code>é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="comment">// å¼€å‘ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">const</span> dev = <span class="built_in">require</span>(<span class="string">'./webpack.dev'</span>);</span><br><span class="line"><span class="comment">// ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">const</span> prod = <span class="built_in">require</span>(<span class="string">'./webpack.prod'</span>);</span><br><span class="line"><span class="keyword">const</span> base = &#123; <span class="comment">// åŸºç¡€é…ç½®</span></span><br><span class="line">    entry:<span class="string">'./src/index.js'</span>,</span><br><span class="line">    output:&#123;</span><br><span class="line">        filename:<span class="string">'bundle.js'</span>,</span><br><span class="line">        path:path.resolve(__dirname,<span class="string">'../dist'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">env</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(env.development)&#123;</span><br><span class="line">        <span class="keyword">return</span> merge(base,dev);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> merge(base,prod)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åç»­çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šå°†å…¬å…±çš„é€»è¾‘æ”¾åˆ°<code>base</code>ä¸­,å¼€å‘å’Œç”Ÿäº§å¯¹çš„é…ç½®ä¹Ÿåˆ†åˆ«è¿›è¡Œå­˜æ”¾ï¼</p><h2 id="4-webpack-dev-server"><a href="#4-webpack-dev-server" class="headerlink" title="4.webpack-dev-server"></a>4.webpack-dev-server</h2><p>é…ç½®å¼€å‘æœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨å®ç°åœ¨å†…å­˜ä¸­æ‰“åŒ…,å¹¶ä¸”è‡ªåŠ¨å¯åŠ¨æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-dev-server --save-dev</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "build": "webpack --env.production --config ./build/webpack.base",</span><br><span class="line">    "dev": "webpack-dev-server --env.development --config ./build/webpack.base"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ‰§è¡Œ<code>npm run dev</code>æ¥å¯å¯åŠ¨å¼€å‘ç¯å¢ƒ</p><p><img src="http://img.fullstackjavascript.cn/webpack2.png" alt=""></p><p>é»˜è®¤ä¼šåœ¨å½“å‰æ ¹ç›®å½•ä¸‹å¯åŠ¨æœåŠ¡</p><p><strong>é…ç½®å¼€å‘æœåŠ¡çš„é…ç½®</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    mode:<span class="string">'development'</span>,</span><br><span class="line">    devServer:&#123;</span><br><span class="line">        <span class="comment">// æ›´æ”¹é™æ€æ–‡ä»¶ç›®å½•ä½ç½®</span></span><br><span class="line">        contentBase:path.resolve(__dirname,<span class="string">'../dist'</span>),</span><br><span class="line">        compress:<span class="literal">true</span>, <span class="comment">// å¼€å¯gzip</span></span><br><span class="line">        port:<span class="number">3000</span>, <span class="comment">// æ›´æ”¹ç«¯å£å·</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-æ‰“åŒ…Htmlæ’ä»¶"><a href="#5-æ‰“åŒ…Htmlæ’ä»¶" class="headerlink" title="5.æ‰“åŒ…Htmlæ’ä»¶"></a>5.æ‰“åŒ…Htmlæ’ä»¶</h2><h3 id="5-1-å•å…¥å£æ‰“åŒ…"><a href="#5-1-å•å…¥å£æ‰“åŒ…" class="headerlink" title="5.1 å•å…¥å£æ‰“åŒ…"></a>5.1 å•å…¥å£æ‰“åŒ…</h3><p>è‡ªåŠ¨äº§ç”Ÿhtmlï¼Œå¹¶å¼•å…¥æ‰“åŒ…åçš„æ–‡ä»¶</p><p>ç¼–è¾‘<code>webpack.base</code>æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line">plugins:[</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">        filename:<span class="string">'index.html'</span>, <span class="comment">// æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å</span></span><br><span class="line">        template:path.resolve(__dirname,<span class="string">'../public/index.html'</span>),</span><br><span class="line">        hash:<span class="literal">true</span>, <span class="comment">// åœ¨å¼•ç”¨èµ„æºçš„åé¢å¢åŠ hashæˆ³</span></span><br><span class="line">        minify:&#123;</span><br><span class="line">            removeAttributeQuotes:<span class="literal">true</span> <span class="comment">// åˆ é™¤å±æ€§åŒå¼•å·</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="5-2-å¤šå…¥å£æ‰“åŒ…"><a href="#5-2-å¤šå…¥å£æ‰“åŒ…" class="headerlink" title="5.2 å¤šå…¥å£æ‰“åŒ…"></a>5.2 å¤šå…¥å£æ‰“åŒ…</h3><p>æ ¹æ®ä¸åŒå…¥å£ ç”Ÿæˆå¤šä¸ªjsæ–‡ä»¶ï¼Œå¼•å…¥åˆ°ä¸åŒhtmlä¸­</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ entry-1.js</span><br><span class="line">    â””â”€â”€ entry-2.js</span><br></pre></td></tr></table></figure><p>å¤šå…¥å£éœ€è¦é…ç½®å¤šä¸ªentry</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">entry:&#123;</span><br><span class="line">    jquery:[<span class="string">'jquery'</span>], <span class="comment">// æ‰“åŒ…jquery</span></span><br><span class="line">    entry1:path.resolve(__dirname,<span class="string">'../src/entry-1.js'</span>),</span><br><span class="line">    entry2:path.resolve(__dirname,<span class="string">'../src/entry-2.js'</span>)</span><br><span class="line">&#125;,</span><br><span class="line">output:&#123;</span><br><span class="line">    filename:<span class="string">'[name].js'</span>,</span><br><span class="line">    path:path.resolve(__dirname,<span class="string">'../dist'</span>)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>äº§ç”Ÿå¤šä¸ªHtmlæ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    filename:<span class="string">'index.html'</span>, </span><br><span class="line">    template:path.resolve(__dirname,<span class="string">'../public/template.html'</span>),</span><br><span class="line">    hash:<span class="literal">true</span>, </span><br><span class="line">    minify:&#123;</span><br><span class="line">        removeAttributeQuotes:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    chunks:[<span class="string">'jquery'</span>,<span class="string">'entry1'</span>], <span class="comment">// å¼•å…¥çš„chunk æœ‰jquery,entry</span></span><br><span class="line">&#125;),</span><br><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    filename:<span class="string">'login.html'</span>,</span><br><span class="line">    template:path.resolve(__dirname,<span class="string">'../public/template.html'</span>),</span><br><span class="line">    hash:<span class="literal">true</span>,</span><br><span class="line">    minify:&#123;</span><br><span class="line">        removeAttributeQuotes:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    inject:<span class="literal">false</span>, <span class="comment">// inject ä¸ºfalseè¡¨ç¤ºä¸æ³¨å…¥jsæ–‡ä»¶</span></span><br><span class="line">    chunksSortMode:<span class="string">'manual'</span>, <span class="comment">// æ‰‹åŠ¨é…ç½®ä»£ç å—é¡ºåº</span></span><br><span class="line">    chunks:[<span class="string">'entry2'</span>,<span class="string">'jquery'</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„æ–¹å¼ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ <code>HtmlPlugin</code>åº”è¯¥åŠ¨æ€äº§ç”Ÿ<code>html</code>æ–‡ä»¶ï¼Œåƒè¿™æ ·:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> htmlPlugins = [</span><br><span class="line">  &#123;</span><br><span class="line">    entry: <span class="string">"entry1"</span>,</span><br><span class="line">    html: <span class="string">"index.html"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    entry: <span class="string">"entry2"</span>,</span><br><span class="line">    html: <span class="string">"login.html"</span></span><br><span class="line">  &#125;</span><br><span class="line">].map(</span><br><span class="line">  item =&gt;</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      filename: item.html,</span><br><span class="line">      template: path.resolve(__dirname, <span class="string">"../public/template.html"</span>),</span><br><span class="line">      hash: <span class="literal">true</span>,</span><br><span class="line">      minify: &#123;</span><br><span class="line">        removeAttributeQuotes: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      chunks: [<span class="string">"jquery"</span>, item.entry]</span><br><span class="line">    &#125;)</span><br><span class="line">);</span><br><span class="line">plugins: [...htmlPlugins]</span><br></pre></td></tr></table></figure><h2 id="6-æ¸…ç©ºæ‰“åŒ…ç»“æœ"><a href="#6-æ¸…ç©ºæ‰“åŒ…ç»“æœ" class="headerlink" title="6.æ¸…ç©ºæ‰“åŒ…ç»“æœ"></a>6.æ¸…ç©ºæ‰“åŒ…ç»“æœ</h2><p>å¯ä»¥ä½¿ç”¨<code>clean-webpack-plugin</code>æ‰‹åŠ¨æ¸…é™¤æŸä¸ªæ–‡ä»¶å¤¹å†…å®¹:</p><p><strong>å®‰è£…</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev clean-webpack-plugin</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">'clean-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">new</span> CleanWebpackPlugin(&#123;</span><br><span class="line">    <span class="comment">// æ¸…ç©ºåŒ¹é…çš„è·¯å¾„</span></span><br><span class="line">    cleanOnceBeforeBuildPatterns: [path.resolve(<span class="string">'xxxx/*'</span>),<span class="string">'**/*'</span>],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥æ¸…ç©ºæŒ‡å®šçš„ç›®å½•äº†,æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>webpack</code>æ’ä»¶çš„åŸºæœ¬ç”¨æ³•å°±æ˜¯ <code>new Plugin</code>å¹¶ä¸”æ”¾åˆ°<code>plugins</code>ä¸­</p>]]></content>
      
      
      <categories>
          
          <category> è½¬è½½ </category>
          
          <category> webpack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mobxä¸mobx-reactå®ç°todoList</title>
      <link href="/2020/02/11/mobx%E4%B8%8Emobx-react%E5%AE%9E%E7%8E%B0todoList/"/>
      <url>/2020/02/11/mobx%E4%B8%8Emobx-react%E5%AE%9E%E7%8E%B0todoList/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨ mobx ç»“åˆ react æ­å»ºçš„å° demoâ€¦.</p><a id="more"></a><p>å…ˆçœ‹æ•ˆæœå›¾ï¼š</p><p><fancybox><img src="https://image.gslb.dawnlab.me/330531fde85d66b06ad388bb580c1fcb.png" alt=""></fancybox></p><p>é¢„è§ˆåœ°å€ï¼š<a href="https://curtaintan.github.io/mobx-todoList/" target="_blank" rel="noopener">TodoList</a><br>github åœ°å€ï¼š<a href="https://github.com/curtainTan/mobx-todoList" target="_blank" rel="noopener">mobx-react â€” todoList</a></p><h1 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h1><p>æœ¬æ–‡ä¸»è¦ä»‹ç» mobx-react ä¸ mobx çš„ä½¿ç”¨ï¼Œæœ€åå®Œæˆ todolistã€‚</p><p>æ­¤ demo å…¨éƒ¨ç”¨ class ç»„ä»¶æ­å»ºå®Œæˆï¼Œå¦‚éœ€ä½¿ç”¨ hooks ï¼Œè¯·å‚è€ƒ<a href="https://mobx-react.js.org/" target="_blank" rel="noopener">mobxä¸react-hooks</a></p><h1 id="2-ç¯å¢ƒå‡†å¤‡"><a href="#2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2. ç¯å¢ƒå‡†å¤‡"></a>2. ç¯å¢ƒå‡†å¤‡</h1><p>éœ€è¦åœ¨<a href="http://blog.curtaintan.club/2020/02/11/mobx-%E7%AE%80%E6%98%8E%E5%AD%A6%E4%B9%A0/">mobxâ€”ç®€æ˜å­¦ä¹ </a>çš„åŸºç¡€ä¸Šã€‚</p><p><strong>å®‰è£… reactä¸€å¥—</strong>ï¼š</p><p><code>yarn add react react-dom prop-types</code></p><p><strong>å®‰è£… babel-reactç›¸å…³æ’ä»¶</strong></p><p><code>yarn add @babel/preset-react</code></p><p><strong>å®‰è£… mobx-react</strong></p><p><code>yarn add mobx-react</code></p><p><strong>é…ç½® webpack.config.js æ–‡ä»¶</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/3e9514b9386a865aef4f966afab7f411.png" alt=""></fancybox></p><p>é…ç½®å®Œæˆï¼Œå¼€å§‹ç¼–å†™æ–‡ä»¶ã€‚</p><h1 id="3-mobx-react-è¯´æ˜ï¼š"><a href="#3-mobx-react-è¯´æ˜ï¼š" class="headerlink" title="3. mobx-react è¯´æ˜ï¼š"></a>3. mobx-react è¯´æ˜ï¼š</h1><p>çœ‹ <a href="https://github.com/mobxjs/mobx-react" target="_blank" rel="noopener">mobx-react å®˜æ–¹æ–‡æ¡£</a></p><p>å¯çŸ¥æœ‰å¦‚ä¸‹ apiï¼š</p><ol><li>observer(componentClass)</li><li>Observer â€”- Observeræ˜¯ä¸€ä¸ªReactç»„ä»¶ï¼Œå®ƒå°†è§‚å¯Ÿè€…åº”ç”¨äºç»„ä»¶ä¸­çš„åŒ¿ååŒºåŸŸã€‚</li><li>useLocalStore hook</li><li>useAsObservableSource hook</li><li>Server Side Rendering with useStaticRenderingï¼ˆæœåŠ¡ç«¯ï¼‰</li><li>PropTypes</li><li>Provider and inject</li><li>disposeOnUnmount(componentInstance, propertyKey | function | function[])</li></ol><p>å¯è§ï¼Œæœ‰ä¸¤ç§ apiï¼Œä¸€ç§æ˜¯é’ˆå¯¹ componentClass çš„ï¼Œä¸€ç§æ˜¯é’ˆå¯¹ hooks çš„ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨ componentClassï¼Œæ‰€ä»¥ä¸»è¦ç”¨åˆ°ï¼š</p><ol><li>observer(componentClass)   ä½¿ç±»é‡æ–°render</li><li>PropTypes                  åˆ¤å®šproptype</li><li>Provider and inject        æä¾› store å’Œ æ³¨å…¥å¯¹åº”props</li></ol><p>å…·ä½“çš„ä½¿ç”¨ï¼Œè¯·é˜…è¯» <strong><a href="https://github.com/mobxjs/mobx-react" target="_blank" rel="noopener"> å®˜æ–¹æ–‡æ¡£ </a></strong>ï¼Œ å®˜æ–¹æ–‡æ¡£å†™å¾—è›®è¯¦ç»†çš„ã€‚</p><h1 id="4-å¼€å§‹ç¼–å†™"><a href="#4-å¼€å§‹ç¼–å†™" class="headerlink" title="4. å¼€å§‹ç¼–å†™"></a>4. å¼€å§‹ç¼–å†™</h1><p>æ–‡ä»¶ç»“æ„ï¼š<br><fancybox><img src="https://image.gslb.dawnlab.me/d3bc60216a0eeede72d6328d81258ed7.png" alt=""></fancybox></p><h2 id="4-1-store-js"><a href="#4-1-store-js" class="headerlink" title="4.1 store.js"></a>4.1 store.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, action, computed, observe &#125; <span class="keyword">from</span> <span class="string">"mobx"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line">    id = <span class="built_in">Math</span>.random()</span><br><span class="line">    @observable title = <span class="string">""</span></span><br><span class="line">    @observable finished = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">constructor</span>( title )&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title</span><br><span class="line">    &#125;</span><br><span class="line">    @action.bound toggle()&#123;</span><br><span class="line">        <span class="keyword">this</span>.finished = !<span class="keyword">this</span>.finished</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</span><br><span class="line">    @observable todos = []</span><br><span class="line">    disposers = []</span><br><span class="line">    @action.bound createTodo( title )&#123;</span><br><span class="line">        <span class="keyword">this</span>.todos.unshift( <span class="keyword">new</span> Todo( title ) )</span><br><span class="line">    &#125;</span><br><span class="line">    @computed <span class="keyword">get</span> left()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.todos.filter( <span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> !todo.finished</span><br><span class="line">        &#125;).length</span><br><span class="line">    &#125;</span><br><span class="line">    @action.bound removeTodo( todo )&#123;</span><br><span class="line">        <span class="keyword">this</span>.todos.remove( todo )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        observe( <span class="keyword">this</span>.todos, change =&gt; &#123;</span><br><span class="line">            <span class="keyword">this</span>.disposers.forEach( <span class="function"><span class="params">disposer</span> =&gt;</span> disposer() )</span><br><span class="line">            <span class="keyword">this</span>.disposers = []</span><br><span class="line">            <span class="keyword">for</span>( <span class="keyword">let</span> todo <span class="keyword">of</span> change.object )&#123;</span><br><span class="line">                <span class="keyword">var</span> disposer = observe( todo, change =&gt; &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log( change )</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">this</span>.disposers.push( disposer )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Store()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ss = &#123;</span><br><span class="line">    store</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ss</span><br></pre></td></tr></table></figure><h2 id="4-2-index-jsx"><a href="#4-2-index-jsx" class="headerlink" title="4.2 index.jsx"></a>4.2 index.jsx</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer, Provider &#125; <span class="keyword">from</span> <span class="string">"mobx-react"</span></span><br><span class="line"><span class="keyword">import</span> &#123; trace &#125; <span class="keyword">from</span> <span class="string">"mobx"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> TodoHeader <span class="keyword">from</span> <span class="string">"./conponent/TodoHeader.jsx"</span></span><br><span class="line"><span class="keyword">import</span> TodoView <span class="keyword">from</span> <span class="string">"./conponent/TodoView.jsx"</span></span><br><span class="line"><span class="keyword">import</span> TodoFooter <span class="keyword">from</span> <span class="string">"./conponent/TodoFooter.jsx"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ss <span class="keyword">from</span> <span class="string">"./store.js"</span></span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        trace()</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div className=<span class="string">"todo-list"</span> &gt;</span><br><span class="line">                &lt;TodoHeader /&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &lt;TodoView /&gt;</span><br><span class="line">                &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">                &lt;TodoFooter /</span>&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render( (</span></span><br><span class="line"><span class="regexp">    &lt;Provider &#123; ...ss &#125; &gt;</span></span><br><span class="line"><span class="regexp">        &lt;TodoList /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/Provider&gt;</span></span><br><span class="line"><span class="regexp">), document.querySelector("#root") )</span></span><br></pre></td></tr></table></figure><h2 id="4-3-TodoFooter-jsx"><a href="#4-3-TodoFooter-jsx" class="headerlink" title="4.3 TodoFooter.jsx"></a>4.3 TodoFooter.jsx</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer, inject &#125; <span class="keyword">from</span> <span class="string">"mobx-react"</span></span><br><span class="line"><span class="keyword">import</span> &#123; trace &#125; <span class="keyword">from</span> <span class="string">"mobx"</span></span><br><span class="line"></span><br><span class="line">@inject( <span class="function"><span class="params">allStore</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        left: allStore.store.left</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoFooter</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        trace()</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;footer&gt;</span><br><span class="line">                &#123; <span class="keyword">this</span>.props.left &#125; items unfinished...</span><br><span class="line">            &lt;<span class="regexp">/footer&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default TodoFooter</span></span><br></pre></td></tr></table></figure><h2 id="4-4-TodoHeader-jsx"><a href="#4-4-TodoHeader-jsx" class="headerlink" title="4.4 TodoHeader.jsx"></a>4.4 TodoHeader.jsx</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer, inject &#125; <span class="keyword">from</span> <span class="string">"mobx-react"</span></span><br><span class="line"></span><br><span class="line">@inject( <span class="string">"store"</span> )</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoHeader</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        inputValue : <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleSubmit = <span class="function">(<span class="params"> e </span>) =&gt;</span> &#123;</span><br><span class="line">        e.preventDefault()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> store = <span class="keyword">this</span>.props.store</span><br><span class="line">        <span class="keyword">var</span> inputValue = <span class="keyword">this</span>.state.inputValue</span><br><span class="line"></span><br><span class="line">        store.createTodo( inputValue )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.setState(&#123; <span class="attr">inputValue</span>: <span class="string">""</span> &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    handleChange = <span class="function">(<span class="params"> e </span>) =&gt;</span> &#123;</span><br><span class="line">        e.persist()</span><br><span class="line">        <span class="keyword">var</span> inputValue = e.target.value</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            inputValue: inputValue</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;header&gt;</span><br><span class="line">                &lt;form onSubmit=&#123; <span class="keyword">this</span>.handleSubmit &#125; &gt;</span><br><span class="line">                    &lt;input </span><br><span class="line">                    type=<span class="string">"text"</span> </span><br><span class="line">                    onChange=&#123; e =&gt; <span class="keyword">this</span>.handleChange( e )&#125; </span><br><span class="line">                    value=&#123; <span class="keyword">this</span>.state.inputValue &#125;</span><br><span class="line">                    className=<span class="string">"input"</span></span><br><span class="line">                    placeholder=<span class="string">" what deeds to be finished? "</span></span><br><span class="line">                    /&gt;</span><br><span class="line">                &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>header&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoHeader</span><br></pre></td></tr></table></figure><h2 id="4-5-TodoView-jsx"><a href="#4-5-TodoView-jsx" class="headerlink" title="4.5 TodoView.jsx"></a>4.5 TodoView.jsx</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component, Fragment &#125; <span class="keyword">from</span> <span class="string">"react"</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">"prop-types"</span></span><br><span class="line"><span class="keyword">import</span> &#123; observer, inject &#125; <span class="keyword">from</span> <span class="string">"mobx-react"</span></span><br><span class="line"></span><br><span class="line">@inject( <span class="string">"store"</span> )</span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoView</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">const</span> store = <span class="keyword">this</span>.props.store</span><br><span class="line">        <span class="keyword">const</span> &#123; todos &#125; = store</span><br><span class="line">        <span class="keyword">return</span> todos.map( <span class="function"><span class="params">todo</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">                &lt;li key=&#123; todo.id &#125; className=<span class="string">"todo-item"</span>&gt;</span><br><span class="line">                    &lt;TodoItem todo=&#123; todo &#125; /&gt;</span><br><span class="line">                    &lt;span className=<span class="string">"delete"</span> onClick=&#123; e =&gt; store.removeTodo( todo ) &#125; &gt;X&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>li&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@observer</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoItem</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">        todo: PropTypes.shape(&#123;</span><br><span class="line">            id: PropTypes.number.isRequired,</span><br><span class="line">            title: PropTypes.string.isRequired,</span><br><span class="line">            finished: PropTypes.bool.isRequired</span><br><span class="line">        &#125;).isRequired</span><br><span class="line">    &#125;</span><br><span class="line">    handleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.props.todo.toggle()</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">const</span> todo = <span class="keyword">this</span>.props.todo</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;Fragment&gt;</span><br><span class="line">                &lt;input </span><br><span class="line">                type=<span class="string">"checkbox"</span> </span><br><span class="line">                className=<span class="string">"toggle"</span> </span><br><span class="line">                checked=&#123; todo.finished &#125; </span><br><span class="line">                onChange=&#123; <span class="keyword">this</span>.handleClick &#125; /&gt;</span><br><span class="line">                &lt;span className=&#123;[<span class="string">"title"</span>, todo.finished &amp;&amp; <span class="string">"finished"</span>].join(<span class="string">" "</span>)&#125; &gt;</span><br><span class="line">                    &#123; todo.title &#125;</span><br><span class="line">                &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>Fragment&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoView</span><br></pre></td></tr></table></figure><h2 id="4-6-html-æ–‡ä»¶å†…æ·»åŠ -css-æ ·å¼"><a href="#4-6-html-æ–‡ä»¶å†…æ·»åŠ -css-æ ·å¼" class="headerlink" title="4.6 html æ–‡ä»¶å†…æ·»åŠ  css æ ·å¼"></a>4.6 html æ–‡ä»¶å†…æ·»åŠ  css æ ·å¼</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.input</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todo-item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todo-item</span> <span class="selector-class">.toggle</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todo-item</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todo-item</span> <span class="selector-class">.title</span><span class="selector-class">.finished</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.todo-item</span> <span class="selector-class">.delete</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-æ€§èƒ½ä¼˜åŒ–"><a href="#5-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="5. æ€§èƒ½ä¼˜åŒ–"></a>5. æ€§èƒ½ä¼˜åŒ–</h1><p><strong>æå‡æ€§èƒ½ä¸‰å¤§æ³•åˆ™ï¼š</strong></p><ol><li>ç»†ç²’åº¦æ‹†åˆ†è§†å›¾ç»„ä»¶</li><li>ä½¿ç”¨ä¸“ç”¨ç»„ä»¶å¤„ç†åˆ—è¡¨</li><li>å°½å¯èƒ½æ™šçš„ç»“æ„å¯è§‚å¯Ÿæ•°æ®</li></ol><p>ä¸Šé¢ä¸‰å¤§æ³•åˆ™ï¼Œä½ åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œèƒ½æ‰¾åˆ°åœ¨å“ªé‡Œå—ï¼Ÿï¼Ÿ</p><p>è¿˜æœ‰å…¶ä»–çš„ä¼˜åŒ–ç‚¹ï¼š</p><ol><li>å°½æ—©çš„ç»‘å®šå‡½æ•°ï¼ˆä¸è¦ä¼ åŒ¿åå‡½æ•°å’Œç®­å¤´å‡½æ•°ï¼‰</li><li>ä¸è¦ä½¿ç”¨æ•°ç»„çš„ç´¢å¼•ä½œä¸º key</li><li>ä½¿ç”¨å°ç»„ä»¶</li></ol><p>è¯¦æƒ…å‚è€ƒï¼š<a href="https://cn.mobx.js.org/best/react-performance.html" target="_blank" rel="noopener">ä¼˜åŒ– React ç»„ä»¶æ¸²æŸ“</a></p><h1 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h1><p>å½“å¾—åˆ°ä¸€äº›ç‚¹æ‹¨è¿‡åï¼Œå†å»é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå°±ä¼šæ”¶è·æ›´å¤šï¼Œ</p><p>å½“ç„¶ä¹Ÿè¦å­¦ä¼šé˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå®˜æ–¹æ–‡æ¡£å†™å¾—éƒ½è›®å¥½çš„ã€‚</p><p>å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œä¹Ÿç®—æ˜¯æ€»ç»“äº†ä¸€ä¸‹ mobx ç›¸å…³çš„çŸ¥è¯†.</p><p><strong>åŠ æ²¹ï¼Œå†™ä¸‹è¿™ç¯‡æ–‡ç« å¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å›å…±å‹‰ï¼ï¼</strong></p><p>æœ‰æ—¶é—´ï¼Œæˆ‘ä¼šæŠŠ class ç‰ˆæœ¬æ”¹æˆ hook ç‰ˆæœ¬çš„ã€‚</p><h1 id="7-å‚è€ƒææ–™"><a href="#7-å‚è€ƒææ–™" class="headerlink" title="7. å‚è€ƒææ–™"></a>7. å‚è€ƒææ–™</h1><p><a href="https://www.imooc.com/video/17455" target="_blank" rel="noopener">èŒµé£æ³³æœˆâ€“mobxå…¥é—¨åŸºç¡€æ•™ç¨‹</a></p><p><a href="https://cn.mobx.js.org/" target="_blank" rel="noopener">mobxâ€”-å®˜ç½‘</a></p><p><a href="https://github.com/mobxjs/mobx-react" target="_blank" rel="noopener">mobx-react æ–‡æ¡£</a></p><p><a href="https://mobx-react.js.org/" target="_blank" rel="noopener">mobx-react å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> mobx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mobx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mobx--ç®€æ˜å­¦ä¹ </title>
      <link href="/2020/02/11/mobx-%E7%AE%80%E6%98%8E%E5%AD%A6%E4%B9%A0/"/>
      <url>/2020/02/11/mobx-%E7%AE%80%E6%98%8E%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/6e7e66ff9996ffb60b60ef4706ceb9f2.png" alt=""></fancybox></p><p>mobx ç®€æ˜å­¦ä¹ ä¸å®è·µâ€¦.</p><a id="more"></a><p><strong>å‰ç½®ç¯å¢ƒå‡†å¤‡ï¼š</strong>è¯·å‚è€ƒï¼š<strong><a href="http://blog.curtaintan.club/2020/02/10/es6-Decorator/">es6â€”Decorator</a></strong>,å¹¶ä½¿ç”¨ <code>yarn add mobx</code> å®‰è£… mobx æ¨¡å—ã€‚</p><h1 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h1><p><em>å­¦ä¹ å‰ï¼Œå»ºè®®ä»”ç»†é˜…è¯»ä¸€é <strong><a href="https://cn.mobx.js.org/" target="_blank" rel="noopener">MobX ä»‹ç»</a></strong> äº†è§£ mobx è¿è¡Œæœºåˆ¶ã€‚</em></p><p>å…ˆçœ‹ mobx å®˜ç½‘çš„æ–‡æ¡£ç›®å½•ï¼š<br><fancybox><img src="https://image.gslb.dawnlab.me/ec3dc09eacd9da06d5254f2d0355517a.png" alt=""></fancybox></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ªåº“ï¼Œéœ€è¦æˆ‘ä»¬å­¦ä¹ çš„å°±åªæœ‰ä¸‰ä¸ªä¸»è¦çš„ç‚¹ï¼š</p><ol><li>observable ç›¸å…³ â€”â€“ åˆ›å»ºè§‚å¯Ÿæ•°æ®</li><li>å¯¹ observables ä½œå‡ºå“åº” â€”â€“ æ•°æ®æ”¹å˜æ—¶çš„å“åº”æ“ä½œ</li><li>æ”¹å˜ observables</li></ol><p>è¿˜æœ‰ä¸€ä¸ªå·¥å…·å‡½æ•°ã€‚</p><h1 id="2-observable-ç›¸å…³-â€”-åˆ›å»ºè¢«è§‚å¯Ÿæ•°æ®"><a href="#2-observable-ç›¸å…³-â€”-åˆ›å»ºè¢«è§‚å¯Ÿæ•°æ®" class="headerlink" title="2. observable ç›¸å…³ â€”- åˆ›å»ºè¢«è§‚å¯Ÿæ•°æ®"></a>2. observable ç›¸å…³ â€”- åˆ›å»ºè¢«è§‚å¯Ÿæ•°æ®</h1><p>åˆ›å»ºå¯è§‚å¯Ÿæ•°æ®çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ol><li>ä½¿ç”¨ observable å‡½æ•°æ„å»º</li><li>ä½¿ç”¨ @observable è£…é¥°ç±»æ„å»º</li></ol><h2 id="2-1-ä½¿ç”¨-observable-å‡½æ•°æ„å»º"><a href="#2-1-ä½¿ç”¨-observable-å‡½æ•°æ„å»º" class="headerlink" title="2.1 ä½¿ç”¨ observable å‡½æ•°æ„å»º"></a>2.1 ä½¿ç”¨ observable å‡½æ•°æ„å»º</h2><figure class="highlight js"><figcaption><span>observable å‡½æ•°æ„å»ºå¯è§‚å¯Ÿçš„æ•°æ®</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = observable(<span class="string">"value"</span>)</span><br><span class="line"><span class="keyword">const</span> list = observable([<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>])</span><br><span class="line"><span class="keyword">const</span> map = observable.map(&#123; <span class="attr">key</span>: <span class="string">"value"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ observable.box()</span></span><br><span class="line"><span class="keyword">const</span> cityName = observable.box(<span class="string">"tan"</span>)</span><br></pre></td></tr></table></figure><h2 id="2-1-ä½¿ç”¨-observable-è£…é¥°ç±»æ„å»º"><a href="#2-1-ä½¿ç”¨-observable-è£…é¥°ç±»æ„å»º" class="headerlink" title="2.1 ä½¿ç”¨ @observable è£…é¥°ç±»æ„å»º"></a>2.1 ä½¿ç”¨ @observable è£…é¥°ç±»æ„å»º</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</span><br><span class="line">    @observable num = <span class="number">22</span></span><br><span class="line">    @observable str = <span class="string">"string"</span></span><br><span class="line">    @observable bool = <span class="literal">false</span></span><br><span class="line">    @observable obj = &#123;</span><br><span class="line">        name: <span class="string">"tan"</span>,</span><br><span class="line">        age: <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line">    @observable array = []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-å¯¹-observables-ä½œå‡ºå“åº”"><a href="#3-å¯¹-observables-ä½œå‡ºå“åº”" class="headerlink" title="3. å¯¹ observables ä½œå‡ºå“åº”"></a>3. å¯¹ observables ä½œå‡ºå“åº”</h1><p>æœ‰ 4 ä¸ª api å¤„ç†å“åº”ï¼š</p><ol><li>computed å’Œ @computed å‡½æ•°å†…ä¾èµ–çš„è§‚å¯Ÿé¡¹æ”¹å˜æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œï¼Œç±»ä¼¼ vue ä¸­çš„ computed</li><li>autorun( fn, { options } ): å‡½æ•°å†…çš„ä¾èµ–é¡¹æ”¹å˜æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œ</li><li>when( fn, fn ): ç¬¬ä¸€ä¸ªå‡½æ•°å†…ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°è¿”å› true æ—¶ï¼Œæ‰§è¡Œç¬¬äºŒä¸ªå‡½æ•°</li><li>reaction( fn, fn ): ç¬¬ä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­å€¼çš„æ”¹å˜æ—¶ï¼Œæ‰§è¡Œç¬¬äºŒä¸ªå‡½æ•°</li></ol><p>observer å’Œ @observer ä¿®é¥° react ç±»ï¼Œç”¨äºæ›´æ–°è§†å›¾</p><p><strong>ä»£ç ï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/12691c66d2e142ff96b024157e974bfe.png" alt=""></fancybox></p><p>ä»£ç æ”¾åœ¨æ–‡ç« å°¾éƒ¨</p><p><strong>è¿è¡Œç»“æœï¼š</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/3cb216864da9253115ef5c162a1d09c6.png" alt=""></fancybox></p><h1 id="4-action-â€“æ”¹å˜â€“-observables"><a href="#4-action-â€“æ”¹å˜â€“-observables" class="headerlink" title="4. action â€“æ”¹å˜â€“ observables"></a>4. action â€“æ”¹å˜â€“ observables</h1><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ store æ¥ä¿®æ”¹å±æ€§ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡å±æ€§çš„æ”¹å˜ï¼Œå“åº”æ“ä½œéƒ½ä¼šæ‰§è¡Œï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸€æ¬¡æ€§æ‰§å¤šä¸ªå±æ€§çš„æ”¹å˜çš„æ—¶å€™ï¼Œå“åº”æ“ä½œå°±ä¼šæ‰§è¡Œå¤šæ¬¡ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä¸€æ¬¡å°±å¤Ÿäº†ï¼Œé‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿï¼Ÿæ­¤æ—¶ action å°±å‡ºåœºäº†ã€‚</p><p>action ä¸»è¦æœ‰ï¼š</p><ol><li>action( fn ): fn â€” åˆ›å»ºä¸€ä¸ª action å‡½æ•°</li><li>@action - fn : ä¿®é¥°ç±»æ–¹æ³•ï¼Œä½¿å…¶å˜æˆ action æ–¹æ³•</li><li>@action.bound : ä¿®é¥°ç±»æ–¹æ³•ï¼Œç»‘å®š this</li><li>runInAction(name?, thunk)ï¼š ç›´æ¥è¿è¡Œ action æ“ä½œï¼Œæ­é… @action å¯æ‰§è¡Œå¼‚æ­¥</li></ol><p><strong>æ¡ˆä¾‹ï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/14079b48e3c40c775f1c3c9c9d351800.png" alt=""></fancybox><br>ä»£ç æ”¾åœ¨æ–‡ç« åº•éƒ¨</p><p><strong>æµ‹è¯•ç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/67b0553703743d9e422da1752a5b2d5b.png" alt=""></fancybox></p><h1 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h1><p><em>å·¥å…·å‡½æ•°å°±è‡ªè¡Œçœ‹å®˜æ–¹æ–‡æ¡£äº†ã€‚</em></p><p>å¯¹æ¯”ç€ mobx çš„è¿è¡Œæµç¨‹å›¾ï¼š</p><p><fancybox><img src="https://image.gslb.dawnlab.me/6e7e66ff9996ffb60b60ef4706ceb9f2.png" alt=""></fancybox></p><p>æˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ˜“çš„ç†è§£å„ä¸ª api ä¹‹é—´çš„å…³ç³»äº†ã€‚</p><h1 id="6-å‚è€ƒææ–™"><a href="#6-å‚è€ƒææ–™" class="headerlink" title="6. å‚è€ƒææ–™"></a>6. å‚è€ƒææ–™</h1><p><a href="https://cn.mobx.js.org/" target="_blank" rel="noopener">mobxâ€”-å®˜ç½‘</a></p><p>æ¨èå¤§å®¶å»è§‚çœ‹æ­¤æ•™ç¨‹ï¼Œéå¸¸å¥½çš„æ•™ç¨‹ã€‚<br><a href="https://www.imooc.com/video/17455" target="_blank" rel="noopener">èŒµé£æ³³æœˆâ€“mobxå…¥é—¨åŸºç¡€æ•™ç¨‹</a></p><h1 id="7-æ–‡ä¸­ä½¿ç”¨ä»£ç ï¼š"><a href="#7-æ–‡ä¸­ä½¿ç”¨ä»£ç ï¼š" class="headerlink" title="7. æ–‡ä¸­ä½¿ç”¨ä»£ç ï¼š"></a>7. æ–‡ä¸­ä½¿ç”¨ä»£ç ï¼š</h1><h2 id="æµ‹è¯•ç›¸åº”çš„ä»£ç "><a href="#æµ‹è¯•ç›¸åº”çš„ä»£ç " class="headerlink" title="æµ‹è¯•ç›¸åº”çš„ä»£ç "></a>æµ‹è¯•ç›¸åº”çš„ä»£ç </h2><figure class="highlight js"><figcaption><span>æµ‹è¯•å‰¯ä½œç”¨</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, computed, autorun, when, reaction &#125; <span class="keyword">from</span> <span class="string">"mobx"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</span><br><span class="line">    @observable num = <span class="number">22</span></span><br><span class="line">    @observable str = <span class="string">"string"</span></span><br><span class="line">    @observable bool = <span class="literal">false</span></span><br><span class="line">    @observable obj = &#123;</span><br><span class="line">        name: <span class="string">"tan"</span>,</span><br><span class="line">        age: <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @computed <span class="keyword">get</span> mixed()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.obj.age + <span class="string">"-----"</span> + <span class="keyword">this</span>.str</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> store = <span class="keyword">new</span> Store()</span><br><span class="line"><span class="comment">// æµ‹è¯• computed</span></span><br><span class="line"><span class="keyword">var</span> foo =  computed( <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> store.str + <span class="string">"/"</span> + store.obj.age</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log( foo.get() )</span><br><span class="line"><span class="built_in">console</span>.log( store.mixed )</span><br><span class="line"></span><br><span class="line">foo.observe( <span class="function"><span class="keyword">function</span>(<span class="params"> change </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"computed å€¼æ”¹å˜ï¼š"</span> )</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"ä¿®æ”¹å€¼ï¼š"</span>, change )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯• autorun </span></span><br><span class="line">autorun( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"autorunè¿è¡Œï¼š"</span> )</span><br><span class="line">    <span class="built_in">console</span>.log( store.str + <span class="string">"/"</span> + store.obj.age )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯• wen</span></span><br><span class="line">when( <span class="function"><span class="params">()</span>=&gt;</span> store.bool , ()=&gt; <span class="built_in">console</span>.log( <span class="string">"å˜æˆ true äº†..."</span> ) )</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯• reaction</span></span><br><span class="line">reaction( <span class="function"><span class="params">()</span> =&gt;</span> [ store.str, store.obj.age ], </span><br><span class="line">          arr =&gt; <span class="built_in">console</span>.log( <span class="string">"reaction è¿è¡Œï¼š"</span>,arr ) )</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"å¼€å§‹æµ‹è¯•ï¼š------- wen ------"</span> )</span><br><span class="line">store.bool = <span class="literal">true</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"å¼€å§‹æµ‹è¯•ï¼š------- å…¶ä»–ä¸‰ä¸ª ------"</span> )</span><br><span class="line">store.obj.age = <span class="number">13</span></span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•-action"><a href="#æµ‹è¯•-action" class="headerlink" title="æµ‹è¯• action"></a>æµ‹è¯• action</h2><figure class="highlight js"><figcaption><span>æµ‹è¯• action </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; observable, action, reaction &#125; <span class="keyword">from</span> <span class="string">"mobx"</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</span><br><span class="line">    @observable num = <span class="number">22</span></span><br><span class="line">    @observable str = <span class="string">"string"</span></span><br><span class="line">    @observable bool = <span class="literal">false</span></span><br><span class="line">    @observable obj = &#123;</span><br><span class="line">        name: <span class="string">"tan"</span>,</span><br><span class="line">        age: <span class="number">12</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @action bar()&#123;</span><br><span class="line">        <span class="keyword">this</span>.str = <span class="string">"ä¿®æ”¹å€¼äº†--"</span></span><br><span class="line">        <span class="keyword">this</span>.num = <span class="number">89</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> store = <span class="keyword">new</span> Store()</span><br><span class="line">reaction( <span class="function"><span class="params">()</span> =&gt;</span> [ store.str, store.obj.age ], </span><br><span class="line">         arr =&gt; <span class="built_in">console</span>.log( <span class="string">"reaction è¿è¡Œï¼š"</span>,arr ) )</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ç”¨ action æ”¹å˜å€¼</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"ä¸ç”¨ action æ”¹å˜å€¼ï¼š"</span> )</span><br><span class="line">store.obj.age = <span class="number">11</span></span><br><span class="line">store.str = <span class="string">"ä½ å¥½---"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ @action</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"ä½¿ç”¨ action ä¿®é¥°å™¨æ”¹å˜å¤šä¸ªå€¼"</span> )</span><br><span class="line">store.bar()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ action   æ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"ä½¿ç”¨ action ä¿®é¥°å™¨æ”¹å˜å¤šä¸ªå€¼"</span> )</span><br><span class="line">action( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    store.str = <span class="string">"ppppppp"</span></span><br><span class="line">    store.obj.age = <span class="number">45</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> mobx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mobx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>es6---Decorator</title>
      <link href="/2020/02/10/es6-Decorator/"/>
      <url>/2020/02/10/es6-Decorator/</url>
      
        <content type="html"><![CDATA[<p>æ­å»ºå¯ä½¿ç”¨ Decorator çš„ç¯å¢ƒï¼Œå¹¶å­¦ä¹  Decorator ã€‚</p><a id="more"></a><h1 id="1-ç¯å¢ƒæ­å»º"><a href="#1-ç¯å¢ƒæ­å»º" class="headerlink" title="1. ç¯å¢ƒæ­å»º"></a>1. ç¯å¢ƒæ­å»º</h1><ol><li>å®‰è£…æ’ä»¶ï¼š</li></ol><p><strong>webpack ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack webpack-cli</span><br></pre></td></tr></table></figure><p><strong>babel ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/cli @babel/core @babel/preset-env babel-loader</span><br></pre></td></tr></table></figure><p><strong>babel è£…é¥°å™¨ç›¸å…³æ’ä»¶ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/plugin-proposal-decorators babel-plugin-transform-<span class="class"><span class="keyword">class</span>-<span class="title">properties</span></span></span><br></pre></td></tr></table></figure><p><strong>webpack.config.js é…ç½®</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/6daf0e45f415f634d1d7e6fd084f9054.png" alt=""></fancybox></p><p>é…ç½®ä»£ç æ”¾åœ¨æ–‡ç« æœ«å°¾ã€‚</p><p><strong>é…ç½® package.json</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack"</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>ç¯å¢ƒé…ç½®å®Œæ¯•ï¼Œè¿è¡Œ <code>yarn dev</code> å°±å¯ä»¥å°†æ–‡ä»¶ç¼–è¯‘å¥½ã€‚</p><p>æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå¼•å…¥ç¼–è¯‘å¥½çš„ js æ–‡ä»¶ï¼Œç¯å¢ƒé…ç½®åŸºæœ¬å®Œæˆã€‚</p><p><strong>ç›®å½•ç»“æ„ï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/ad660f54c86b4d30f9fe7d93c7f3483a.png" alt=""></fancybox></p><h1 id="2-å¼€å§‹ä¹¦å†™ä»£ç "><a href="#2-å¼€å§‹ä¹¦å†™ä»£ç " class="headerlink" title="2. å¼€å§‹ä¹¦å†™ä»£ç "></a>2. å¼€å§‹ä¹¦å†™ä»£ç </h1><p>ç¼–å†™ bundle.js</p><h2 id="2-1-ç±»çš„è£…é¥°ï¼š"><a href="#2-1-ç±»çš„è£…é¥°ï¼š" class="headerlink" title="2.1 ç±»çš„è£…é¥°ï¼š"></a>2.1 ç±»çš„è£…é¥°ï¼š</h2><p><strong>ä»£ç è®¾è®¡ï¼š</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/0653a511ca0ddb772e26aa5bf1d669b6.png" alt=""></fancybox></p><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/2de3ec69dcadd741363c8900ad824c22.png" alt=""></fancybox></p><h2 id="2-2-ç±»æ–¹æ³•çš„ä¿®é¥°"><a href="#2-2-ç±»æ–¹æ³•çš„ä¿®é¥°" class="headerlink" title="2.2 ç±»æ–¹æ³•çš„ä¿®é¥°"></a>2.2 ç±»æ–¹æ³•çš„ä¿®é¥°</h2><p><strong>ä»£ç è®¾è®¡ï¼š</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/dc114028d6ae3eceb45a0dfdf92ee224.png" alt=""></fancybox></p><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/97f7d88203ca25ced8007e485edb6b72.png" alt=""></fancybox></p><h2 id="2-2-ç±»å±æ€§çš„ä¿®é¥°"><a href="#2-2-ç±»å±æ€§çš„ä¿®é¥°" class="headerlink" title="2.2 ç±»å±æ€§çš„ä¿®é¥°"></a>2.2 ç±»å±æ€§çš„ä¿®é¥°</h2><p><strong>ä»£ç è®¾è®¡ï¼š</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/77917f3081af6e5790e9d41fc217aea7.png" alt=""></fancybox></p><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/ecf3285bee122202661e7b9f28be9b5d.png" alt=""></fancybox></p><p><strong>æ³¨ï¼š</strong></p><p>å¯ä»¥åœ¨ js æ–‡ä»¶å¤´éƒ¨ç¼–å†™ <code>&quot;use strict&quot;</code>æ¥ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œ</p><p>ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼åï¼Œå½“ä¿®æ”¹ä¸å¯ä¿®æ”¹çš„å±æ€§æ—¶ï¼Œå°±ä¼šæ‰“æ–­æ“ä½œå¹¶æŠ¥é”™ã€‚</p><h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h1><p>è£…é¥°å™¨ä¸èƒ½ç”¨ä¿®é¥°å‡½æ•°ï¼Œå› ä¸ºå‡½æ•°å­˜åœ¨å˜é‡æå‡ã€‚</p><h1 id="4-å‚è€ƒææ–™"><a href="#4-å‚è€ƒææ–™" class="headerlink" title="4. å‚è€ƒææ–™"></a>4. å‚è€ƒææ–™</h1><p><a href="https://www.imooc.com/video/17455" target="_blank" rel="noopener">èŒµé£æ³³æœˆâ€“mobxå…¥é—¨åŸºç¡€æ•™ç¨‹</a></p><p><a href="http://es6.ruanyifeng.com/#docs/decorator#%E7%B1%BB%E7%9A%84%E8%A3%85%E9%A5%B0" target="_blank" rel="noopener">é˜®ä¸€å³°â€“es6 åŸºç¡€å…¥é—¨</a></p><h1 id="5-ä»£ç "><a href="#5-ä»£ç " class="headerlink" title="5. ä»£ç "></a>5. ä»£ç </h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç±»ä¿®é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"> target </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> desc = <span class="built_in">Object</span>.getOwnPropertyDescriptors( target.prototype )</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">const</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys( desc ) )&#123;</span><br><span class="line">        <span class="keyword">if</span>( key === <span class="string">"constuctor"</span> )&#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> func = desc[key].value</span><br><span class="line">        <span class="keyword">if</span>( <span class="keyword">typeof</span> func === <span class="string">"function"</span> )&#123;</span><br><span class="line">            <span class="built_in">Object</span>.defineProperty( target.prototype, key, &#123;</span><br><span class="line">                value( ...arg )&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log( <span class="string">"åŠ ä¹‹å‰"</span>, key )</span><br><span class="line">                    <span class="keyword">const</span> ret = func.apply( <span class="keyword">this</span>, arg )</span><br><span class="line">                    <span class="built_in">console</span>.log( <span class="string">"ç›¸åŠ ----ç»“æœï¼š"</span>, ret )</span><br><span class="line">                    <span class="built_in">console</span>.log( <span class="string">"åŠ ä¹‹å"</span>, key )</span><br><span class="line">                    <span class="keyword">return</span> ret</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å±æ€§ä¿®é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readonly</span>(<span class="params"> target, key, desc </span>)</span>&#123;</span><br><span class="line">    desc.writable = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ–¹æ³•ä¿®é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validate</span>(<span class="params"> target, key, desc </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> func = desc.value</span><br><span class="line">    desc.value = <span class="function"><span class="keyword">function</span>(<span class="params"> ...arg </span>)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> num <span class="keyword">of</span> arg )&#123;</span><br><span class="line">            <span class="keyword">if</span>( <span class="keyword">typeof</span> num !== <span class="string">"number"</span> )&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`"<span class="subst">$&#123; num &#125;</span> " ä¸æ˜¯ä¸€ä¸ªæ•°å­—..`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">"å‡½æ•°é‡Œé¢çš„è£…é¥°å™¨-----å‡½æ•°çš„æ“ä½œ---"</span> )</span><br><span class="line">        <span class="keyword">return</span> func.apply( <span class="keyword">this</span>, [ <span class="number">4</span>, <span class="number">7</span> ] )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@log</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Numberic</span> </span>&#123;</span><br><span class="line">    @readonly PI = <span class="number">3.1315926</span></span><br><span class="line">    <span class="comment">// ä¿®é¥°æ–¹æ³•</span></span><br><span class="line">    add( ...nums )&#123;</span><br><span class="line">        <span class="keyword">return</span> nums.reduce( <span class="function">(<span class="params"> p, n </span>) =&gt;</span> ( p + n ), <span class="number">0</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="keyword">new</span> Numberic().add( <span class="number">1</span>, <span class="number">2</span> ) )</span><br><span class="line"><span class="keyword">var</span> ss =  <span class="keyword">new</span> Numberic()</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"ä¿®æ”¹æ•°æ®å‰ï¼š"</span>, ss )</span><br><span class="line">ss.PI = <span class="number">99</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"ä¿®æ”¹æ•°æ®åï¼š"</span>, ss )</span><br></pre></td></tr></table></figure><h2 id="5-1-ç¯å¢ƒé…ç½®ä»£ç ï¼š"><a href="#5-1-ç¯å¢ƒé…ç½®ä»£ç ï¼š" class="headerlink" title="5.1 ç¯å¢ƒé…ç½®ä»£ç ï¼š"></a>5.1 ç¯å¢ƒé…ç½®ä»£ç ï¼š</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    mode: <span class="string">"development"</span>,</span><br><span class="line">    <span class="comment">// å…¥å£æ–‡ä»¶</span></span><br><span class="line">    entry: path.resolve( __dirname, <span class="string">"./src/mobx.js"</span> ),</span><br><span class="line">    <span class="comment">// æ‰“åŒ…è¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.resolve( __dirname, <span class="string">"mobx"</span> ),</span><br><span class="line">        filename: <span class="string">"main.js"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        rules: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">                use: &#123;</span><br><span class="line">                    loader: <span class="string">"babel-loader"</span>,</span><br><span class="line">                    options: &#123;</span><br><span class="line">                        presets: [ <span class="string">"@babel/preset-env"</span> ],</span><br><span class="line">                        <span class="comment">// é…ç½® babel æ’ä»¶</span></span><br><span class="line">                        plugins: [ </span><br><span class="line">                            [<span class="string">"@babel/plugin-proposal-decorators"</span>, &#123; <span class="string">"legacy"</span>: <span class="literal">true</span> &#125;], </span><br><span class="line">                            <span class="string">"transform-class-properties"</span></span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// é…ç½® map æ–‡ä»¶</span></span><br><span class="line">    devtool: <span class="string">"inline-source-map"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ï¼ˆäº”ï¼‰---è£…é¥°å™¨æ¨¡å¼</title>
      <link href="/2020/02/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%BA%94%EF%BC%89-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/02/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%BA%94%EF%BC%89-%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/124991d344285d28139138d6d1a00a7d.png" alt=""></fancybox></p><p>æ‰‹å†™ä¸€ä¸ªè£…é¥°å™¨æ¨¡å¼ã€‚</p><a id="more"></a><h1 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1. ä»‹ç»"></a>1. ä»‹ç»</h1><p><strong>è£…é¥°å™¨æ¨¡å¼çš„ç›®çš„ï¼š</strong></p><ol><li>ä¸ºå¯¹è±¡æ·»åŠ æ–°åŠŸèƒ½</li><li>ä¸æ”¹å˜å…¶åŸæœ‰çš„ç»“æ„å’ŒåŠŸèƒ½</li></ol><h1 id="2-ä»£ç æ¼”ç¤º"><a href="#2-ä»£ç æ¼”ç¤º" class="headerlink" title="2. ä»£ç æ¼”ç¤º"></a>2. ä»£ç æ¼”ç¤º</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    draw() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ç”»ä¸€ä¸ªåœ†å½¢"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(circle)&#123;</span><br><span class="line">        <span class="keyword">this</span>.circle = circle;</span><br><span class="line">    &#125;</span><br><span class="line">    draw() &#123;</span><br><span class="line">        <span class="keyword">this</span>.circle.draw();</span><br><span class="line">        <span class="keyword">this</span>.setRedBorder(<span class="keyword">this</span>.circle);</span><br><span class="line">    &#125;</span><br><span class="line">    setBorder(circle) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"è®¾ç½®è¾¹æ¡†"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="keyword">let</span> circle = <span class="keyword">new</span> Circle();</span><br><span class="line"><span class="keyword">let</span> dec = <span class="keyword">new</span> Decorator(circle);</span><br><span class="line">dec.setRedBorder();</span><br></pre></td></tr></table></figure><h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h1><p>è£…é¥°å™¨å°æƒ…æ™¯ï¼šæ‰‹æœºåˆç…§ç›¸çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ‰‹æœºæ‘„åƒå¤´å‰è£…é¥°ä¸€ä¸ªæ”¾å¤§é•œï¼Œæ‰‹æœºåœ¨å…·æœ‰ç…§ç›¸çš„åŸºç¡€è¿˜æœ‰æ”¾å¤§çš„åŠŸèƒ½ã€‚</p><p><strong>æœ¬è´¨ï¼š</strong>åœ¨æ‰§è¡ŒçœŸæ­£çš„æ“ä½œå‰åï¼Œå¯ä»¥è¿›è¡Œå…¶ä»–çš„æ“ä½œ</p><h1 id="4-å‚è€ƒææ–™"><a href="#4-å‚è€ƒææ–™" class="headerlink" title="4. å‚è€ƒææ–™"></a>4. å‚è€ƒææ–™</h1><p><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">è£…é¥°è€…æ¨¡å¼</a></p><p><a href="https://www.jianshu.com/p/398f0e8f2699" target="_blank" rel="noopener">JSè®¾è®¡æ¨¡å¼-è£…é¥°å™¨æ¨¡å¼</a></p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ï¼ˆå››ï¼‰---å‘å¸ƒè®¢é˜…æ¨¡å¼</title>
      <link href="/2020/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%9B%9B%EF%BC%89-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/02/09/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%9B%9B%EF%BC%89-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/03749b735b8f8f8ea84314ccbf236dbb.png" alt=""></fancybox></p><p>æˆ‘çœ‹äº†å¾ˆå¤šå…³äºå‘å¸ƒè®¢é˜…æ¨¡å¼ä¸è§‚å¯Ÿè€…æ¨¡å¼çš„æ–‡ç« ï¼Œæœ‰ç‚¹æœ‹å‹è®¤ä¸ºè§‚å¯Ÿè€…æ¨¡å¼å°±æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œæ ¹æ®æˆ‘çœ‹äº†è¿™ä¹ˆå¤šçš„æ–‡ç« çš„æ€»ç»“ï¼Œä»–ä»¬ç¡®å®æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>åœ¨vueä¸­ï¼Œemitå’Œonæ–¹æ³•ã€‚ä»–ä»¬éƒ½ä¼¼ä¹ä¸çº¦è€ŒåŒçš„è‡ªå¸¦äº†å‘å¸ƒè®¢é˜…å±æ€§ä¸€èˆ¬ï¼Œè®©å¼€å‘å˜å¾—æ›´åŠ é«˜æ•ˆå¥½ç”¨èµ·æ¥ã€‚</p><p>ä»Šå¤©å°±å†™ä¸€ä¸ªå‘å¸ƒè®¢é˜…ã€‚</p><a id="more"></a><h1 id="1-æƒ…æ™¯æ¨¡æ‹Ÿï¼š"><a href="#1-æƒ…æ™¯æ¨¡æ‹Ÿï¼š" class="headerlink" title="1. æƒ…æ™¯æ¨¡æ‹Ÿï¼š"></a>1. æƒ…æ™¯æ¨¡æ‹Ÿï¼š</h1><p>å½“æˆ‘ä»¬åœ¨æ³¨å†Œè™æ‰‘çš„æ—¶å€™ï¼Œè½¯ä»¶ä¼šè®©æˆ‘ä»¬é€‰æ‹©æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ¿å—ï¼Œä¾‹å¦‚ï¼šå”±ã€è·³ã€rapã€ç¯®çƒâ€¦..</p><p>å½“æˆ‘ä»¬é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ç‰ˆå—æ—¶ï¼Œæˆ‘ä»¬å°±è®¢é˜…äº†ç›¸å…³æ¿å—çš„æ¶ˆæ¯ã€‚</p><p>å½“æ­¤æ¿å—å†…æœ‰çƒ­é—¨æ¶ˆæ¯æ—¶ï¼Œè™æ‰‘å°±ä¼šç»™æˆ‘ä»¬æ¨é€æ­¤æ¶ˆæ¯ï¼Œä»–ä¸ä¼šæŠŠå…¶ä»–æ¿å—çš„æ¶ˆæ¯æ¨é€ç»™æˆ‘ä»¬ã€‚</p><h1 id="2-åˆ†æï¼š"><a href="#2-åˆ†æï¼š" class="headerlink" title="2. åˆ†æï¼š"></a>2. åˆ†æï¼š</h1><p>æˆ‘ä»¬å¯ä»¥æŠ½è±¡å‡ºä¸‰ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªå‘å¸ƒè€…ï¼Œä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒï¼Œä¸€ä¸ªè®¢é˜…è€…</p><p>å‘å¸ƒè€…ï¼šæˆ‘å°±æ˜¯åœ¨ä¸åŒæ¿å—å‘é€çƒ­é—¨æ¶ˆæ¯çš„</p><p>è°ƒåº¦ä¸­å¿ƒï¼šå­˜ä¸‹æ‰€æœ‰æ¿å—ï¼Œä¸æ¿å—å¯¹åº”çš„è®¢é˜…è€…</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€ä¸ªå‡½æ•°ï¼šæ¥æ”¶æ¶ˆæ¯å¹¶ç»™ç›¸å…³æ¿å—æ‰€æœ‰çš„è®¢é˜…è€…å‘é€æ¶ˆæ¯</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€ä¸ªå‡½æ•°ï¼šç§»é™¤è®¢é˜…è€…</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€ä¸ªå‡½æ•°ï¼šæ·»åŠ è®¢é˜…è€…</p><p>è®¢é˜…è€…ï¼šè‡ªå·±çš„å±æ€§</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€ä¸ªå‡½æ•°ï¼šè®¢é˜…æ¶ˆæ¯</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¸€ä¸ªå‡½æ•°ï¼šå–æ¶ˆè®¢é˜…æ¶ˆæ¯</p><p>ç”»å‡º UML ç±»å›¾å°±æ˜¯æ–‡ç« å‰çš„å›¾ç‰‡ã€‚</p><h1 id="3-ä»£ç å®ç°"><a href="#3-ä»£ç å®ç°" class="headerlink" title="3. ä»£ç å®ç°"></a>3. ä»£ç å®ç°</h1><p><fancybox><img src="https://image.gslb.dawnlab.me/584ee200caf26a8c25c9ec5232c3996b.png" alt=""></fancybox></p><p>çœŸå®ä»£ç æ”¾åœ¨æ–‡ç« æœ«å°¾ã€‚</p><p><strong>ç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/122ac8c8cbcff112954ff8a7cd4063a1.png" alt=""></fancybox></p><h1 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h1><p><strong>ä»€ä¹ˆæ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼š</strong></p><blockquote><p>å‘å¸ƒ-è®¢é˜…æ˜¯ä¸€ç§æ¶ˆæ¯èŒƒå¼ï¼Œæ¶ˆæ¯çš„å‘é€è€…ï¼ˆç§°ä¸ºå‘å¸ƒè€…ï¼‰ä¸ä¼šå°†æ¶ˆæ¯ç›´æ¥å‘é€ç»™ç‰¹å®šçš„æ¥æ”¶è€…ï¼ˆç§°ä¸ºè®¢é˜…è€…ï¼‰ã€‚è€Œæ˜¯å°†å‘å¸ƒçš„æ¶ˆæ¯åˆ†ä¸ºä¸åŒçš„ç±»åˆ«ï¼Œæ— éœ€äº†è§£å“ªäº›è®¢é˜…è€…ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å¯èƒ½å­˜åœ¨ã€‚åŒæ ·çš„ï¼Œè®¢é˜…è€…å¯ä»¥è¡¨è¾¾å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªç±»åˆ«çš„å…´è¶£ï¼Œåªæ¥æ”¶æ„Ÿå…´è¶£çš„æ¶ˆæ¯ï¼Œæ— éœ€äº†è§£å“ªäº›å‘å¸ƒè€…ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å­˜åœ¨ã€‚</p><footer><strong>ç»´åŸºç™¾ç§‘</strong><cite><a href="https://zh.wikipedia.org/wiki/%E5%8F%91%E5%B8%83/%E8%AE%A2%E9%98%85" target="_blank" rel="noopener">zh.wikipedia.org/wiki/%E5%8F%91%E5%B8%83/%E8%AE%A2%E9%98%85</a></cite></footer></blockquote><p><strong>è¯´è¯´æˆ‘çš„ç†è§£ï¼š</strong></p><p>å‘å¸ƒè®¢é˜…æ¨¡å¼å¯ä»¥ç†è§£æˆä¸‰ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯å‘å¸ƒè€…ï¼Œä¸€ä¸ªæ˜¯è®¢é˜…è€…ï¼Œä¸€ä¸ªæ˜¯è°ƒåº¦ä¸­å¿ƒã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒï¼Ÿå› ä¸ºè®¢é˜…è€…çš„è®¢é˜…æ˜¯æœ‰ä¸€å®šè¦æ±‚çš„ï¼Œè€Œä¸æ˜¯æ¥æ”¶æ‰€æœ‰å‘å¸ƒçš„æ¶ˆæ¯ï¼Œ</p><p>æ‰€ä»¥è°ƒåº¦ä¸­å¿ƒå°±æ˜¯å°†æ¶ˆæ¯åˆ†åˆ«å‘é€ç»™è®¢é˜…è€…ã€‚è®¢é˜…è€…ä¸ä¼šæ¥æ”¶åˆ°æ²¡æœ‰è®¢é˜…çš„æ¶ˆæ¯ã€‚</p><p><strong>è§‚å¯Ÿè€…æ¨¡å¼ï¼š</strong></p><p>è§‚å¯Ÿè€…åªæœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªè§‚å¯Ÿè€…ã€ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œè¢«è§‚å¯Ÿè€…åªè¦ä½œå‡ºå˜åŒ–ï¼ˆä¸è®ºä»€ä¹ˆå˜åŒ–ï¼‰ï¼Œæ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½ä¼šæ¥å—åˆ°æ¶ˆæ¯ã€‚</p><h1 id="5-å‚è€ƒææ–™"><a href="#5-å‚è€ƒææ–™" class="headerlink" title="5. å‚è€ƒææ–™"></a>5. å‚è€ƒææ–™</h1><p><a href="https://juejin.im/post/5b125ad3e51d450688133f22#heading-1" target="_blank" rel="noopener">å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œåœ¨å·¥ä½œä¸­å®ƒçš„èƒ½é‡è¶…ä¹ä½ çš„æƒ³è±¡</a></p><p><a href="https://juejin.im/post/5bb1bb616fb9a05d2b6dccfa" target="_blank" rel="noopener">è°ˆè°ˆè§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼</a></p><p><a href="https://blog.csdn.net/a469516684/article/details/86082844" target="_blank" rel="noopener">EventBusâ€”æ€è€ƒè§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒè®¢é˜…è€…æ¨¡å¼</a></p><p><a href="https://juejin.im/post/5b2e65fee51d4558df370532" target="_blank" rel="noopener">JavaScriptä¸­å‘å¸ƒ/è®¢é˜…æ¨¡å¼çš„ç†è§£</a></p><h1 id="6-ä»£ç ï¼š"><a href="#6-ä»£ç ï¼š" class="headerlink" title="6. ä»£ç ï¼š"></a>6. ä»£ç ï¼š</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å¸ƒè€…   ä¼ å…¥è°ƒåº¦ä¸­å¿ƒå®ä¾‹</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Publisher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>( dispatch )&#123;</span><br><span class="line">        <span class="keyword">this</span>.dispatch = dispatch</span><br><span class="line">    &#125;</span><br><span class="line">    publish()&#123;</span><br><span class="line">        <span class="keyword">let</span> arg = <span class="built_in">Array</span>.from( <span class="built_in">arguments</span> )</span><br><span class="line">        <span class="keyword">let</span> event = arg.shift()</span><br><span class="line">        <span class="keyword">this</span>.dispatch.emit( event, arg )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒåº¦ä¸­å¿ƒ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dispatcher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.eventObj = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    on( event, fn )&#123;</span><br><span class="line">        <span class="keyword">if</span>( !<span class="keyword">this</span>.eventObj[event] )&#123;</span><br><span class="line">            <span class="keyword">this</span>.eventObj[event] = []</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.eventObj[event].push( fn )</span><br><span class="line">    &#125;</span><br><span class="line">    emit( type, arg )&#123;</span><br><span class="line">        <span class="keyword">let</span> funs = <span class="keyword">this</span>.eventObj[type]</span><br><span class="line">        <span class="keyword">if</span>( !funs || funs.length === <span class="number">0</span> )&#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        funs.forEach( <span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.apply( <span class="keyword">this</span>, arg )</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    remove( type, fn )&#123;</span><br><span class="line">        <span class="keyword">let</span> fns = <span class="keyword">this</span>.eventObj[ type ]</span><br><span class="line">        <span class="keyword">if</span>( !fns ) <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span>( !fn )&#123;</span><br><span class="line">            <span class="keyword">delete</span> <span class="keyword">this</span>.eventObj[type]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.eventObj[ type ] = fns.filter( <span class="function"><span class="params">item</span> =&gt;</span> item !== fn )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è®¢é˜…è€…ç±»   ä¼ å…¥ dispatch å’Œ è‡ªå·±çš„å±æ€§</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subscriber</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>( dispatch, name )&#123;</span><br><span class="line">        <span class="keyword">this</span>.dispatch = dispatch</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    fn = <span class="function">(<span class="params"> msg </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`æˆ‘æ˜¯<span class="subst">$&#123; <span class="keyword">this</span>.name &#125;</span>:`</span> ,<span class="string">"æ”¶åˆ°è®¢é˜…çš„æ¶ˆæ¯ï¼š"</span>, msg )</span><br><span class="line">    &#125;</span><br><span class="line">    subscrib( type, fn )&#123;</span><br><span class="line">        <span class="keyword">this</span>.dispatch.on( type, fn, <span class="keyword">this</span> )</span><br><span class="line">    &#125;</span><br><span class="line">    removeSubscrib( type, fn )&#123;</span><br><span class="line">        <span class="keyword">this</span>.dispatch.remove( type, fn )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> dispatch = <span class="keyword">new</span> Dispatcher()</span><br><span class="line"><span class="keyword">let</span> pub = <span class="keyword">new</span> Publisher( dispatch )</span><br><span class="line"><span class="keyword">let</span> sub1 = <span class="keyword">new</span> Subscriber( dispatch, <span class="string">"sub1"</span> )</span><br><span class="line"><span class="keyword">let</span> sub2 = <span class="keyword">new</span> Subscriber( dispatch, <span class="string">"sub2"</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…æ¶ˆæ¯</span></span><br><span class="line">sub1.subscrib( <span class="string">"ç¯®çƒ"</span>, sub1.fn )</span><br><span class="line">sub2.subscrib( <span class="string">"ç¯®çƒ"</span>, sub2.fn )</span><br><span class="line">sub2.subscrib( <span class="string">"è¶³çƒ"</span>, sub2.fn )</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘å¸ƒæ¶ˆæ¯</span></span><br><span class="line">pub.publish( <span class="string">"ç¯®çƒ"</span>, <span class="string">"ä¹”ä¸¹å»ä¸–äº†---"</span> )</span><br><span class="line">pub.publish( <span class="string">"è¶³çƒ"</span>, <span class="string">"å›½è¶³èƒ½è¿›ä¸–ç•Œæ¯å—ï¼Ÿï¼Ÿ"</span> )</span><br><span class="line"><span class="comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="line">sub1.removeSubscrib( <span class="string">"ç¯®çƒ"</span>, sub1.fn )</span><br><span class="line">pub.publish( <span class="string">"ç¯®çƒ"</span>, <span class="string">"è¿™é‡Œæœ‰ä¸€äº›NBAç›¸å…³çš„ä¿¡æ¯"</span> )</span><br></pre></td></tr></table></figure><h2 id="é€šç”¨ä»£ç ï¼š"><a href="#é€šç”¨ä»£ç ï¼š" class="headerlink" title="é€šç”¨ä»£ç ï¼š"></a>é€šç”¨ä»£ç ï¼š</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> event = &#123;</span><br><span class="line">    list: &#123;&#125;,</span><br><span class="line">    on(key, fn) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.list[key]) &#123;</span><br><span class="line">            <span class="keyword">this</span>.list[key] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.list[key].push(fn);</span><br><span class="line">    &#125;,</span><br><span class="line">    emit() &#123;</span><br><span class="line">        <span class="keyword">let</span> key = [].shift.call(<span class="built_in">arguments</span>),</span><br><span class="line">            fns = <span class="keyword">this</span>.list[key];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!fns || fns.length === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        fns.forEach(<span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">            fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    remove(key, fn) &#123;</span><br><span class="line">        <span class="comment">// è¿™å›æˆ‘ä»¬åŠ å…¥äº†å–æ¶ˆè®¢é˜…çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">let</span> fns = <span class="keyword">this</span>.list[key];</span><br><span class="line">        <span class="comment">// å¦‚æœç¼“å­˜åˆ—è¡¨ä¸­æ²¡æœ‰å‡½æ•°ï¼Œè¿”å›false</span></span><br><span class="line">        <span class="keyword">if</span> (!fns) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰ä¼ å¯¹åº”å‡½æ•°çš„è¯</span></span><br><span class="line">        <span class="comment">// å°±ä¼šå°†keyå€¼å¯¹åº”ç¼“å­˜åˆ—è¡¨ä¸­çš„å‡½æ•°éƒ½æ¸…ç©ºæ‰</span></span><br><span class="line">        <span class="keyword">if</span> (!fn) &#123;</span><br><span class="line">            fns &amp;&amp; (fns.length = <span class="number">0</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// éå†ç¼“å­˜åˆ—è¡¨ï¼Œçœ‹çœ‹ä¼ å…¥çš„fnä¸å“ªä¸ªå‡½æ•°ç›¸åŒ</span></span><br><span class="line">            <span class="comment">// å¦‚æœç›¸åŒå°±ç›´æ¥ä»ç¼“å­˜åˆ—è¡¨ä¸­åˆ æ‰å³å¯</span></span><br><span class="line">            fns.forEach(<span class="function">(<span class="params">cb, i</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (cb === fn) &#123;</span><br><span class="line">                    fns.splice(i, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cat</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¸€èµ·å–µå–µå–µ'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dog</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ä¸€èµ·æ—ºæ—ºæ—º'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">event.on(<span class="string">'pet'</span>, data =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ¥æ”¶æ•°æ®'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line">event.on(<span class="string">'pet'</span>, cat);</span><br><span class="line">event.on(<span class="string">'pet'</span>, dog);</span><br><span class="line"><span class="comment">// å–æ¶ˆdogæ–¹æ³•çš„è®¢é˜…</span></span><br><span class="line">event.remove(<span class="string">'pet'</span>, dog);</span><br><span class="line"><span class="comment">// å‘å¸ƒ</span></span><br><span class="line">event.emit(<span class="string">'pet'</span>, [<span class="string">'äºŒå“ˆ'</span>, <span class="string">'æ³¢æ–¯çŒ«'</span>]);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ¥æ”¶æ•°æ®</span></span><br><span class="line"><span class="comment">    [ 'äºŒå“ˆ', 'æ³¢æ–¯çŒ«' ]</span></span><br><span class="line"><span class="comment">    ä¸€èµ·å–µå–µå–µ</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>æ‘˜è‡ªï¼š</strong></p><p><strong><a href="https://juejin.im/post/5b125ad3e51d450688133f22#heading-4" target="_blank" rel="noopener">å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œåœ¨å·¥ä½œä¸­å®ƒçš„èƒ½é‡è¶…ä¹ä½ çš„æƒ³è±¡</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ï¼ˆä¸‰ï¼‰--ä»£ç†æ¨¡å¼</title>
      <link href="/2020/02/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%89%EF%BC%89-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/02/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%89%EF%BC%89-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/8151655788e5ad17587fdc36a060bfb2.png" alt=""></fancybox></p><p>å†™ä¸€ä¸ªä»£ç†æ¨¡å¼.</p><a id="more"></a><h1 id="1-æƒ…æ™¯"><a href="#1-æƒ…æ™¯" class="headerlink" title="1. æƒ…æ™¯"></a>1. æƒ…æ™¯</h1><p>æƒ…æ™¯: å°æ˜è¿½å¥³ç”Ÿ A</p><ul><li>éä»£ç†æ¨¡å¼: å°æ˜ =èŠ±=&gt; å¥³ç”ŸA</li><li>ä»£ç†æ¨¡å¼: å°æ˜ =èŠ±=&gt; è®©å¥³ç”ŸAçš„å¥½å‹Bå¸®å¿™ =èŠ±=&gt; å¥³ç”ŸA</li></ul><h1 id="2-ä»£ç†æ¨¡å¼çš„ç‰¹ç‚¹"><a href="#2-ä»£ç†æ¨¡å¼çš„ç‰¹ç‚¹" class="headerlink" title="2. ä»£ç†æ¨¡å¼çš„ç‰¹ç‚¹"></a>2. ä»£ç†æ¨¡å¼çš„ç‰¹ç‚¹</h1><ul><li>ä»£ç†å¯¹è±¡å’Œæœ¬ä½“å¯¹è±¡å…·æœ‰ä¸€è‡´çš„æ¥å£, å¯¹ä½¿ç”¨è€…å‹å¥½</li></ul><blockquote><p>å¸¸ç”¨çš„è™šæ‹Ÿä»£ç†å½¢å¼ï¼šæŸä¸€ä¸ªèŠ±é”€å¾ˆå¤§çš„æ“ä½œï¼Œå¯ä»¥é€šè¿‡è™šæ‹Ÿä»£ç†çš„æ–¹å¼å»¶è¿Ÿåˆ°è¿™ç§éœ€è¦å®ƒçš„æ—¶å€™æ‰å»åˆ›å»ºï¼ˆä¾‹ï¼šä½¿ç”¨è™šæ‹Ÿä»£ç†å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼‰<br>å›¾ç‰‡æ‡’åŠ è½½çš„æ–¹å¼ï¼šå…ˆé€šè¿‡ä¸€å¼ loadingå›¾å ä½ï¼Œç„¶åé€šè¿‡å¼‚æ­¥çš„æ–¹å¼åŠ è½½å›¾ç‰‡ï¼Œç­‰å›¾ç‰‡åŠ è½½å¥½äº†å†æŠŠå®Œæˆçš„å›¾ç‰‡åŠ è½½åˆ°imgæ ‡ç­¾é‡Œé¢ã€‚</p><footer><strong>è€ƒæ‹‰æµ·è´­å‰ç«¯å›¢é˜Ÿ</strong><cite><a href="https://juejin.im/post/59df4f74f265da430f311909" target="_blank" rel="noopener">juejin.im/post/59df4f74f265da430f311909</a></cite></footer></blockquote><h1 id="3-ä»£ç è®¾è®¡"><a href="#3-ä»£ç è®¾è®¡" class="headerlink" title="3. ä»£ç è®¾è®¡"></a>3. ä»£ç è®¾è®¡</h1><p><fancybox><img src="https://image.gslb.dawnlab.me/1477504b420fce64b3cd68ebed8e9c00.png" alt=""></fancybox></p><h1 id="4-es6-ä»£ç†æ¨¡å¼-â€”-Proxy"><a href="#4-es6-ä»£ç†æ¨¡å¼-â€”-Proxy" class="headerlink" title="4. es6 ä»£ç†æ¨¡å¼ â€”- Proxy"></a>4. es6 ä»£ç†æ¨¡å¼ â€”- Proxy</h1><p><strong>ç›®çš„ï¼šåœ¨æ“ä½œå‰å¯ä»¥è¿›è¡Œå…¶ä»–çš„æ“ä½œï¼ˆå¯¹æ•°æ®åŠ å·¥ç­‰ï¼‰ã€‚</strong></p><p><strong>ä»£ç è®¾è®¡</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/017a9c46002a617e370af1ffc6a158ec.png" alt=""></fancybox></p><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/60e895dd1bc44e25965c0350cd5a0efe.png" alt=""></fancybox></p><p>æ¡ˆä¾‹å‚è€ƒï¼š</p><ul><li><a href="https://juejin.im/post/5a5227ce6fb9a01c927e85c4" target="_blank" rel="noopener">ES6ä¸­çš„ä»£ç†æ¨¡å¼â€”â€“Proxy</a></li><li><a href="http://es6.ruanyifeng.com/#docs/proxy" target="_blank" rel="noopener">é˜®ä¸€å³°â€“ es6 å…¥é—¨</a></li></ul><h1 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h1><p>ä»£ç†æ¨¡å¼ï¼Œæ€»çš„æ¥è¯´ï¼Œæ˜¯åœ¨æ“ä½œå‰ï¼Œå¯ä»¥è¿›è¡Œå…¶ä»–çš„æ“ä½œã€‚</p><h1 id="5-å‚è€ƒææ–™"><a href="#5-å‚è€ƒææ–™" class="headerlink" title="5. å‚è€ƒææ–™"></a>5. å‚è€ƒææ–™</h1><p><a href="https://github.com/MuYunyun/blog/blob/master/BasicSkill/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.md" target="_blank" rel="noopener">BasicSkillâ€“ä»£ç†æ¨¡å¼</a></p><p><a href="https://juejin.im/post/59df4f74f265da430f311909#heading-2" target="_blank" rel="noopener">JavaScriptè®¾è®¡æ¨¡å¼</a></p><p><a href="https://www.cnblogs.com/mn6364/p/10990874.html" target="_blank" rel="noopener">js â€“ä»£ç†æ¨¡å¼</a></p><h1 id="6-ä»£ç "><a href="#6-ä»£ç " class="headerlink" title="6. ä»£ç "></a>6. ä»£ç </h1><figure class="highlight js"><figcaption><span>å›¾ç‰‡æ‡’åŠ è½½</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çœŸå®çš„å¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealImg</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.imgNode = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>)</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild( <span class="keyword">this</span>.imgNode )</span><br><span class="line">    &#125;</span><br><span class="line">    setSrc( src )&#123;</span><br><span class="line">        <span class="keyword">this</span>.imgNode.src = src</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyImg</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.realImg = <span class="keyword">new</span> RealImg()</span><br><span class="line">    &#125;</span><br><span class="line">    setSrc( src )&#123;</span><br><span class="line">        <span class="keyword">this</span>.realImg.setSrc(<span class="string">"http://seopic.699pic.com/photo/40007/8839.jpg_wh1200.jpg"</span>)</span><br><span class="line">        <span class="keyword">let</span> img = <span class="keyword">new</span> Image()</span><br><span class="line">        img.src = src</span><br><span class="line">        img.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.realImg.setSrc( src )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> proxyImg = <span class="keyword">new</span> ProxyImg()</span><br><span class="line">proxyImg.setSrc( <span class="string">"http://seopic.699pic.com/photo/40006/7735.jpg_wh1200.jpg"</span> )</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ï¼ˆäºŒï¼‰--è§‚å¯Ÿè€…æ¨¡å¼</title>
      <link href="/2020/02/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%BA%8C%EF%BC%89-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/02/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%BA%8C%EF%BC%89-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/97ffbb5c36692b1f63a62b517db84ff8.png" alt=""></fancybox></p><p>å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ã€‚</p><a id="more"></a><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p><strong>æ„å›¾ï¼š</strong> å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜ç»™å…¶ä»–å¯¹è±¡é€šçŸ¥çš„é—®é¢˜ï¼Œè€Œä¸”è¦è€ƒè™‘åˆ°æ˜“ç”¨å’Œä½è€¦åˆï¼Œä¿è¯é«˜åº¦çš„åä½œã€‚</p><p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> ä¸€ä¸ªå¯¹è±¡ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…å¯¹è±¡ï¼‰éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè¿›è¡Œå¹¿æ’­é€šçŸ¥ã€‚</p><p><strong>å…³é”®ä»£ç ï¼š</strong> åœ¨æŠ½è±¡ç±»é‡Œæœ‰ä¸€ä¸ª ArrayList&lt;\Observer&gt; å­˜æ”¾è§‚å¯Ÿè€…ä»¬ã€‚</p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><figure class="highlight js"><figcaption><span>è§‚å¯Ÿè€…æ¨¡å¼</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§‚å¯Ÿè€…æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * state çŠ¶æ€</span></span><br><span class="line"><span class="comment"> * observers &#123; Observer &#125;  ä¿å­˜æ‰€æœ‰çš„è§‚å¯Ÿè€…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.state = <span class="number">0</span></span><br><span class="line">        <span class="keyword">this</span>.observers = []</span><br><span class="line">    &#125;</span><br><span class="line">    getState()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.state</span><br><span class="line">    &#125;</span><br><span class="line">    setState( state )&#123;</span><br><span class="line">        <span class="keyword">this</span>.state = state</span><br><span class="line">        <span class="keyword">this</span>.notifyAllObservers()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…</span></span><br><span class="line">    notifyAllObservers()&#123;</span><br><span class="line">        <span class="keyword">this</span>.observers.forEach( <span class="function"><span class="params">observer</span> =&gt;</span> &#123;</span><br><span class="line">            observer.update()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ è§‚å¯Ÿè€…</span></span><br><span class="line">    attach( observer )&#123;</span><br><span class="line">        <span class="keyword">this</span>.observers.push( observer )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§‚å¯Ÿè€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>( name, subject )&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">        <span class="keyword">this</span>.subject = subject</span><br><span class="line">        <span class="keyword">this</span>.subject.attach( <span class="keyword">this</span> )</span><br><span class="line">    &#125;</span><br><span class="line">    update()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123; <span class="keyword">this</span>.name &#125;</span> -- update, state: <span class="subst">$&#123; <span class="keyword">this</span>.subject.getState() &#125;</span>`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•</span></span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> Subject()</span><br><span class="line"><span class="keyword">let</span> o1 = <span class="keyword">new</span> Observer( <span class="string">"o1"</span>, s )</span><br><span class="line"><span class="keyword">let</span> o2 = <span class="keyword">new</span> Observer( <span class="string">"o2"</span>, s )</span><br><span class="line"></span><br><span class="line">s.setState( <span class="number">11</span> )</span><br><span class="line">s.setState( <span class="number">12</span> )</span><br><span class="line"><span class="built_in">console</span>.log( s )</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/a7763467be0e62af3e014f19169dbf1c.png" alt=""></fancybox></p><h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><p>è§‚å¯Ÿè€…æ¨¡å¼çš„è¦ç‚¹ä¸»è¦æ˜¯å°†è§‚å¯Ÿè€…æ”¾åœ¨è¢«è§‚å¯Ÿè€…é‡Œé¢ï¼Œå½“çŠ¶æ€å˜åŒ–åï¼Œå°±ä¾æ¬¡é€šçŸ¥è§‚å¯Ÿè€…ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://juejin.im/post/5cb534386fb9a0685727e1eb#heading-72" target="_blank" rel="noopener">è¶…å…¨çš„è®¾è®¡æ¨¡å¼ç®€ä»‹ï¼ˆ45ç§ï¼‰â€”è§‚å¯Ÿè€…æ¨¡å¼</a></p><p><a href="https://juejin.im/post/5afe6430518825428630bc4d" target="_blank" rel="noopener">JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼æ•´ç†</a></p><p><a href="https://juejin.im/post/5bb1bb616fb9a05d2b6dccfa" target="_blank" rel="noopener">è°ˆè°ˆè§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼</a></p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰--å•ä¾‹æ¨¡å¼</title>
      <link href="/2020/02/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2020/02/08/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%80%EF%BC%89-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/b9bb7ddf819be28cee3cbe3dfb440e9a.png" alt=""></fancybox></p><p>å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼ã€‚</p><a id="more"></a><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><p>ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä½¿æ¯æ¬¡è·å–çš„å®ä¾‹éƒ½æ˜¯åŒä¸€ä¸ªã€‚</p><h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>( name )&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">    getName()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">    setName( data )&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = data</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–å•ä¾‹çš„æ–¹æ³•   ---   ä½¿ç”¨é—­åŒ…è·å–å•ä¾‹</span></span><br><span class="line">Store.getInstance = (</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> instance</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"> name </span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>( !instance )&#123;</span><br><span class="line">                instance = <span class="keyword">new</span> Store( name )</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> instance</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store1 = Store.getInstance( <span class="string">"ä½ å¥½"</span> )</span><br><span class="line"><span class="keyword">let</span> store2 = Store.getInstance( <span class="string">"ä½ å¥½----"</span> )</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( store1 )</span><br><span class="line"><span class="built_in">console</span>.log( store2 )</span><br><span class="line"><span class="built_in">console</span>.log( store1 === store2 )</span><br></pre></td></tr></table></figure><h1 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h1><p><fancybox><img src="https://image.gslb.dawnlab.me/a3f69ad1bf9019e1d04d1d15b54eea25.png" alt=""></fancybox></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å•ä¾‹æ¨¡å¼è¿ç”¨éå¸¸å¹¿æ³›ï¼Œåªè¦åœ¨ä»£ç ä¸­æ¶‰åŠåˆ°åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œå°±å¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œ</p><p>vuex å’Œ redux å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æ„å»ºã€‚</p><p><strong>å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„è¦ç‚¹ï¼š</strong></p><ol><li>ä½¿ç”¨ä¸€ä¸ªç‰¹å®šå‡½æ•°æ¥è·å–å•ä¾‹ï¼Œ</li><li>æ­¤å‡½æ•°ä½¿ç”¨é—­åŒ…æ¥ç¡®ä¿ä½†ä¼šå•ä¾‹æ˜¯å”¯ä¸€çš„ï¼Œ</li><li>ä½¿ç”¨å‡½æ•°æŸ¯ç†åŒ–â€“æ¥æ”¶ä¼ å…¥å‚æ•°</li></ol><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://juejin.im/post/59df4f74f265da430f311909" target="_blank" rel="noopener">JavaScriptè®¾è®¡æ¨¡å¼</a></p><p><a href="https://juejin.im/post/5e021eb96fb9a01628014095#heading-0" target="_blank" rel="noopener">JavaScriptè®¾è®¡æ¨¡å¼es6ï¼ˆ23ç§)</a></p><p><a href="https://juejin.im/post/5afe6430518825428630bc4d" target="_blank" rel="noopener">JavaScript ä¸­å¸¸è§è®¾è®¡æ¨¡å¼æ•´ç†</a></p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>javascriptä¹‹é˜²æŠ–ä¸èŠ‚æµ</title>
      <link href="/2020/02/07/javascript%E4%B9%8B%E8%8A%82%E6%B5%81%E4%B8%8E%E9%98%B2%E6%8A%96/"/>
      <url>/2020/02/07/javascript%E4%B9%8B%E8%8A%82%E6%B5%81%E4%B8%8E%E9%98%B2%E6%8A%96/</url>
      
        <content type="html"><![CDATA[<p>å†™ä¸€ä¸ªé˜²æŠ–ä¸èŠ‚æµã€‚</p><a id="more"></a><h1 id="1-é˜²æŠ–"><a href="#1-é˜²æŠ–" class="headerlink" title="1. é˜²æŠ–"></a>1. é˜²æŠ–</h1><p><strong>ä»€ä¹ˆæ˜¯é˜²æŠ–ï¼š</strong></p><p>å½“ä¸€ä¸ªäº‹ä»¶è§¦å‘åï¼Œåœ¨ n ç§’åæ‰æ‰§è¡Œç›¸å…³å‡½æ•°ï¼Œå¦‚æœåœ¨ n ç§’å†…å†æ¬¡è§¦å‘äº‹ä»¶ï¼Œåˆ™åœ¨æ–°äº‹ä»¶ n ç§’åæ‰æ‰§è¡Œç›¸å…³å‡½æ•°ã€‚</p><p><strong>å‡½æ•°åŠŸèƒ½è®¾è®¡ä¸å®ç°åŸç†ï¼š</strong></p><p>ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªä¼ å®šä¹‰æ‰§è¡Œå‡½æ•°ã€é—´éš”æ—¶é—´ã€æ˜¯å¦ç«‹å³æ‰§è¡Œæ¥ä¼ å…¥å¯¹åº”çš„å‚æ•°ã€‚</p><p>ä½¿ç”¨é—­åŒ…å‡½æ•°ï¼Œè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ä½œä¸ºæ ‡å¿—æ”¾åœ¨é—­åŒ…å†…ï¼Œä½¿ç”¨å‡½æ•°æŸ¯ç†åŒ–æ¥æ”¶ä¼ å…¥å‚æ•°ã€‚</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é˜²æŠ–å‡½æ•°</span></span><br><span class="line"><span class="comment"> * @param fn å›è°ƒå‡½æ•° </span></span><br><span class="line"><span class="comment"> * @param time  é—´éš”æ—¶é—´ type number</span></span><br><span class="line"><span class="comment"> * @param immediate  ç«‹åˆ»æ‰§è¡Œ type boolean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params"> fn, time, immediate = false </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeount</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( timeount )&#123; clearTimeout( timeount ) &#125;</span><br><span class="line">        <span class="keyword">if</span>( immediate &amp;&amp; !timeount )&#123; fn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> ) &#125;</span><br><span class="line"></span><br><span class="line">        timeount = setTimeout( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// æ­¤å¤„è¿ç”¨å‡½æ•°æŸ¯ç†åŒ– arguments ä¸ºè°ƒç”¨å‡½æ•°æ—¶çš„å‚æ•°</span></span><br><span class="line">            fn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> )</span><br><span class="line">            <span class="comment">// æ­¤å¤„æ”¾å¼€æ³¨é‡Š-ä¼šè®©æ¯ä¸€æ¬¡æ‰§è¡Œå®Œåï¼Œç¬¬ä¸€æ¬¡éƒ½ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">            <span class="comment">// timeount = null</span></span><br><span class="line">        &#125;, time || <span class="number">500</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ï¼š</strong></p><figure class="highlight js"><figcaption><span>è‡ªå»ºhtmlæ–‡ä»¶æµ‹è¯•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params"> e </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( e )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.addEventListener( <span class="string">"mousemove"</span>, debounce( go, <span class="number">500</span>, <span class="literal">false</span> ) )</span><br><span class="line"><span class="comment">// è‡ªä¼ å‚æ•°</span></span><br><span class="line">debounce( go, <span class="number">500</span>, <span class="literal">false</span> )( <span class="string">"æˆ‘æ˜¯è‡ªå·±ä¼ è¿›å»çš„å‚æ•°--"</span> )</span><br></pre></td></tr></table></figure><h1 id="2-èŠ‚æµ"><a href="#2-èŠ‚æµ" class="headerlink" title="2. èŠ‚æµ"></a>2. èŠ‚æµ</h1><p><strong>ä»€ä¹ˆæ˜¯èŠ‚æµï¼š</strong></p><p>èŠ‚æµï¼Œå°±æ˜¯æŒ‡è¿ç»­è§¦å‘äº‹ä»¶ä½†æ˜¯åœ¨ n ç§’ä¸­åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚ èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ã€‚</p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * èŠ‚æµå‡½æ•°</span></span><br><span class="line"><span class="comment"> * @param fn å›è°ƒå‡½æ•° </span></span><br><span class="line"><span class="comment"> * @param time  é—´éš”æ—¶é—´ type number</span></span><br><span class="line"><span class="comment"> * @param immediate  ç«‹åˆ»æ‰§è¡Œ type boolean</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params"> fn, time, immediate = false </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeount</span><br><span class="line">    <span class="keyword">let</span> isFrist = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( immediate &amp;&amp; isFrist )&#123;</span><br><span class="line">            fn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> )</span><br><span class="line">            isFrist = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( !timeount )&#123;</span><br><span class="line">            timeount = setTimeout( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                fn.apply( <span class="keyword">this</span>, <span class="built_in">arguments</span> )</span><br><span class="line">                timeount = <span class="literal">null</span></span><br><span class="line">            &#125;, time || <span class="number">500</span> )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ï¼š</strong></p><figure class="highlight js"><figcaption><span>è‡ªå»ºhtmlæ–‡ä»¶æµ‹è¯•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">go</span>(<span class="params"> e </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( e )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.addEventListener( <span class="string">"mousemove"</span>, throttle( go, <span class="number">500</span>, <span class="literal">true</span> ) )</span><br><span class="line"><span class="comment">// è‡ªä¼ å‚æ•°</span></span><br><span class="line">throttle( go, <span class="number">500</span>, <span class="literal">false</span> )( <span class="string">"æˆ‘æ˜¯è‡ªå·±ä¼ è¿›å»çš„å‚æ•°--"</span> )</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><p>é˜²æŠ–å’ŒèŠ‚æµåœ¨ä»£ç ä¸­è¢«ä½¿ç”¨çš„é¢‘ç‡è¿˜æ˜¯è›®å¤§çš„ï¼Œ</p><p>å‡½æ•°çš„ç¼–å†™æœ‰å€Ÿé‰´ï¼Œä¹Ÿæœ‰è‡ªå·±çš„æ€è€ƒï¼Œæ„Ÿè§‰è‡ªå·±æ€è€ƒè¿‡åï¼Œæ‰ä¼šå¯¹å‡½æ•°æœ‰æ›´æ·±çš„ç†è§£ã€‚</p><p>é˜²æŠ–å¯ä»¥è¿ç”¨åœ¨ï¼š</p><ol><li>window çš„ resizeã€scroll</li><li>mousedownã€mousemove</li><li>keyupã€keydown</li><li>æœç´¢è‡ªåŠ¨å¼¹å‡º æœç´¢è”æƒ³</li></ol><p><strong>é˜²æŠ–å‡½æ•°è¦ç‚¹ï¼š</strong> </p><ol><li>æ¯ä¸€æ¬¡è§¦å‘äº‹ä»¶ï¼Œéƒ½è¦æ¸…é™¤å®šæ—¶å™¨ï¼Œå¹¶é‡ç½® timeout å®šæ—¶å™¨ã€‚</li></ol><p><strong>èŠ‚æµå‡½æ•°è¦ç‚¹ï¼š</strong></p><ol><li>æ¯æ¬¡æ‰§è¡Œå®Œå‡½æ•°åï¼Œéƒ½è¦æŠŠæ ‡å¿—ç½®ä¸ºnull</li></ol><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="http://www.wclimb.site/2018/06/12/JavaScript%E4%B9%8B%E8%8A%82%E6%B5%81%E4%B8%8E%E9%98%B2%E6%8A%96/" target="_blank" rel="noopener">wclimbâ€“JavaScriptä¹‹èŠ‚æµä¸é˜²æŠ–</a></p><p><a href="https://juejin.im/post/5b651dc15188251aa30c8669#heading-1" target="_blank" rel="noopener">å‡½æ•°é˜²æŠ–å’ŒèŠ‚æµ</a></p><p><a href="https://github.com/mqyqingfeng/Blog/issues/26" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹è·Ÿç€ underscore å­¦èŠ‚æµ</a></p><p><a href="https://github.com/mqyqingfeng/Blog/issues/22" target="_blank" rel="noopener">JavaScriptä¸“é¢˜ä¹‹è·Ÿç€underscoreå­¦é˜²æŠ–</a></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javascriptä¹‹ç»§æ‰¿</title>
      <link href="/2020/02/06/javascript%E4%B9%8B%E7%BB%A7%E6%89%BF/"/>
      <url>/2020/02/06/javascript%E4%B9%8B%E7%BB%A7%E6%89%BF/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ es6 ä¹‹å‰ï¼ŒjavaScript ä¸èƒ½ä½¿ç”¨ extends æ¥æ˜¾å¼ç»§æ‰¿çš„ï¼Œæ‰€ä»¥ï¼Œç»§æ‰¿éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨å®Œæˆã€‚</p><p>é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ js ä¸­çš„å„ç§ç»§æ‰¿æ–¹å¼å§ã€‚</p><a id="more"></a><h1 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h1><p><strong>åŸå‹é“¾</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/627d52b1dd9158ac087c6926fa640060.png" alt=""></fancybox></p><p>æˆ‘ä»¬éœ€è¦äº†è§£åŸå‹å’ŒåŸå‹é“¾ï¼Œéœ€è¦çŸ¥é“æ„é€ å‡½æ•°ä¸åŸå‹å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œ<strong>éœ€è¦çŸ¥é“åŸå‹å¯¹è±¡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæœ‰ä¸ªå±æ€§ constructor å°±æ˜¯æ„é€ å‡½æ•°</strong></p><p><strong>Object.creact() æ–¹æ³•</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/b4f1756d75bcc34f54a294483a66dc4b.png" alt=""></fancybox></p><p>ä¼ å…¥åŸå‹å¯¹è±¡ï¼Œè¿”å›åŸå‹å¯¹è±¡å’Œå±æ€§ã€‚</p><h1 id="1-åŸå‹é“¾ç»§æ‰¿"><a href="#1-åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="1. åŸå‹é“¾ç»§æ‰¿"></a>1. åŸå‹é“¾ç»§æ‰¿</h1><p><strong>åŸç†è¯´æ˜ï¼š</strong></p><p>å°±æ˜¯å°†å·²ç» new å‡ºæ¥çš„å¯¹è±¡å®ä¾‹çš„ prototype å˜æˆçˆ¶å¯¹è±¡ï¼Œä»è€Œï¼ŒæŠŠçˆ¶å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•éƒ½ç»§æ‰¿åˆ°äº†å½“å‰å¯¹è±¡çš„ prototype ä¸Šï¼Œå½“å‰å¯¹è±¡çš„å®ä¾‹æœ¬èº«æ²¡æœ‰çˆ¶å¯¹è±¡çš„å±æ€§ä¸æ–¹æ³•ï¼Œå½“è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶ï¼Œä»–ä¼šè‡ªåŠ¨åˆ°æ­¤å¯¹è±¡çš„ prototype ä¸Šä¾æ¬¡å»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ° null ä¸ºæ­¢ï¼Œè¿™å°±ç§°ä¸ºåŸå‹é“¾ç»§æ‰¿ã€‚</p><p><strong>å®ç°</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"> name=<span class="string">"tan"</span>, age=<span class="number">18</span> </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    <span class="keyword">this</span>.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123; <span class="keyword">this</span>.name &#125;</span> can run...`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"> id = <span class="number">12</span> </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id</span><br><span class="line">    <span class="keyword">this</span>.study = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;name&#125;</span> can study...`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¿®æ”¹åŸå‹å¯¹è±¡ï¼Œå¹¶æ”¹å›æ„é€ å‡½æ•°</span></span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person()</span><br><span class="line">Student.prototype.constuctor = Student</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> S = <span class="keyword">new</span> Student( <span class="number">12</span> )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"å®ä¾‹Sï¼š"</span>, S )</span><br><span class="line">S.run()</span><br><span class="line"><span class="built_in">console</span>.log( S <span class="keyword">instanceof</span> Student )</span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/5b77c39e7e80254643a77e540c08d2bc.png" alt=""></fancybox></p><p><strong>1.1 æ€»ç»“ï¼š</strong></p><p>ç”±ä¸Šé¢çš„ä¾‹å­å¯è§ï¼Œå½“ç»§æ‰¿çš„å¯¹è±¡éœ€è¦ä¼ å‚æ—¶ï¼Œæåº¦ä¸çµæ´»ï¼Œå› ä¸º prototype æ˜¯ä¸€ä¸ªçˆ¶ç±»çš„å®ä¾‹ã€‚</p><p>æ•…ï¼šæ­¤ç»§æ‰¿æ–¹æ³•é€‚åˆç»§æ‰¿æ–¹æ³•ï¼Œè€Œä¸é€‚åˆç»§æ‰¿å±æ€§ã€‚</p><h1 id="2-å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿"><a href="#2-å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿" class="headerlink" title="2. å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿"></a>2. å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿</h1><p><strong>åŸç†è¯´æ˜ï¼š</strong></p><p>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ”¹å˜çˆ¶ç±»æ„é€ å‡½æ•°çš„ this å¹¶æ‰§è¡Œæ„é€ å‡½æ•°ã€‚</p><p><strong>å®ç°ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"> name=<span class="string">"tan"</span>, age=<span class="number">18</span> </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    <span class="keyword">this</span>.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123; <span class="keyword">this</span>.name &#125;</span> can run...`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"> id = <span class="number">12</span>, name, age </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id</span><br><span class="line">    <span class="keyword">this</span>.study = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;name&#125;</span> can study...`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ”¹å˜çˆ¶ç±»æ„é€ å‡½æ•°å¹¶ä¼ å‚æ‰§è¡Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ apply æ”¹å˜ this</span></span><br><span class="line">    Person.call( <span class="keyword">this</span>, name, age )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> S = <span class="keyword">new</span> Student( <span class="number">12</span>, <span class="string">"yu"</span>, <span class="number">12</span> )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"å®ä¾‹Sï¼š"</span>, S )</span><br><span class="line">S.run()</span><br><span class="line"><span class="built_in">console</span>.log( S <span class="keyword">instanceof</span> Student )</span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/a7999c1a9cdfab68f8ae86cc86d88d62.png" alt=""></fancybox></p><p><strong>æ€»ç»“ï¼š</strong></p><p>å¯ä»¥ä¼ å‚ç»™çˆ¶ç±»æ„é€ å‡½æ•°äº†ï¼Œ<strong>ä½†æ˜¯æ­¤æ–¹æ³•ä¸èƒ½ç»§æ‰¿çˆ¶ç±»åŸå‹é“¾ï¼ˆ prototype ï¼‰ä¸Šçš„æ–¹æ³•å’Œå‚æ•°ã€‚</strong></p><h1 id="3-ç»„åˆç»§æ‰¿"><a href="#3-ç»„åˆç»§æ‰¿" class="headerlink" title="3. ç»„åˆç»§æ‰¿"></a>3. ç»„åˆç»§æ‰¿</h1><p><strong>åŸç†è¯´æ˜ï¼š</strong></p><p>å°†ä¸Šé¢ä¸¤ç§æ–¹æ³•ç»“åˆèµ·æ¥ï¼Œç›®çš„æ˜¯ç»§æ‰¿åˆ°çˆ¶ç±»åŸå‹é“¾ä¸Šçš„æ–¹æ³•ã€‚</p><p><strong>å®ç°ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"> name=<span class="string">"tan"</span>, age=<span class="number">18</span> </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    <span class="keyword">this</span>.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123; <span class="keyword">this</span>.name &#125;</span> can run...`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"> id = <span class="number">12</span>, name, age </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id</span><br><span class="line">    <span class="keyword">this</span>.study = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;name&#125;</span> can study...`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ”¹å˜çˆ¶ç±»æ„é€ å‡½æ•°å¹¶ä¼ å‚æ‰§è¡Œ</span></span><br><span class="line">    Person.call( <span class="keyword">this</span>, name, age )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»§æ‰¿çˆ¶ç±»åŸå‹é“¾</span></span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person()</span><br><span class="line">Student.prototype.constuctor = Student</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> S = <span class="keyword">new</span> Student( <span class="number">12</span>, <span class="string">"yu"</span>, <span class="number">17</span> )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"å®ä¾‹Sï¼š"</span>, S )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"getName:"</span>, S.getName() )</span><br><span class="line"><span class="built_in">console</span>.log( S <span class="keyword">instanceof</span> Student )</span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/f18ca84e1634386e03844b02aad5fa56.png" alt=""></fancybox></p><p><strong>æ€»ç»“ï¼š</strong></p><p>å¾ˆå¥½çš„ç»§æ‰¿äº†çˆ¶ç±»ï¼Œå¹¶ç»§æ‰¿äº†åŸå‹é“¾ï¼Œä½†æ˜¯å¤šäº†ä¸€äº›å±æ€§åœ¨åŸå‹é“¾ä¸Šã€‚ä¸‹é¢æˆ‘ä»¬å°†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h1 id="4-ç»„åˆç»§æ‰¿å˜ç§â€”â€”å€Ÿç”¨åŸå‹é“¾ç»§æ‰¿"><a href="#4-ç»„åˆç»§æ‰¿å˜ç§â€”â€”å€Ÿç”¨åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="4. ç»„åˆç»§æ‰¿å˜ç§â€”â€”å€Ÿç”¨åŸå‹é“¾ç»§æ‰¿"></a>4. ç»„åˆç»§æ‰¿å˜ç§â€”â€”å€Ÿç”¨åŸå‹é“¾ç»§æ‰¿</h1><p><strong>åŸç†è¯´æ˜ï¼š</strong></p><p>å°†å­ç±»çš„åŸå‹é“¾æŒ‡å‘çˆ¶ç±»çš„åŸå‹é“¾ï¼Œè¾¾åˆ°ç»§æ‰¿çˆ¶ç±»åŸå‹é“¾çš„ç›®çš„ï¼š</p><p><strong>å®ç°ï¼š</strong></p><figure class="highlight js"><figcaption><span>ä¿®æ”¹ç»„åˆç»§æ‰¿çš„ä»£ç ï¼š</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»§æ‰¿çˆ¶ç±»åŸå‹é“¾</span></span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person()</span><br><span class="line">Student.prototype.constuctor = Student</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹ä¸ºï¼š</span></span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create( Person.prototype )</span><br><span class="line">Student.prototype.constuctor = Student</span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/ce5b33cd24674bed978d5f7be537ae9f.png" alt=""></fancybox></p><p><strong>æ€»ç»“ï¼š</strong></p><p>å®Œç¾çš„ç»§æ‰¿äº†çˆ¶ç±»ï¼Œå¹²å‡€åˆ©ç´¢ã€‚</p><h1 id="5-ES6-ç±»ç»§æ‰¿-extends"><a href="#5-ES6-ç±»ç»§æ‰¿-extends" class="headerlink" title="5. ES6 ç±»ç»§æ‰¿ extends"></a>5. ES6 ç±»ç»§æ‰¿ extends</h1><p><strong>å®ç°è¯´æ˜ï¼š</strong><br>extends å…³é”®å­—ä¸»è¦ç”¨äºç±»å£°æ˜æˆ–è€…ç±»è¡¨è¾¾å¼ä¸­ï¼Œä»¥åˆ›å»ºä¸€ä¸ªç±»ï¼Œè¯¥ç±»æ˜¯å¦ä¸€ä¸ªç±»çš„å­ç±»ã€‚å…¶ä¸­ constructor è¡¨ç¤ºæ„é€ å‡½æ•°ï¼Œä¸€ä¸ªç±»ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæœ‰å¤šä¸ªä¼šæŠ¥å‡º SyntaxError é”™è¯¯,å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šæ„é€ æ–¹æ³•ï¼Œåˆ™ä¼šæ·»åŠ é»˜è®¤çš„ constructor æ–¹æ³•ï¼Œä½¿ç”¨ super æ–¹æ³•ä¼ å‚åˆ°çˆ¶ç±»æ„é€ å‡½æ•°ã€‚</p><p><strong>å®ç°ï¼š</strong></p><figure class="highlight js"><figcaption><span>es6 extends ç»§æ‰¿</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>( name="tan", age=18 )&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">        <span class="keyword">this</span>.age = age</span><br><span class="line">    &#125;</span><br><span class="line">    run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123; <span class="keyword">this</span>.name &#125;</span> can run...`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    getName = <span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>( id, name, age )&#123;</span><br><span class="line">        <span class="keyword">super</span>( name, age )</span><br><span class="line">        <span class="keyword">this</span>.id = id</span><br><span class="line">    &#125;</span><br><span class="line">    study = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;name&#125;</span> can study...`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> S = <span class="keyword">new</span> Student( <span class="number">12</span>, <span class="string">"yu"</span>, <span class="number">17</span> )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"å®ä¾‹Sï¼š"</span>, S )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"getName:"</span>, S.getName() )</span><br><span class="line"><span class="built_in">console</span>.log( S <span class="keyword">instanceof</span> Student )</span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/6bc2d58fc1bc6f70f0b8b91a872349a8.png" alt=""></fancybox></p><p><strong>æ€»ç»“ï¼š</strong></p><p>ç®€å•ã€å®Œç¾</p><h1 id="ç–‘é—®ï¼š"><a href="#ç–‘é—®ï¼š" class="headerlink" title="ç–‘é—®ï¼š"></a>ç–‘é—®ï¼š</h1><p>åœ¨ç¬¬å››ç§ç»§æ‰¿æ–¹å¼ä¸­ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æ”¹æˆ <code>Student.prototype = Person.prototype</code>ï¼Œè€Œè¦ä½¿ç”¨ <code>Object.create( Person.prototype )</code>,</p><p>ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"> name=<span class="string">"tan"</span>, age=<span class="number">18</span> </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">    <span class="keyword">this</span>.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123; <span class="keyword">this</span>.name &#125;</span> can run...`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"> id = <span class="number">12</span>, name, age </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id</span><br><span class="line">    <span class="keyword">this</span>.study = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">`<span class="subst">$&#123;name&#125;</span> can study...`</span> )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ”¹å˜çˆ¶ç±»æ„é€ å‡½æ•°å¹¶ä¼ å‚æ‰§è¡Œ</span></span><br><span class="line">    Person.call( <span class="keyword">this</span>, name, age )</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = Person.prototype</span><br><span class="line">Student.prototype.constuctor = Student</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> S = <span class="keyword">new</span> Student( <span class="number">12</span>, <span class="string">"yu"</span>, <span class="number">17</span> )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"å®ä¾‹Sï¼š"</span>, S )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"getName:"</span>, S.getName() )</span><br><span class="line"><span class="built_in">console</span>.log( S <span class="keyword">instanceof</span> Student )</span><br></pre></td></tr></table></figure><p><strong>ç»“æœæ˜¯ï¼š</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/9a8a7524d0471e4b79bfedb1db5fd12e.png" alt=""></fancybox></p><p>å¦‚æœä½ çŸ¥é“åŸå› ï¼Œè¯·åœ¨ä¸‹æ–¹è¯„è®ºåŒºç»™æˆ‘ç•™è¨€ã€‚æ„Ÿè°¢ï¼</p><h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><p>å°½ç®¡ç»§æ‰¿æ–¹å¼äº”èŠ±å…«é—¨ï¼Œä½†æ˜¯ç»§æ‰¿çš„ç›®çš„å´æ˜¯ä¸å˜çš„ï¼š</p><ol><li>å°†çˆ¶ç±»å±æ€§å’Œæ–¹æ³•å¤åˆ¶åˆ°å½“å‰ç±» ( åœ¨æ„é€ å‡½æ•°å†…æ”¹å˜çˆ¶ç±»æ„é€ å‡½æ•°çš„thiså¹¶æ‰§è¡Œ )</li><li>ç»§æ‰¿çˆ¶ç±»çš„åŸå‹é“¾  ï¼ˆ ä¿®æ”¹æ„é€ å‡½æ•°çš„ prototype æŒ‡å‘çˆ¶ç±»çš„ prototype  ï¼‰</li></ol><h1 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h1><p><a href="https://juejin.im/post/5ad6efeb5188255c272275e1" target="_blank" rel="noopener">çœ‹äº†éƒ½çŸ¥é“ç»§æ‰¿ä¹Ÿå°±é‚£ä¹ˆå›äº‹å„¿</a></p><p><a href="https://juejin.im/post/5bcb2e295188255c55472db0#heading-0" target="_blank" rel="noopener">JavaScriptå¸¸ç”¨å…«ç§ç»§æ‰¿æ–¹æ¡ˆ</a></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javascript ä¹‹ new çš„å®ç°</title>
      <link href="/2020/02/06/javascript%20%E4%B9%8B%20new%20%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
      <url>/2020/02/06/javascript%20%E4%B9%8B%20new%20%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<p>ç½‘ä¸Šæœ‰å¾ˆå¤šè®²åŸå‹ã€åŸå‹é“¾ã€new çš„æ‰§è¡Œä¸å®ç°çš„æ–‡ç« ï¼Œæˆ‘ä¹Ÿçœ‹äº†å¾ˆå¤šã€‚</p><p>æœ¬æ–‡æè¿°ä¸€ä¸‹ new çš„æ‰§è¡Œè¿‡ç¨‹ä¸æ‰‹å†™å®ç°ä¸€ä¸ª new çš„å®ç°ã€‚</p><a id="more"></a><h1 id="1-new-çš„æ‰§è¡Œè¿‡ç¨‹"><a href="#1-new-çš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="1. new çš„æ‰§è¡Œè¿‡ç¨‹"></a>1. new çš„æ‰§è¡Œè¿‡ç¨‹</h1><p><fancybox><img src="https://image.gslb.dawnlab.me/1854fef99c105a5ec081cb921de59aeb.png" alt=""></fancybox></p><p>æˆ‘ä»¬ä»¥ä¸Šå›¾ä¸ºä¾‹é˜è¿° new çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p><ol><li>åˆ›å»ºä¸€ä¸ªä¸­é—´å¯¹è±¡</li><li>å°†è¯¥ä¸­é—´å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹</li><li>å°†æ„é€ å‡½æ•°çš„ this æŒ‡å‘è¯¥ä¸­é—´å¯¹è±¡å¹¶æ‰§è¡Œ</li><li>è¿”å›è¯¥ä¸­é—´å¯¹è±¡ï¼Œå³è¿”å›å®ä¾‹å¯¹è±¡</li></ol><h1 id="2-ä»£ç å®ç°"><a href="#2-ä»£ç å®ç°" class="headerlink" title="2. ä»£ç å®ç°"></a>2. ä»£ç å®ç°</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// å–å‡ºä¼ å…¥å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> argArray = <span class="built_in">Array</span>.from( <span class="built_in">arguments</span> )</span><br><span class="line">    <span class="comment">// å–å‡ºæ„é€ å‡½æ•°ä¸éœ€è¦ä¼ å…¥æ„é€ å‡½æ•°çš„å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> constructorFun = argArray.shift()</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸­é—´å‡½æ•°</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">    <span class="comment">// å°†è¯¥ä¸­é—´å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹</span></span><br><span class="line">    obj.__proto__ = constructorFun.prototype</span><br><span class="line">    <span class="comment">// ç»‘å®š this å¹¶ä¼ å…¥å‚æ•°æ‰§è¡Œ</span></span><br><span class="line">    constructorFun.apply( obj, argArray )</span><br><span class="line">    <span class="comment">// è¿”å›åˆ›å»ºçš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-è¿è¡Œæµ‹è¯•"><a href="#3-è¿è¡Œæµ‹è¯•" class="headerlink" title="3. è¿è¡Œæµ‹è¯•"></a>3. è¿è¡Œæµ‹è¯•</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"> name, age </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myNew</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> argArray = <span class="built_in">Array</span>.from( <span class="built_in">arguments</span> )</span><br><span class="line">    <span class="keyword">let</span> constructorFun = argArray.shift()</span><br><span class="line">    <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">    obj.__proto__ = constructorFun.prototype</span><br><span class="line">    constructorFun.apply( obj, argArray )</span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"myNewï¼š"</span>,myNew( Animal, <span class="string">"dog"</span>, <span class="string">"12"</span> ) )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"newï¼š"</span>, <span class="keyword">new</span> Animal( <span class="string">"cat"</span>, <span class="string">"11"</span> ) )</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœï¼š</p><p><fancybox><img src="https://s2.ax1x.com/2020/02/06/1ybPDx.png" alt=""></fancybox></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å†™å‡º new çš„æ‰§è¡Œè¿‡ç¨‹ä¸å®ç°ï¼ŒåŸºæœ¬ç®—æ˜¯è€ƒå¯Ÿå¯¹ prototype åŸå‹é“¾çš„ç†è§£ã€‚</p><h1 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h1><p><a href="https://github.com/amandakelake/blog/issues/37" target="_blank" rel="noopener">å½»åº•æ‹æ¸…æ¥š new çš„å®ç°</a></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ€è·¯æ¸…æ™°---å†™ä¸€ä¸ªæ·±æ‹·è´</title>
      <link href="/2020/01/31/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-%E5%86%99%E4%B8%80%E4%B8%AA%E6%B7%B1%E6%8B%B7%E8%B4%9D/"/>
      <url>/2020/01/31/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-%E5%86%99%E4%B8%80%E4%B8%AA%E6%B7%B1%E6%8B%B7%E8%B4%9D/</url>
      
        <content type="html"><![CDATA[<p>å†™ä¸€ä¸ªæ·±æ‹·è´ï¼Œè€ƒè™‘æ•°ç»„ã€å¯¹è±¡å’Œå¾ªç¯å¼•ç”¨ã€‚</p><a id="more"></a><h1 id="1-å‡†å¤‡ä¸¤ä¸ªå¯¹è±¡"><a href="#1-å‡†å¤‡ä¸¤ä¸ªå¯¹è±¡" class="headerlink" title="1.å‡†å¤‡ä¸¤ä¸ªå¯¹è±¡"></a>1.å‡†å¤‡ä¸¤ä¸ªå¯¹è±¡</h1><ul><li>æ— å¾ªç¯å¼•ç”¨çš„å¯¹è±¡</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> target = &#123;</span><br><span class="line">    field1: <span class="string">"string"</span>,</span><br><span class="line">    field2: <span class="number">33</span>,</span><br><span class="line">    field3: <span class="literal">undefined</span>,</span><br><span class="line">    field4: <span class="literal">null</span>,</span><br><span class="line">    field5: &#123;</span><br><span class="line">        child: <span class="string">"child"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    field6: [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    field7: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="keyword">this</span>.field1 )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æœ‰å¾ªç¯å¼•ç”¨çš„å¯¹è±¡<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> target = &#123;</span><br><span class="line">    field1: <span class="string">"string"</span>,</span><br><span class="line">    field2: <span class="number">33</span>,</span><br><span class="line">    field3: <span class="literal">undefined</span>,</span><br><span class="line">    field4: <span class="literal">null</span>,</span><br><span class="line">    field5: &#123;</span><br><span class="line">        child: <span class="string">"child"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    field6: [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    field7: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="keyword">this</span>.field1 )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">target.target = target</span><br></pre></td></tr></table></figure></li></ul><h1 id="2-ä½¿ç”¨-JSON-parse-JSON-stringify"><a href="#2-ä½¿ç”¨-JSON-parse-JSON-stringify" class="headerlink" title="2.ä½¿ç”¨ JSON.parse(JSON.stringify())"></a>2.ä½¿ç”¨ JSON.parse(JSON.stringify())</h1><h2 id="2-1å¤åˆ¶ä¸€ä¸ªæ— å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š"><a href="#2-1å¤åˆ¶ä¸€ä¸ªæ— å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="2.1å¤åˆ¶ä¸€ä¸ªæ— å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š"></a>2.1å¤åˆ¶ä¸€ä¸ªæ— å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> target = &#123;</span><br><span class="line">    field1: <span class="string">"string"</span>,</span><br><span class="line">    field2: <span class="number">33</span>,</span><br><span class="line">    field3: <span class="literal">undefined</span>,</span><br><span class="line">    field4: <span class="literal">null</span>,</span><br><span class="line">    field5: &#123;</span><br><span class="line">        child: <span class="string">"child"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    field6: [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    field7: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="keyword">this</span>.field1 )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> res = <span class="built_in">JSON</span>.parse( <span class="built_in">JSON</span>.stringify( target ) )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"target: "</span>, target )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"res: "</span>, res )</span><br></pre></td></tr></table></figure><p>å¾—åˆ°çš„ç»“æœæ˜¯ï¼š</p><p><fancybox><img src="https://s2.ax1x.com/2020/02/04/1DMAET.png" alt=""></fancybox></p><p><strong>æ€»ç»“</strong>ï¼šå¯è§ï¼ŒJSON.stringify() ä¸èƒ½å¤„ç†undefinedå’Œfunctionã€‚</p><h2 id="2-2å¤åˆ¶ä¸€ä¸ªå¾ªç¯åº”ç”¨çš„å¯¹è±¡"><a href="#2-2å¤åˆ¶ä¸€ä¸ªå¾ªç¯åº”ç”¨çš„å¯¹è±¡" class="headerlink" title="2.2å¤åˆ¶ä¸€ä¸ªå¾ªç¯åº”ç”¨çš„å¯¹è±¡"></a>2.2å¤åˆ¶ä¸€ä¸ªå¾ªç¯åº”ç”¨çš„å¯¹è±¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> target = &#123;</span><br><span class="line">    field1: <span class="string">"string"</span>,</span><br><span class="line">    field2: <span class="number">33</span>,</span><br><span class="line">    field3: <span class="literal">undefined</span>,</span><br><span class="line">    field4: <span class="literal">null</span>,</span><br><span class="line">    field5: &#123;</span><br><span class="line">        child: <span class="string">"child"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    field6: [ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> ],</span><br><span class="line">    field7: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="keyword">this</span>.field1 )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">target.target = target</span><br><span class="line"><span class="keyword">var</span> res = <span class="built_in">JSON</span>.parse( <span class="built_in">JSON</span>.stringify( target ) )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"target: "</span>, target )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"res: "</span>, res )</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š<br><fancybox><img src="https://s2.ax1x.com/2020/02/04/1DMOMR.png" alt=""></fancybox></p><p><strong>æ€»ç»“</strong>ï¼šå¯è§ï¼ŒJSON.stringify() ä¸èƒ½å¤„ç†å¤„ç†å¾ªç¯å¼•ç”¨çš„ç»“æ„</p><h1 id="3-æ‰‹å†™ä¸€ä¸ªæ·±æ‹·è´"><a href="#3-æ‰‹å†™ä¸€ä¸ªæ·±æ‹·è´" class="headerlink" title="3.æ‰‹å†™ä¸€ä¸ªæ·±æ‹·è´"></a>3.æ‰‹å†™ä¸€ä¸ªæ·±æ‹·è´</h1><h2 id="3-1æµ…æ‹·è´"><a href="#3-1æµ…æ‹·è´" class="headerlink" title="3.1æµ…æ‹·è´"></a>3.1æµ…æ‹·è´</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params"> target </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cloneTarget = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> key <span class="keyword">in</span> target )&#123;</span><br><span class="line">        cloneTarget[key] = target[key]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cloneTarget</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯ä¸€ä¸ªæµ…æ‹·è´ï¼Œæ²¡æœ‰è€ƒè™‘æ•°ç»„ä¸å¯¹è±¡ã€‚</p><h2 id="3-2-è€ƒè™‘å¯¹è±¡"><a href="#3-2-è€ƒè™‘å¯¹è±¡" class="headerlink" title="3.2 è€ƒè™‘å¯¹è±¡"></a>3.2 è€ƒè™‘å¯¹è±¡</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ typeof æ¥åˆ¤æ–­æ•°æ®ç±»å‹ï¼š</p><blockquote><p>typeofå¯ä»¥æŸ¥çœ‹æ•°æ®çš„ç±»å‹æœ‰ 7 ç§ï¼š<br>typeof 12345 === number<br>typeof â€œ999â€ === string<br>typeof {} === object  null   []<br>typeof undefined === undefined<br>typeof true === boolean<br>typeof symbol(23) === symbol<br>typeof console.log === function</p><footer><strong>typeofå°æç¤º</strong></footer></blockquote><p>ä½¿ç”¨é€’å½’å¤„ç†å¼•ç”¨å¯¹è±¡çš„æ‹·è´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params"> target </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">typeof</span> target === <span class="string">"object"</span> )&#123;</span><br><span class="line">        <span class="keyword">let</span> cloneTarget = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> key <span class="keyword">in</span> target )&#123;</span><br><span class="line">            cloneTarget[key] = clone( target[key] )</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cloneTarget</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> target</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><fancybox><img src="https://s2.ax1x.com/2020/02/04/1DO80K.png" alt=""></fancybox></p><p><strong>æ€»ç»“</strong></p><p>å› ä¸ºtypeofä¼šæŠŠæ•°ç»„è¯†åˆ«æˆobjectï¼Œæ‰€ä»¥ï¼Œä»£ç è¿˜éœ€è¦å†åº¦æ”¹è¿›ã€‚</p><h2 id="3-3-è€ƒè™‘æ•°ç»„"><a href="#3-3-è€ƒè™‘æ•°ç»„" class="headerlink" title="3.3 è€ƒè™‘æ•°ç»„"></a>3.3 è€ƒè™‘æ•°ç»„</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params"> target </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">typeof</span> target === <span class="string">"object"</span> )&#123;</span><br><span class="line">        <span class="keyword">let</span> cloneTarget = <span class="built_in">Array</span>.isArray( target ) ? [] : &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> key <span class="keyword">in</span> target )&#123;</span><br><span class="line">            cloneTarget[key] = clone( target[key] )</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cloneTarget</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> target</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯•ç»“æœï¼š</strong></p><p><fancybox><img src="https://s2.ax1x.com/2020/02/04/1DzROA.png" alt=""></fancybox></p><p><strong>æ€»ç»“ï¼š</strong></p><p>å¯è§ï¼Œæ•°ç»„ä¹Ÿå¯ä»¥å¤åˆ¶äº†ï¼Œä¸‹é¢æˆ‘ä»¬è¦è§£å†³å¾ªç¯å¼•ç”¨ã€‚</p><h2 id="3-4-è€ƒè™‘å¾ªç¯å¼•ç”¨"><a href="#3-4-è€ƒè™‘å¾ªç¯å¼•ç”¨" class="headerlink" title="3.4 è€ƒè™‘å¾ªç¯å¼•ç”¨"></a>3.4 è€ƒè™‘å¾ªç¯å¼•ç”¨</h2><p>å½“å­¦ä¹ è¿‡è®¾è®¡æ¨¡å¼åï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæœ‰å¾ˆå¤šæƒ…å†µå­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œåœ¨æ·±æ‹·è´æ—¶ï¼Œå¾ªç¯å¼•ç”¨çš„é—®é¢˜æ˜¯å¿…é¡»è¦è§£å†³çš„ã€‚</p><p>è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é¢å¤–å¼€è¾Ÿä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œæ¥å­˜å‚¨å½“å‰å¯¹è±¡å’Œæ‹·è´å¯¹è±¡çš„å¯¹åº”å…³ç³»ï¼Œå½“éœ€è¦æ‹·è´å½“å‰å¯¹è±¡æ—¶ï¼Œå…ˆå»å­˜å‚¨ç©ºé—´ä¸­æ‰¾ï¼Œæœ‰æ²¡æœ‰æ‹·è´è¿‡è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæœ‰çš„è¯ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ç»§ç»­æ‹·è´ï¼Œè¿™æ ·å°±å·§å¦™åŒ–è§£çš„å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p><p>â€”å¼•ç”¨è‡ªï¼š<a href="https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1#heading-5" target="_blank" rel="noopener">å¦‚ä½•å†™å‡ºä¸€ä¸ªæƒŠè‰³é¢è¯•å®˜çš„æ·±æ‹·è´?</a></p><p>es6ä¸­ï¼Œæœ‰è¿™æ ·ä¸€ç§æ•°æ®ç»“æ„å« Mapï¼Œä»–èƒ½å°†å¯¹è±¡ä½œä¸ºé”®ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆå¥½çš„ä¿å­˜å¯¹è±¡ï¼Œå¹¶åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«æ‹·è´è¿‡äº†ã€‚</p><p>æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>æ˜¯å¯¹è±¡ï¼Œæ£€æŸ¥mapä¸­æ˜¯å¦å­˜åœ¨æ­¤å¯¹è±¡</li><li>å­˜åœ¨â€”-è¿”å›ä¿å­˜åœ¨mapä¸­çš„é”®</li><li>ä¸å­˜åœ¨â€”å°†å€¼å­˜å…¥mapï¼Œé”®çš„å€¼ä½¿ç”¨å½“å‰cloneTargetï¼ˆè¿™é‡Œå…¶å®ç”¨ä»€ä¹ˆéƒ½è¡Œï¼‰</li><li>ç»§ç»­é€’å½’æ‹·è´ï¼Œå¹¶ä¼ å…¥æ­¤æ—¶çš„map</li></ol><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params"> target, map = new Map(</span>) )</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">typeof</span> target === <span class="string">"object"</span> )&#123;</span><br><span class="line">        <span class="keyword">var</span> cloneTarget = <span class="built_in">Array</span>.isArray( target ) ? [] : &#123;&#125;</span><br><span class="line">        <span class="keyword">if</span>( map.get( target ) )&#123;</span><br><span class="line">            <span class="keyword">return</span> map.get( target )</span><br><span class="line">        &#125;</span><br><span class="line">        map.set( target, cloneTarget )</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> key <span class="keyword">in</span> target )&#123;</span><br><span class="line">            cloneTarget[key] = clone( target[key], map )</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cloneTarget</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> target</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœï¼š<br><fancybox><img src="https://s2.ax1x.com/2020/02/05/1rJSNq.png" alt=""></fancybox></p><p>å¯ä»¥çœ‹è§ï¼Œå·²ç»è§£å†³äº†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p><h2 id="3-5-ç®€å•æ€§èƒ½ä¼˜åŒ–"><a href="#3-5-ç®€å•æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="3.5 ç®€å•æ€§èƒ½ä¼˜åŒ–"></a>3.5 ç®€å•æ€§èƒ½ä¼˜åŒ–</h2><p>ä½¿ç”¨ WeakMap æ•°æ®ç»“æ„ï¼Œå°†å¤åˆ¶å¯¹è±¡å±æ€§çš„å¼ºå¼•ç”¨å˜ä¸ºå¼±å¼•ç”¨ã€‚</p><p>WeakMapçš„ä½œç”¨ï¼Œè¯·å‚è€ƒ <a href="http://es6.ruanyifeng.com/#docs/set-map#WeakMap" target="_blank" rel="noopener">es6 WeakMap</a>.</p><p>ä¿®æ”¹åçš„ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params"> target, map = new WeakMap(</span>) )</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">typeof</span> target === <span class="string">"object"</span> )&#123;</span><br><span class="line">        <span class="keyword">var</span> cloneTarget = <span class="built_in">Array</span>.isArray( target ) ? [] : &#123;&#125;</span><br><span class="line">        <span class="keyword">if</span>( map.get( target ) )&#123;</span><br><span class="line">            <span class="keyword">return</span> map.get( target )</span><br><span class="line">        &#125;</span><br><span class="line">        map.set( target, cloneTarget )</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> key <span class="keyword">in</span> target )&#123;</span><br><span class="line">            cloneTarget[key] = clone( target[key], map )</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cloneTarget</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> target</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªç®€å•çš„æ·±æ‹·è´ï¼Œè§£å†³äº†å¯¹è±¡ã€æ•°ç»„ã€å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>æ€»ç»“ä¸€ä¸‹å†™å‡ºä¸€ä¸ªæ·±æ‹·è´çš„è¿‡ç¨‹ï¼š</p><ol><li>éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ‹·è´ç›®æ ‡ï¼Œä¸€ä¸ªæ˜¯ä½œä¸ºæ‹·è´è¿‡å±æ€§çš„å®¹å™¨ WeakMap </li><li>åˆ¤æ–­æ‹·è´ç›®æ ‡æ˜¯å¦ä¸€ä¸ªå¯¹è±¡ æˆ–æ˜¯ æ•°ç»„</li><li>æ˜¯ ä½¿ç”¨ WeakMap åˆ¤æ–­æ˜¯å¦å·²ç»æ‹·è´ï¼Œå¹¶é€’å½’æ‹·è´æ¯ä¸ªå±æ€§</li><li>ä¸æ˜¯ ç›´æ¥è¿”å›æ­¤å±æ€§çš„å€¼</li></ol><p>jsä¸­è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚ Set å’Œ Mapï¼Œè¿™é‡Œå°±ä¸åšç»§ç»­çš„æ·±å…¥äº†ï¼Œ</p><p>å¦‚æœä½ æƒ³ç»§ç»­æ·±å…¥æ·±æ‹·è´ï¼Œä½ å¯ä»¥å‚è€ƒï¼š<a href="https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1#heading-5" target="_blank" rel="noopener">å¦‚ä½•å†™å‡ºä¸€ä¸ªæƒŠè‰³é¢è¯•å®˜çš„æ·±æ‹·è´?</a></p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1#heading-5" target="_blank" rel="noopener">å¦‚ä½•å†™å‡ºä¸€ä¸ªæƒŠè‰³é¢è¯•å®˜çš„æ·±æ‹·è´?</a></p><p><a href="http://es6.ruanyifeng.com/#docs/set-map#WeakMap" target="_blank" rel="noopener">é˜®ä¸€å³° es6</a></p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsåŸºç¡€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ€è·¯æ¸…æ™°---socket.ioçš„æ€»ç»“</title>
      <link href="/2020/01/30/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-socket-io%E7%9A%84%E6%80%BB%E7%BB%93/"/>
      <url>/2020/01/30/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-socket-io%E7%9A%84%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://s2.ax1x.com/2020/01/31/11oObQ.png" alt=""></fancybox></p><p>æ€è·¯æ¸…æ™°çš„ä½¿ç”¨socket.ioâ€¦..</p><a id="more"></a><h1 id="å¼•å…¥ï¼š"><a href="#å¼•å…¥ï¼š" class="headerlink" title="å¼•å…¥ï¼š"></a>å¼•å…¥ï¼š</h1><h2 id="å…ˆçœ‹å®˜ç½‘apiï¼š"><a href="#å…ˆçœ‹å®˜ç½‘apiï¼š" class="headerlink" title="å…ˆçœ‹å®˜ç½‘apiï¼š"></a>å…ˆçœ‹å®˜ç½‘apiï¼š</h2><p><img src="https://s2.ax1x.com/2020/01/31/13JEmd.png" alt=""></p><p>å¯ä»¥çœ‹è§ï¼Œä¸»è¦æœ‰è¿™ä¸‰ä¸ªå¯¹è±¡ï¼šserverï¼Œnamespaceå’Œsocket</p><p>å¦‚æœä½ æŒæ¡äº†è¿™ä¸‰ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä½ å°±å·²ç»åŸºæœ¬å­¦ä¼šsocket.ioçš„ä½¿ç”¨äº†ã€‚</p><h2 id="åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬ä¼šå†™å‡ºè¿™æ ·çš„socket-ioæœåŠ¡ç«¯ä»£ç ï¼š"><a href="#åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬ä¼šå†™å‡ºè¿™æ ·çš„socket-ioæœåŠ¡ç«¯ä»£ç ï¼š" class="headerlink" title="åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬ä¼šå†™å‡ºè¿™æ ·çš„socket.ioæœåŠ¡ç«¯ä»£ç ï¼š"></a>åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬ä¼šå†™å‡ºè¿™æ ·çš„socket.ioæœåŠ¡ç«¯ä»£ç ï¼š</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)     <span class="comment">// å¼•å…¥koa</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()          <span class="comment">// åˆ›å»ºä¸€ä¸ªkoaå®ä¾‹</span></span><br><span class="line"><span class="comment">// å¼•å…¥httpæ¨¡å—ï¼Œå¹¶åœ¨Serverå‡½æ•°ä¸­ä¼ å…¥appçš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>).Server( app.callback() )</span><br><span class="line"><span class="comment">// å¼•å…¥socket.io   ä¼ å…¥httpï¼Œå¹¶é…ç½®socket</span></span><br><span class="line"><span class="keyword">const</span> IO = <span class="built_in">require</span>(<span class="string">"socket.io"</span>)( http, &#123;</span><br><span class="line">  pingTimeout: <span class="number">1000</span> * <span class="number">10</span>,</span><br><span class="line">  pingInterval: <span class="number">1000</span> * <span class="number">2.5</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// é»˜è®¤å‘½åç©ºé—´ï¼ˆ"/"ï¼‰æ€»çº¿IOç›‘å¬è¿æ¥äº‹ä»¶  å½“å‰IOä¸ºé»˜è®¤å‘½åç©ºé—´</span></span><br><span class="line">IO.on( <span class="string">"connection"</span>, ( socket ) =&gt; &#123;</span><br><span class="line">    <span class="comment">// å½“å‰socketè¿æ¥æ”¶åˆ°eventäº‹ä»¶ï¼Œè§¦å‘callbackå‡½æ•°</span></span><br><span class="line">    socket.on( <span class="string">"event"</span>, callBack )</span><br><span class="line">    <span class="comment">// å‘å½“å‰socketè¿æ¥å®¢æˆ·ç«¯è§¦å‘eventäº‹ä»¶ï¼Œè¿”å›æ•°æ®sendData</span></span><br><span class="line">    socket.emit( <span class="string">"event"</span>, sendData )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äºå¦‚ä¸‹ä»£ç ï¼š</span></span><br><span class="line"><span class="keyword">var</span> mainSpace = IO.of(<span class="string">"/"</span>)</span><br><span class="line">mainSpace.on( <span class="string">"connection"</span>, ( socket ) =&gt; &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹äº†ä¸Šé¢çš„ä»£ç ï¼Œä¸éš¾å‘ç°socket.ioæš´éœ²ä¸¤ä¸ªå¯¹è±¡ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä¸€ä¸ªæ˜¯å½“å‰å‘½åç©ºé—´æ€»çº¿IOï¼Œä¸€ä¸ªæ˜¯å½“å‰è¿æ¥çš„socketï¼Œä»–ä»¬çš„å…³ç³»å¦‚å›¾ï¼š</p><p><fancybox><img src="https://s2.ax1x.com/2020/01/31/13JX38.png" alt=""></fancybox></p><p>è¿™é‡Œå°±ä¸å¾—ä¸è¯´ä¸€ä¸‹å‘½åç©ºé—´äº†</p><h1 id="å…³äºå‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼š"><a href="#å…³äºå‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼š" class="headerlink" title="å…³äºå‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼š"></a>å…³äºå‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼š</h1><p>é»˜è®¤å‘½åç©ºé—´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">amespace &#123;</span><br><span class="line">  name: <span class="string">'/'</span>,</span><br><span class="line">  server:</span><br><span class="line">   Server &#123;</span><br><span class="line">     nsps: &#123; <span class="string">'/'</span>: [Circular] &#125;,</span><br><span class="line">     parentNsps: <span class="built_in">Map</span> &#123;&#125;,</span><br><span class="line">     _path: <span class="string">'/socket.io'</span>,</span><br><span class="line">     _serveClient: <span class="literal">true</span>,</span><br><span class="line">     parser:</span><br><span class="line">      &#123; <span class="attr">protocol</span>: <span class="number">4</span>,</span><br><span class="line">        types: [<span class="built_in">Array</span>],</span><br><span class="line">        CONNECT: <span class="number">0</span>,</span><br><span class="line">        DISCONNECT: <span class="number">1</span>,</span><br><span class="line">        EVENT: <span class="number">2</span>,</span><br><span class="line">        ACK: <span class="number">3</span>,</span><br><span class="line">        ERROR: <span class="number">4</span>,</span><br><span class="line">        BINARY_EVENT: <span class="number">5</span>,</span><br><span class="line">        BINARY_ACK: <span class="number">6</span>,</span><br><span class="line">        Encoder: [<span class="built_in">Function</span>: Encoder],</span><br><span class="line">        Decoder: [<span class="built_in">Function</span>: Decoder] &#125;,</span><br><span class="line">     encoder: Encoder &#123;&#125;,</span><br><span class="line">     _adapter: [<span class="built_in">Function</span>: Adapter],</span><br><span class="line">     _origins: <span class="string">'*:*'</span>,</span><br><span class="line">     sockets: [Circular],</span><br><span class="line">     eio:</span><br><span class="line">      Server &#123;</span><br><span class="line">        clients: &#123;&#125;,</span><br><span class="line">        clientsCount: <span class="number">0</span>,</span><br><span class="line">        wsEngine: <span class="string">'ws'</span>,</span><br><span class="line">        pingTimeout: <span class="number">5000</span>,</span><br><span class="line">        pingInterval: <span class="number">25000</span>,</span><br><span class="line">        upgradeTimeout: <span class="number">10000</span>,</span><br><span class="line">        maxHttpBufferSize: <span class="number">100000000</span>,</span><br><span class="line">        transports: [<span class="built_in">Array</span>],</span><br><span class="line">        allowUpgrades: <span class="literal">true</span>,</span><br><span class="line">        allowRequest: [<span class="built_in">Function</span>: bound ],</span><br><span class="line">        cookie: <span class="string">'io'</span>,</span><br><span class="line">        cookiePath: <span class="string">'/'</span>,</span><br><span class="line">        cookieHttpOnly: <span class="literal">true</span>,</span><br><span class="line">        perMessageDeflate: [<span class="built_in">Object</span>],</span><br><span class="line">        httpCompression: [<span class="built_in">Object</span>],</span><br><span class="line">        initialPacket: [<span class="built_in">Array</span>],</span><br><span class="line">        ws: [<span class="built_in">Object</span>],</span><br><span class="line">        _events: [<span class="built_in">Object</span>],</span><br><span class="line">        _eventsCount: <span class="number">1</span> &#125;,</span><br><span class="line">     httpServer:</span><br><span class="line">      Server &#123;</span><br><span class="line">        domain: <span class="literal">null</span>,</span><br><span class="line">        _events: [<span class="built_in">Object</span>],</span><br><span class="line">        _eventsCount: <span class="number">5</span>,</span><br><span class="line">        _maxListeners: <span class="literal">undefined</span>,</span><br><span class="line">        _connections: <span class="number">0</span>,</span><br><span class="line">        _handle: <span class="literal">null</span>,</span><br><span class="line">        _usingSlaves: <span class="literal">false</span>,</span><br><span class="line">        _slaves: [],</span><br><span class="line">        _unref: <span class="literal">false</span>,</span><br><span class="line">        allowHalfOpen: <span class="literal">true</span>,</span><br><span class="line">        pauseOnConnect: <span class="literal">false</span>,</span><br><span class="line">        httpAllowHalfOpen: <span class="literal">false</span>,</span><br><span class="line">        timeout: <span class="number">120000</span>,</span><br><span class="line">        keepAliveTimeout: <span class="number">5000</span>,</span><br><span class="line">        _pendingResponseData: <span class="number">0</span>,</span><br><span class="line">        maxHeadersCount: <span class="literal">null</span>,</span><br><span class="line">        [<span class="built_in">Symbol</span>(asyncId)]: <span class="number">-1</span> &#125;,</span><br><span class="line">     engine:</span><br><span class="line">      Server &#123;</span><br><span class="line">        clients: &#123;&#125;,</span><br><span class="line">        clientsCount: <span class="number">0</span>,</span><br><span class="line">        wsEngine: <span class="string">'ws'</span>,</span><br><span class="line">        pingTimeout: <span class="number">5000</span>,</span><br><span class="line">        pingInterval: <span class="number">25000</span>,</span><br><span class="line">        upgradeTimeout: <span class="number">10000</span>,</span><br><span class="line">        maxHttpBufferSize: <span class="number">100000000</span>,</span><br><span class="line">        transports: [<span class="built_in">Array</span>],</span><br><span class="line">        allowUpgrades: <span class="literal">true</span>,</span><br><span class="line">        allowRequest: [<span class="built_in">Function</span>: bound ],</span><br><span class="line">        cookie: <span class="string">'io'</span>,</span><br><span class="line">        cookiePath: <span class="string">'/'</span>,</span><br><span class="line">        cookieHttpOnly: <span class="literal">true</span>,</span><br><span class="line">        perMessageDeflate: [<span class="built_in">Object</span>],</span><br><span class="line">        httpCompression: [<span class="built_in">Object</span>],</span><br><span class="line">        initialPacket: [<span class="built_in">Array</span>],</span><br><span class="line">        ws: [<span class="built_in">Object</span>],</span><br><span class="line">        _events: [<span class="built_in">Object</span>],</span><br><span class="line">        _eventsCount: <span class="number">1</span> &#125; &#125;,</span><br><span class="line">  sockets: &#123;&#125;,</span><br><span class="line">  connected: &#123;&#125;,</span><br><span class="line">  fns: [],</span><br><span class="line">  ids: <span class="number">0</span>,</span><br><span class="line">  rooms: [],</span><br><span class="line">  flags: &#123;&#125;,</span><br><span class="line">  adapter: Adapter &#123; <span class="attr">nsp</span>: [Circular], <span class="attr">rooms</span>: &#123;&#125;, <span class="attr">sids</span>: &#123;&#125;, <span class="attr">encoder</span>: Encoder &#123;&#125; &#125; &#125;</span><br></pre></td></tr></table></figure><h1 id="å‘½åç©ºé—´ä¸socket"><a href="#å‘½åç©ºé—´ä¸socket" class="headerlink" title="å‘½åç©ºé—´ä¸socket"></a>å‘½åç©ºé—´ä¸socket</h1><h2 id="å½“å‰å‘½åç©ºé—´æ€»çº¿IOçš„æ€»ç»“"><a href="#å½“å‰å‘½åç©ºé—´æ€»çº¿IOçš„æ€»ç»“" class="headerlink" title="å½“å‰å‘½åç©ºé—´æ€»çº¿IOçš„æ€»ç»“"></a>å½“å‰å‘½åç©ºé—´æ€»çº¿IOçš„æ€»ç»“</h2><p>é€šè¿‡ä¸Šé¢çš„å‘½åç©ºé—´çš„å®šä¹‰çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œåœ¨æ€»çº¿IOä¸Šï¼Œæ‹¥æœ‰æ‰€æœ‰è¿æ¥çš„socketçš„ä¿¡æ¯ï¼Œæ‹¥æœ‰æ‰€æœ‰çš„roomsä¿¡æ¯ï¼Œ</p><p>æ•…ï¼š</p><ol><li>å¯ä»¥å‘æŒ‡å®šæˆ¿é—´é‡Œå‘é€æ¶ˆæ¯</li><li>å¯ä»¥å‘è¿æ¥åˆ°å½“å‰å‘½åç©ºé—´é‡Œçš„æ‰€æœ‰socketå‘é€æ¶ˆæ¯</li><li>ç­‰â€¦</li></ol><p>å®˜ç½‘apiæˆªå›¾ï¼š</p><p><fancybox><img src="https://s2.ax1x.com/2020/01/31/13JkOH.png" alt=""></fancybox></p><p>å¯çŸ¥ï¼Œæ€»çš„æ˜¯å¯¹roomå’Œè¿æ¥çš„socketsè¿›è¡Œæ“ä½œã€‚</p><h2 id="å½“å‰è¿æ¥socketæ€»ç»“ï¼š"><a href="#å½“å‰è¿æ¥socketæ€»ç»“ï¼š" class="headerlink" title="å½“å‰è¿æ¥socketæ€»ç»“ï¼š"></a>å½“å‰è¿æ¥socketæ€»ç»“ï¼š</h2><p><fancybox><img src="https://s2.ax1x.com/2020/01/31/13nSvq.png" alt=""></fancybox></p><h1 id="ä¸ªäººæ€»ç»“"><a href="#ä¸ªäººæ€»ç»“" class="headerlink" title="ä¸ªäººæ€»ç»“"></a>ä¸ªäººæ€»ç»“</h1><p>å½“ç†è§£äº†æ€»çº¿IOä¸å½“å‰è¿æ¥çš„socketçš„å…³ç³»åï¼Œå°±èƒ½æ€è·¯æ¸…æ™°çš„å†™å‡ºä¼˜ç§€çš„çš„ä»£ç äº†ã€‚</p><h2 id="å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å›å…±å‹‰ï¼"><a href="#å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å›å…±å‹‰ï¼" class="headerlink" title="å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å›å…±å‹‰ï¼"></a>å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å›å…±å‹‰ï¼</h2><h1 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h1><p><strong><a href="https://socket.io/docs/server-api/#Server" target="_blank" rel="noopener">socket.ioå®˜ç½‘</a></strong></p><p><strong><a href="https://blog.csdn.net/sunq1982/article/details/78043330" target="_blank" rel="noopener">socket.ioå‘½åç©ºé—´çš„è¯¦ç»†è§£æ</a></strong></p><p><strong><a href="https://www.jianshu.com/p/8d28d3e0b43e" target="_blank" rel="noopener">WebSocketåè®®-Socket.io æœåŠ¡ç«¯API</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> socket.io </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¥é—¨ </tag>
            
            <tag> æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeç›¸å…³é…ç½®</title>
      <link href="/2020/01/06/vscode%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/01/06/vscode%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•è‡ªå·±å¸¸ç”¨çš„ä¸€äº›é…ç½®â€¦</p><a id="more"></a><h2 id="æ‰“å¼€setting-jsoné…ç½®æ–‡ä»¶"><a href="#æ‰“å¼€setting-jsoné…ç½®æ–‡ä»¶" class="headerlink" title="æ‰“å¼€setting.jsoné…ç½®æ–‡ä»¶"></a>æ‰“å¼€setting.jsoné…ç½®æ–‡ä»¶</h2><p><img src="https://image.gslb.dawnlab.me/c219e2ba7704d878cc8270f905269137.png" alt=""></p><h2 id="VSCodeå®ç°ç”¨Ctrl-æ»šè½®å®ç°ä»£ç çš„ç¼©æ”¾"><a href="#VSCodeå®ç°ç”¨Ctrl-æ»šè½®å®ç°ä»£ç çš„ç¼©æ”¾" class="headerlink" title="VSCodeå®ç°ç”¨Ctrl+æ»šè½®å®ç°ä»£ç çš„ç¼©æ”¾"></a>VSCodeå®ç°ç”¨Ctrl+æ»šè½®å®ç°ä»£ç çš„ç¼©æ”¾</h2><p>é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p><p>åœ¨æ–‡ä»¶â€“&gt;é¦–é€‰é¡¹â€“&gt;è®¾ç½®â€“&gt;ç”¨æˆ·è®¾ç½®ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"editor.mouseWheelZoom": true</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vsCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªå°demoå¼„æ‡‚vueçš„$nextTick</title>
      <link href="/2020/01/06/%E4%B8%80%E4%B8%AA%E5%B0%8Fdemo%E5%BC%84%E6%87%82vue%E7%9A%84$nextTick/"/>
      <url>/2020/01/06/%E4%B8%80%E4%B8%AA%E5%B0%8Fdemo%E5%BC%84%E6%87%82vue%E7%9A%84$nextTick/</url>
      
        <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/62c937472655f71064368ea87d641cb1.jpg" alt=""></fancybox></p><p>ä¸€ä¸ªå°demoå¼„æ‡‚vueçš„$nextTickçš„ä½œç”¨</p><a id="more"></a><p>æœ‰è¿™æ ·ä¸€æ®µä»£ç ï¼š</p><p>ä»£ç æˆªå›¾ï¼š<br><fancybox><img src="https://image.gslb.dawnlab.me/10875e2f276bac164ab38fbc55dd6d12.png" alt=""></fancybox></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vue/2.6.10/vue.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"span"</span> <span class="attr">v-if</span>=<span class="string">"showSpan"</span> &gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btn"</span> &gt;</span>æ˜¾ç¤º<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">"#app"</span>,</span></span><br><span class="line">        data: &#123;</span><br><span class="line"><span class="actionscript">            showSpan: <span class="literal">false</span></span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            btn()&#123;</span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.showSpan = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log( <span class="built_in">document</span>.querySelector(<span class="string">"span"</span>) )</span></span><br><span class="line"><span class="javascript">                setTimeout( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log( <span class="string">"200æ¯«ç§’å"</span> )</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log( <span class="built_in">document</span>.querySelector(<span class="string">"span"</span>) )</span></span><br><span class="line">                &#125;, 200 )</span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.$nextTick( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log( <span class="string">"$nextTickæ‰§è¡Œçš„ç»“æœ"</span> )</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log( <span class="built_in">document</span>.querySelector(<span class="string">"span"</span>) )</span></span><br><span class="line">                &#125; )</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœï¼š</p><p><fancybox><img src="https://image.gslb.dawnlab.me/a497ffd403e6b77e63c3b9ec527675bc.png" alt=""></fancybox></p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ç¬¬ä¸€ä¸ªç»“æœä¸ºnullï¼Œå› ä¸ºæ²¡æœ‰æ‰¾åˆ°domå…ƒç´ ï¼Œ<br>ç¬¬äºŒä¸ªå‡ºç°çš„æ˜¯$nextTickæ‰§è¡Œçš„ç»“æœï¼Œæ˜¯ç¡®å®šdomé‡æ–°æ¸²æŸ“æŒ‚è½½å®Œæ¯•æ‰§è¡Œçš„å›è°ƒå‡½æ•°<br>ç¬¬ä¸‰ä¸ªæ‰æ˜¯å®šæ—¶å™¨çš„ç»“æœï¼Œæ˜¯åœ¨æœ€åæ‰§è¡Œçš„å‡½æ•°ã€‚</p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>å¯çŸ¥ï¼Œvueä¸­æ•°æ®æ›´æ–°å¼•èµ·çš„domæ›´æ–°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚</p><h2 id="å°æ‹“å±•"><a href="#å°æ‹“å±•" class="headerlink" title="å°æ‹“å±•"></a>å°æ‹“å±•</h2><h3 id="v-ifå’Œv-showçš„åŒºåˆ«"><a href="#v-ifå’Œv-showçš„åŒºåˆ«" class="headerlink" title="v-ifå’Œv-showçš„åŒºåˆ«"></a>v-ifå’Œv-showçš„åŒºåˆ«</h3><p>å½“æˆ‘ä»¬æŠŠä¸Šæ–‡çš„ <code>v-if</code> æ”¹æˆ <code>v-show</code> åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><p><fancybox><img src="https://image.gslb.dawnlab.me/3a87602c6d51db2eaaec1aa8a5629c74.png" alt=""></fancybox></p><p>å¯ä»¥çœ‹å‡ºï¼Œ<code>v-if=false</code> æ—¶ï¼Œå…ƒç´ ä¸ä¼šæ¸²æŸ“åˆ°é¡µé¢ï¼Œä½¿ç”¨ <code>v-show</code> å…ƒç´ ä¸€ç›´åœ¨é¡µé¢ä¸­ï¼Œåªæ˜¯è®¾ç½®æ ·å¼ <code>display: none;</code> æ²¡æœ‰æ˜¾ç¤ºè€Œå·²ï¼Œ</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™ä¹‹ç»™å­—ç¬¦ä¸²æ¥ä¸€å¥—å¢åˆ æ”¹æŸ¥æœåŠ¡</title>
      <link href="/2020/01/03/%E6%AD%A3%E5%88%99%E4%B9%8B%E7%BB%99%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9D%A5%E4%B8%80%E5%A5%97%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%9C%8D%E5%8A%A1/"/>
      <url>/2020/01/03/%E6%AD%A3%E5%88%99%E4%B9%8B%E7%BB%99%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9D%A5%E4%B8%80%E5%A5%97%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p><img src="https://image.gslb.dawnlab.me/2fb5e7025b9b0664bf98f9007c370b19.jpg" alt=""></p><p>æƒ³å­¦ä¹ æ­£åˆ™çš„æ“ä½œå—ï¼Ÿï¼Ÿé‚£å°±è¿›æ¥å§â€¦</p><a id="more"></a><h1 id="å¯¼è¯»"><a href="#å¯¼è¯»" class="headerlink" title="å¯¼è¯»"></a>å¯¼è¯»</h1><p>å—¨å’¯ï¼Œäº²çˆ±çš„è¯»è€…ä½ å¥½ï¼æ—¢ç„¶ä½ ç‚¹è¿›æ¥äº†ï¼Œé‚£ä¹ˆæƒ³å¿…ä½ ä¸€å®šå¯¹æ­£åˆ™æ„Ÿå…´è¶£å§ã€‚</p><p>å¦‚æœä½ å¯¹æ­£åˆ™å……æ»¡ç•æƒ§å¿ƒç†ï¼Œä¸æ‡‚ä¹Ÿä¸ç†è§£æ­£åˆ™ï¼Œæ²¡å…³ç³»ï¼Œå¾€ä¸‹çœ‹ï¼Œ</p><p>çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œç›¸ä¿¡ä½ ä¸€å®šä¼šå¯¹æ­£åˆ™å……æ»¡å…´è¶£ï¼Œå¹¶ä¸”ä¸å†ç•æƒ§ï¼Œæ¶ˆç­ææƒ§çš„æœ€å¥½åŠæ³•ï¼Œå°±æ˜¯é¢å¯¹ææƒ§ï¼ï¼</p><p>åŠ æ²¹ï¼ï¼è¯»å®Œå®ƒï¼Œç†è§£æ­£åˆ™æ“ä½œï¼Œç„¶åçˆ±ä¸Šæ­£åˆ™ï¼</p><blockquote><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯åŒ¹é…æ¨¡å¼ï¼Œè¦ä¹ˆåŒ¹é…å­—ç¬¦ï¼Œè¦ä¹ˆåŒ¹é…ä½ç½®ã€‚è¯·è®°ä½è¿™å¥è¯ã€‚</p><footer><strong>@è€å§š</strong><cite><a href="https://juejin.im/post/5965943ff265da6c30653879" target="_blank" rel="noopener">JSæ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰</a></cite></footer></blockquote><p>è€å§šå¯¹æ­£åˆ™çš„è¯„ä»·éå¸¸åˆ°ä½ï¼Œæˆ‘å¾ˆèµåŒï¼Œå¸Œæœ›ä½ èƒ½è®°ä½ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯åœ¨åŒ¹é…çš„åŸºç¡€ä¸Šåšçš„ç›¸å…³çš„æ“ä½œã€‚</p><p>å¦‚æœä½ æ²¡æœ‰æ­£åˆ™çš„åŸºç¡€ï¼Œè¯·ä¸è¦å®³æ€•ï¼Œè¿™ç¯‡æ–‡ç« ä¼šä¸€æ­¥ä¸€æ­¥çš„å¸¦ä½ äº†è§£æ­£åˆ™ç›¸å…³çš„æ“ä½œï¼Œæ¯ä¸ªæ“ä½œçš„æ¡ˆä¾‹ç›¸å¯¹ç®€å•æ˜“ç†è§£ï¼Œä½†æ˜¯å±•ç¤ºå‡ºäº†æ¯ä¸ªæ“ä½œçš„ä½œç”¨ã€‚åœ¨é˜…è¯»æ–‡ç« å‰ï¼Œè¯·ä»”ç»†çš„é˜…è¯»å‰ç½®çŸ¥è¯†ï¼Œäº†è§£ç›¸å…³apiçš„ä½œç”¨ã€‚</p><p>å¦‚æœä½ å­¦ä¹ è¿‡æ­£åˆ™ï¼Œå¯¹æ­£åˆ™æœ‰ä¸€å®šäº†è§£ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« éå¸¸é€‚åˆä½ ï¼Œè¿™ç¯‡æ–‡ç« å¯ä»¥åŠ æ·±ä½ å¯¹æ­£åˆ™ç”¨æ³•çš„ç†è§£ã€‚</p><p>å¦‚æœä½ æ˜¯æ­£åˆ™é«˜æ‰‹ï¼Œæ–‡ä¸­æœ‰å†™çš„ä¸å¯¹çš„å’Œå†™å¾—ä¸å¦¥å½“çš„ï¼Œä¹Ÿè¯·æŒ‡å‡ºé”™è¯¯ã€‚</p><p>æœ¬æ–‡ä¸æ¶‰åŠæ­£åˆ™è¡¨è¾¾å¼çš„ä¹¦å†™æ•™å­¦ï¼Œä½†æ˜¯å¹¶å½±å“ä½ å¯¹æ¯ä¸ªå¢åˆ æŸ¥æ”¹æ“ä½œçš„ç†è§£ã€‚å¦‚æœä½ æƒ³å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼çš„ä¹¦å†™ï¼Œåœ¨æ–‡ç« åé¢æˆ‘æœ‰æ¨èå­¦ä¹ æ­£åˆ™çš„ä¼˜ç§€æ–‡ç« ã€‚</p><p>ç›¸ä¿¡ä½ çœ‹è¿‡è¿™ç¯‡æ–‡ç« åï¼Œä¼šæé«˜ä½ å¯¹æ­£åˆ™çš„ç†è§£ä¸å­¦ä¹ æ­£åˆ™çš„å…´è¶£ã€‚åŠ æ²¹ï¼</p><h1 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h1><p>æ—¢ç„¶æ˜¯ç”¨æ­£åˆ™å¯¹å­—ç¬¦ä¸²çš„æ“ä½œï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å¾—éœ€è¦äº†è§£ç›¸å…³çš„æ–¹æ³•ï¼Œå¯¹å§ï¼Ÿï¼Ÿä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•å°±6ä¸ªï¼ˆçœŸçš„å¾ˆå°‘å¾ˆå®¹æ˜“ç†è§£ï¼ï¼ï¼‰ï¼šå¦‚æœä½ å¯¹ä¸‹é¢å…­ä¸ªæ–¹æ³•éå¸¸ç†Ÿæ‚‰äº†ï¼Œä½ å¯ä»¥ç›´æ¥ä»å‰ç½®çŸ¥è¯†çš„æ€»ç»“å¤„å¼€å§‹çœ‹ï¼ˆï¿£ï¸¶ï¿£ï¼‰â†—</p><figure class="highlight"><figcaption><span>ä¸æ­£åˆ™ç›¸å…³çš„6ä¸ªæ–¹æ³•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²å››ä¸ª</span></span><br><span class="line">String#search    // æŸ¥æ‰¾åŒ¹é…åˆ°å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œè¿”å›ä½ç½®index</span><br><span class="line">String#split     // ä»¥æ­£åˆ™åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²æˆªæ–­åŸå­—ç¬¦ä¸²ï¼Œè¿”å›æ•°ç»„</span><br><span class="line">String#match     // åŒ¹é…å­—ç¬¦ä¸²å¹¶è¿”å›ä¸€äº›ä¿¡æ¯</span><br><span class="line">String#replace   // å¯¹åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²è¿›è¡Œæ›¿æ¢ï¼Œè¿”å›ä¿®æ”¹åçš„å­—ç¬¦ä¸²</span><br><span class="line"><span class="comment">// æ­£åˆ™ä¸¤ä¸ª</span></span><br><span class="line">RegExp#test      // åŒ¹é…å­—ç¬¦ä¸²æ˜¯å¦æœ‰ç¬¦åˆæ­£åˆ™çš„éƒ¨åˆ†</span><br><span class="line">RegExp#exec      // åŒ¹é…å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ç›¸å…³ä¿¡æ¯</span><br></pre></td></tr></table></figure><h2 id="1-String-search"><a href="#1-String-search" class="headerlink" title="1.String#search"></a>1.String#search</h2><p>è¯­æ³•ï¼šstr.search(regexp)</p><p>å®šä¹‰ï¼šæ­£åˆ™å»åŒ¹é…å­—ç¬¦ä¸²ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå°±è¿”å›åŒ¹é…æˆåŠŸçš„ä½ç½®ï¼ŒåŒ¹é…å¤±è´¥å°±è¿”å›-1.</p><figure class="highlight js"><figcaption><span>search</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d/</span></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"abc123"</span></span><br><span class="line"><span class="built_in">console</span>.log( string.search(regex) )</span><br><span class="line"><span class="comment">// =&gt; 3</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> å½“ä¼ å…¥çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œä¼šæŠŠå­—ç¬¦ä¸²è½¬æˆæ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h2 id="2-String-split"><a href="#2-String-split" class="headerlink" title="2.String#split"></a>2.String#split</h2><p>è¯­æ³•ï¼šstr.split(separator, limit)</p><p>å®šä¹‰ï¼šsplit()æ–¹æ³•æŠŠåŸå­—ç¬¦ä¸²åˆ†å‰²æˆå­å­—ç¬¦ä¸²ç»„æˆæ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚</p><p>ä¸¤ä¸ªå‚æ•°å‡æ˜¯å¯é€‰çš„ï¼Œå…¶ä¸­ separator è¡¨ç¤ºåˆ†éš”ç¬¦ï¼Œå®ƒå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœå¿½ç•¥ separatorï¼Œåˆ™è¿”å›çš„æ•°ç»„åŒ…å«ä¸€ä¸ªç”±åŸå­—ç¬¦ä¸²ç»„æˆçš„å…ƒç´ ã€‚å¦‚æœ separator æ˜¯ä¸€ä¸ªç©ºä¸²ï¼Œåˆ™ str å°†ä¼šè¢«åˆ†å‰²æˆä¸€ä¸ªç”±åŸå­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„æˆçš„æ•°ç»„ã€‚limit è¡¨ç¤ºä»è¿”å›çš„æ•°ç»„ä¸­æˆªå–å‰ limit ä¸ªå…ƒç´ ï¼Œä»è€Œé™å®šè¿”å›çš„æ•°ç»„é•¿åº¦ã€‚</p><figure class="highlight js"><figcaption><span>split</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\D/</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"2017/06/26"</span>.split(regex) )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"2017.06.26"</span>.split(regex, <span class="number">2</span>) )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"2017-06-26"</span>.split(regex) )</span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "26"]</span></span><br><span class="line"><span class="comment">// =&gt; ["2017", "06"]</span></span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "26"]</span></span><br></pre></td></tr></table></figure><h2 id="3-String-match"><a href="#3-String-match" class="headerlink" title="3.String#match"></a>3.String#match</h2><p>è¯­æ³•ï¼šstr.match(regexp)</p><p>å®šä¹‰ï¼šæŸ¥æ‰¾å‡ºä¸æ­£åˆ™ç›¸åŒ¹é…çš„é¡¹ã€‚</p><p>è¿”å›å€¼ï¼š</p><ol><li>æ­£åˆ™çš„åŒ¹é…æ¨¡å¼ä¸ºå…¨å±€åŒ¹é…ï¼šè¿”å›åŒ¹é…çš„æ•°ç»„æˆ–åˆ™null</li><li>æ­£åˆ™çš„åŒ¹é…æ¨¡å¼ä¸æ˜¯ä¸ºå…¨å±€åŒ¹é…ï¼šè¿”å›åŒ¹é…åˆ°çš„é¡¹ï¼Œgroupsï¼šåˆ†ç»„ï¼Œindex:æ‰¾åˆ°ç»“æœçš„ç´¢å¼•,input:åŸå­—ç¬¦ä¸²</li></ol><figure class="highlight js"><figcaption><span>match</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"aa22bb313cc444ff"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d+/g</span></span><br><span class="line"><span class="keyword">var</span> reg1 = <span class="regexp">/(\d+)([a-z]+)(\d+)/</span></span><br><span class="line"><span class="built_in">console</span>.log( str.match( reg ) )</span><br><span class="line"><span class="built_in">console</span>.log( str.match( reg1 ) )</span><br><span class="line"><span class="comment">// =&gt; ["22", "313", "444"]</span></span><br><span class="line"><span class="comment">// =&gt; ["22bb313", "22", "bb", "313", index: 2, input: "aa22bb313cc444", groups: undefined]</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> å½“ä¼ å…¥çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œä¼šæŠŠå­—ç¬¦ä¸²è½¬æˆæ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h2 id="4-String-replace"><a href="#4-String-replace" class="headerlink" title="4.String#replace"></a>4.String#replace</h2><p>è¯­æ³•ï¼šstr.replace( regexp | substr, newSubStr | function )</p><p>å‚æ•°è¯´æ˜ï¼š</p><ol><li>regexp: ä¸€ä¸ª RegExp å¯¹è±¡. è¯¥æ­£åˆ™æ‰€åŒ¹é…çš„å†…å®¹ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°çš„è¿”å›å€¼æ›¿æ¢æ‰ã€‚</li><li>substr: ä¸€ä¸ªè¦è¢« newSubStr æ›¿æ¢çš„å­—ç¬¦ä¸².</li><li>newSubStr: æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„åŒ¹é…éƒ¨åˆ†. è¯¥å­—ç¬¦ä¸²ä¸­å¯ä»¥å†…æ’ä¸€äº›ç‰¹æ®Šçš„å˜é‡å.</li><li>function: ç”¨æ¥åˆ›å»ºæ–°å­å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œè¯¥å­å­—ç¬¦ä¸²ç”¨äºæ›¿æ¢ä¸ç»™å®šregexpæˆ–çš„åŒ¹é…é¡¹substrã€‚</li></ol><p>å‚æ•°functionçš„å‚æ•°è¯´æ˜ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ•´ä¸ªæ­£åˆ™æˆ–è€…å­—ç¬¦ä¸²åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ï¼Œ</li><li>ä¸­é—´çš„å‚æ•°ï¼šä¾æ¬¡ä¸ºæ­£åˆ™ä¸­åˆ†ç»„åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ï¼Œ</li><li>å€’æ•°ç¬¬äºŒä¸ªå‚æ•°ï¼šæ‰¾åˆ°ç»“æœçš„ç´¢å¼•</li><li>å€’æ•°ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåŸå­—ç¬¦ä¸²</li></ul><figure class="highlight js"><figcaption><span>str.replace( regexp, function )</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"aa22bb313cc444ff"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d+)(\w&#123;1&#125;)/g</span></span><br><span class="line">str = str.replace( reg, <span class="function"><span class="keyword">function</span>(<span class="params"> str, s1, s2, index, sour </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"å‚æ•°åˆ—è¡¨ï¼š"</span>, str, s1, s2, index, sour )</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="built_in">arguments</span> )</span><br><span class="line">    <span class="keyword">return</span> s1 + <span class="string">"---"</span> + s2</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log( str )</span><br></pre></td></tr></table></figure><p><img src="https://image.gslb.dawnlab.me/1ece30eabe0919fd6e5b157856349d48.png" alt=""></p><h2 id="5-RegExp-test"><a href="#5-RegExp-test" class="headerlink" title="5.RegExp#test"></a>5.RegExp#test</h2><p>è¯­æ³•ï¼šreg.test( str )</p><p>è¯´æ˜ï¼šæ­£åˆ™å»åŒ¹é…å­—ç¬¦ä¸²ï¼ŒåŒ¹é…æˆåŠŸï¼Œè¿”å›trueï¼ŒåŒ¹é…å¤±è´¥ï¼Œè¿”å›false</p><figure class="highlight js"><figcaption><span>reg.test()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d/</span></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"abc123"</span></span><br><span class="line"><span class="built_in">console</span>.log( regex.test(string) )</span><br><span class="line"><span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><h2 id="6-RegExp-exec"><a href="#6-RegExp-exec" class="headerlink" title="6.RegExp#exec"></a>6.RegExp#exec</h2><p>è¯­æ³•ï¼šreg.exec( str )</p><p>è¯´æ˜ï¼šexec() æ–¹æ³•åœ¨ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸²ä¸­æ‰§è¡Œä¸€ä¸ªæœç´¢åŒ¹é…ã€‚è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„æˆ– nullã€‚</p><figure class="highlight js"><figcaption><span>reg.exec( str )</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"aa22bb313cc444ff"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d+)(\w&#123;1&#125;)/g</span></span><br><span class="line"><span class="built_in">console</span>.log( reg.exec( str ))</span><br><span class="line"><span class="built_in">console</span>.log( reg.exec( str ))</span><br><span class="line"><span class="built_in">console</span>.log( reg.exec( str ))</span><br></pre></td></tr></table></figure><p><img src="https://image.gslb.dawnlab.me/50cc8a9a0d72e4a3c988a16f9cfd5b9b.png" alt=""></p><p><strong>æ³¨æ„</strong><br>å½“ä½¿ç”¨å…¨å±€æ¨¡å¼æ—¶ï¼Œexecå‡½æ•°ä¼šæŠŠè¿™æ¬¡åŒ¹é…åˆ°çš„ä½ç½®å­˜æ”¾åœ¨å½“å‰æ­£åˆ™regçš„lastIndexé‡Œé¢ï¼Œä¸‹æ¬¡è°ƒç”¨æ—¶ï¼Œä¼šä»è¿™æ¬¡çš„æœ€åä½ç½®å¼€å§‹æŸ¥æ‰¾ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä¸Šé¢ç®€å•çš„æ¡ˆä¾‹ä¸è¯´æ˜ï¼Œç›¸ä¿¡ä½ å·²ç»å¯ä»¥çœ‹å‡ºæˆ‘ä»¬è¦è¿›è¡Œçš„å¢åˆ æ”¹æŸ¥æ“ä½œåº”è¯¥ç”¨å“ªä¸ªæ–¹æ³•äº†å§ï¼Ÿæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼š</p><ul><li><p>å¢ï¼š6ä¸ªæ–¹æ³•ä¸­ï¼Œåªæœ‰replaceå¯ä»¥å¯¹åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥å½“æˆ‘ä»¬éœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­å¢åŠ å†…å®¹æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨replaceæ–¹æ³•ã€‚</p></li><li><p>åˆ ï¼š6ä¸ªæ–¹æ³•ä¸­ï¼Œsplitæ–¹æ³•ä»¥åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä¸ºæ–­ç‚¹æˆªæ–­å­—ç¬¦ä¸²è¿”å›æ•°ç»„ï¼Œreplaceä¹Ÿå¯ä»¥å¯¹åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥åˆ é™¤å¯ä»¥ä½¿ç”¨splitå’Œreplaceæ–¹æ³•ã€‚</p></li><li><p>æŸ¥ï¼š6ä¸ªæ–¹æ³•ä¸­ï¼Œé™¤äº†splitæ–¹æ³•ï¼Œéƒ½æˆ–å¤šæˆ–å°‘å¯ä»¥å¾—åˆ°ä¸€äº›åŒ¹é…åˆ°å­—ç¬¦ä¸²çš„ä¿¡æ¯ã€‚</p></li><li><p>æ”¹ï¼š6ä¸ªæ–¹æ³•ä¸­ï¼Œåªæœ‰replaceæ–¹æ³•å¯ä»¥æ“ä½œåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¿®æ”¹åªæœ‰ç”¨replaceæ–¹æ³•ã€‚</p></li></ul><p>å¥½äº†ï¼Œä¸‹é¢è¯¦ç»†çš„ä»‹ç»ä¸‹å„ç§æ“ä½œçš„è¯¦ç»†æƒ…å†µã€‚</p><h1 id="1-å¢"><a href="#1-å¢" class="headerlink" title="1.å¢"></a>1.å¢</h1><p>ç›¸ä¿¡ä½ ä¸€å®šé‡åˆ°è¿‡å¾€å­—ç¬¦ä¸²é‡Œé¢åŠ å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œä½ ä¸€èˆ¬æ˜¯æ€ä¹ˆæ“ä½œçš„å‘¢ï¼Ÿæˆ‘ä»¬æ¥åˆ†æä¸‹ï¼š</p><p>å½“å‘å­—ç¬¦ä¸²ä¸­æ·»åŠ å­—ç¬¦ä¸²æ—¶ï¼Œæœ‰ä¸¤ç§æ·»åŠ æƒ…å†µï¼Œä¸€ç§ï¼šæ·»åŠ åˆ°åŒ¹é…çš„å­—ç¬¦ä¸²å‰ï¼Œå¦ä¸€ç§æ˜¯ï¼šæ·»åŠ åˆ°åŒ¹é…çš„å­—ç¬¦ä¸²åé¢ã€‚</p><p>æ˜¯å§ï¼Ÿï¼Ÿå¥½ï¼Œå¼€å§‹æ“ä½œå§ï¼</p><h2 id="æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²å‰ï¼š"><a href="#æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²å‰ï¼š" class="headerlink" title="æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²å‰ï¼š"></a>æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²å‰ï¼š</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åˆ™ä½ç½®åŒ¹é…è¡¨è¾¾å¼ï¼š(?=p)ï¼Œæ­£å‘è‚¯å®šé¢„æŸ¥ï¼Œå…¶ä¸­pæ˜¯ä¸€ä¸ªå­æ¨¡å¼ï¼Œå³på‰é¢çš„ä½ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"hello"</span>.replace(<span class="regexp">/(?=ll)/g</span>, <span class="string">'#'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"><span class="comment">// =&gt; "he#llo"</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å‡½æ•°æ“ä½œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"hello"</span>.replace(<span class="regexp">/(?=ll)/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> str </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"#"</span> + str</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"><span class="comment">// =&gt; "he#llo"</span></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²åï¼š"><a href="#æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²åï¼š" class="headerlink" title="æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²åï¼š"></a>æ·»åŠ åˆ°åŒ¹é…å­—ç¬¦ä¸²åï¼š</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åˆ™ä½ç½®åŒ¹é…è¡¨è¾¾å¼ï¼š(?&lt;=p)ï¼Œåå‘è‚¯å®šé¢„æŸ¥ï¼Œå°±æ˜¯påé¢çš„ä½ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"hello"</span>.replace(<span class="regexp">/(?&lt;=ll)/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> str </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"#"</span> + str</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"><span class="comment">// =&gt; "hell#o"</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨replaceçš„å‡½æ•°æ“ä½œå®Œæˆã€‚</p><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><ul><li><p>åœ¨æ•´ä¸ªå­—ç¬¦ä¸²å‰å’Œåé¢æ·»åŠ ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"hello"</span>.replace(<span class="regexp">/^|$/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> str </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"#"</span> + str</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"><span class="comment">// =&gt; "#hello#"</span></span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ¯ä¸ªå•è¯çš„å‰åé¢æ·»åŠ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"hello world"</span>.replace(<span class="regexp">/^|$/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> str </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"#"</span> + str</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br><span class="line"><span class="comment">// =&gt; "#hello# #world#"</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="2-åˆ ï¼š"><a href="#2-åˆ ï¼š" class="headerlink" title="2.åˆ ï¼š"></a>2.åˆ ï¼š</h1><p>ç»è¿‡æˆ‘ä»¬å‰é¢çš„æ€»ç»“ï¼Œåˆ é™¤å¯ä»¥ä½¿ç”¨String.splitå’ŒString.replaceå®Œæˆã€‚</p><h2 id="String-splite"><a href="#String-splite" class="headerlink" title="String.splite"></a>String.splite</h2><p>å¯ä»¥çŸ¥é“ï¼Œä½¿ç”¨spliteæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ“ä½œåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨join()å‡½æ•°ï¼Œè¿”å›å­—ç¬¦ä¸²</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"aa22bb313cc444ff"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d+/</span></span><br><span class="line"><span class="built_in">console</span>.log( str.split( reg ).join(<span class="string">""</span>) )</span><br><span class="line"><span class="comment">// =&gt; "aabbccff"</span></span><br></pre></td></tr></table></figure><h2 id="String-replace"><a href="#String-replace" class="headerlink" title="String.replace"></a>String.replace</h2><p>ä½¿ç”¨replaceå°±éå¸¸ç®€å•äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç¬¬äºŒä¸ªå‚æ•°ä¼  <code>&quot;&quot;</code> ,ä¹Ÿå¯ä»¥ç”¨å‡½æ•°æ“ä½œï¼Œè¿”å› <code>&quot;&quot;</code>å³å¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"aa22bb313cc444ff"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d+/g</span>       <span class="comment">// å…¨å±€æ¨¡å¼ï¼Œä¸åŠ å…¨å±€æ¨¡å¼ï¼Œåªä¼šæ›¿æ¢ä¸€æ¬¡</span></span><br><span class="line">str = str.replace( reg, <span class="string">""</span> )</span><br><span class="line"><span class="built_in">console</span>.log( str )</span><br><span class="line"><span class="comment">// =&gt; "aabbccff"</span></span><br></pre></td></tr></table></figure><h1 id="3-æŸ¥"><a href="#3-æŸ¥" class="headerlink" title="3.æŸ¥"></a>3.æŸ¥</h1><p>æŸ¥æ‰¾å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç§æ˜¯éœ€è¦è¯¦ç»†ç»“æœçš„ï¼Œä¸€ç§æ˜¯ä¸éœ€è¦è¯¦ç»†ç»“æœçš„ã€‚</p><h2 id="ä¸éœ€è¦è¯¦ç»†ç»“æœ"><a href="#ä¸éœ€è¦è¯¦ç»†ç»“æœ" class="headerlink" title="ä¸éœ€è¦è¯¦ç»†ç»“æœ"></a>ä¸éœ€è¦è¯¦ç»†ç»“æœ</h2><p>ä¸éœ€è¦è¯¦ç»†ç»“æœå°±æ˜¯è¿”å› <code>true</code> å’Œ <code>false</code> å°±å¯ä»¥äº†ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨test</p><figure class="highlight js"><figcaption><span>éªŒè¯ç”µè¯å·ç </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^1[345789]\d&#123;9&#125;$/</span></span><br><span class="line"><span class="keyword">var</span> res = reg.test( <span class="string">"13882628333"</span> )</span><br><span class="line"><span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><h2 id="éœ€è¦è¯¦ç»†ç»“æœ"><a href="#éœ€è¦è¯¦ç»†ç»“æœ" class="headerlink" title="éœ€è¦è¯¦ç»†ç»“æœ"></a>éœ€è¦è¯¦ç»†ç»“æœ</h2><h3 id="ä½¿ç”¨String-match"><a href="#ä½¿ç”¨String-match" class="headerlink" title="ä½¿ç”¨String.match()"></a>ä½¿ç”¨String.match()</h3><figure class="highlight js"><figcaption><span>è·å–æ—¶é—´</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^([0-9]&#123;4&#125;)-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"2017-06-10"</span>.match( reg ) )</span><br><span class="line"><span class="comment">// =&gt; ["2017-06-10", "2017", "06", "10", index: 0, input: "2017-06-10", groups: undefined]</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>è·å–ç±»å</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/class=\"(.*)?"/</span></span><br><span class="line"><span class="keyword">var</span> string = <span class="string">'&lt;div id="container" class="main box"&gt;&lt;/div&gt;'</span></span><br><span class="line"><span class="built_in">console</span>.log( string.match( reg ))</span><br><span class="line"><span class="comment">// =&gt; ["class="main box"", "main box", index: 20, input: "&lt;div id="container" class="main box"&gt;&lt;/div&gt;", groups: undefined]</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>matchè·å–å…¨éƒ¨çš„é¢œè‰²ä»£ç ï¼ˆæ­£åˆ™ä½¿ç”¨gå…¨å±€åŒ¹é…æ¨¡å¼ï¼‰</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/#([0-9a-fA-F]&#123;6&#125;|[0-9a-fA-F]&#123;3&#125;)/g</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"#ffbbad #Fc01DF #FFF #ffE"</span></span><br><span class="line"><span class="built_in">console</span>.log( str.match( reg ) )</span><br><span class="line"><span class="comment">// =&gt; ["#ffbbad", "#Fc01DF", "#FFF", "#ffE"]</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨reg-exec"><a href="#ä½¿ç”¨reg-exec" class="headerlink" title="ä½¿ç”¨reg.exec()"></a>ä½¿ç”¨reg.exec()</h3><figure class="highlight js"><figcaption><span>è·å–æ—¶é—´</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^([0-9]&#123;4&#125;)-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/</span></span><br><span class="line"><span class="built_in">console</span>.log( reg.exec( <span class="string">"2017-06-10"</span> ) )</span><br><span class="line"><span class="comment">// =&gt; ["2017-06-10", "2017", "06", "10", index: 0, input: "2017-06-10", groups: undefined]</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>è·å–ç±»å</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/class=\"(.*)?"/</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'&lt;div id="container" class="main box"&gt;&lt;/div&gt;'</span></span><br><span class="line"><span class="built_in">console</span>.log( reg.exec( str ) )</span><br><span class="line"><span class="comment">// =&gt; ["class="main box"", "main box", index: 20, input: "&lt;div id="container" class="main box"&gt;&lt;/div&gt;", groups: undefined]</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><figcaption><span>execè·å–å…¨éƒ¨çš„é¢œè‰²ä»£ç ï¼ˆæ­£åˆ™ä½¿ç”¨gå…¨å±€åŒ¹é…æ¨¡å¼ï¼‰</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/#([0-9a-fA-F]&#123;6&#125;|[0-9a-fA-F]&#123;3&#125;)/g</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"#ffbbad #Fc01DF #FFF #ffE"</span></span><br><span class="line"><span class="keyword">var</span> arr = []</span><br><span class="line"><span class="keyword">var</span> temp</span><br><span class="line"><span class="keyword">while</span>( temp = reg.exec( str ) )&#123;</span><br><span class="line">    arr.push( temp[<span class="number">0</span>] )</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log( arr )</span><br></pre></td></tr></table></figure><h1 id="4-æ”¹"><a href="#4-æ”¹" class="headerlink" title="4.æ”¹"></a>4.æ”¹</h1><p>ç»è¿‡å‰é¢çš„ç»ˆç»“ï¼Œæˆ‘ä»¬çŸ¥é“åªæœ‰replaceå¯ä»¥è¿›è¡Œä¿®æ”¹æ“ä½œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"aa22bb313cc444ff"</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d+)(\w&#123;1&#125;)/g</span></span><br><span class="line">str = str.replace( reg, <span class="function"><span class="keyword">function</span>(<span class="params"> str, s1, s2, index, sour </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s1 + <span class="string">"---"</span> + s2</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log( str )</span><br><span class="line"><span class="comment">// =&gt; "aa22---bb313---cc444---ff"</span></span><br></pre></td></tr></table></figure><h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå°±æ˜¯æƒ³è®©è‡ªå·±æ¢³ç†ä¸‹æ­£åˆ™ç›¸å…³çš„apiä¸ç”¨æ³•ï¼ŒåŠ å¼ºä¸€ä¸‹è‡ªå·±å†™æ­£åˆ™çš„ä¿¡å¿ƒã€‚</p><p>çœ‹äº†è¿™ç¯‡æ–‡ç« ï¼Œä½ æ˜¯å¦å¯¹æ­£åˆ™åˆæœ‰äº†æ–°çš„ç†è§£å‘¢ï¼Ÿå¯¹è‡ªå·±å†™æ­£åˆ™æ˜¯å¦åˆå¢åŠ äº†å‡ åˆ†ä¿¡å¿ƒå‘¢ï¼Ÿ</p><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡ä¸»è¦è®²è¿°äº†æ­£åˆ™çš„ç›¸å…³ç”¨æ³•ï¼Œè€ƒè™‘åˆ°æ­£åˆ™æ–°æ‰‹ï¼Œæ‰€ä»¥æ¯ä¸ªæ“ä½œéƒ½åªæ˜¯åšçš„å¾ˆç®€å•çš„æ¡ˆä¾‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¤§éƒ½å¾ˆç®€å•ï¼Œä½†æ˜¯ï¼Œæˆ‘ç›¸ä¿¡ï¼Œçœ‹äº†æœ¬æ–‡ï¼Œä½ ä¼šæ›´æœ‰ä¿¡å¿ƒå»å­¦ä¹ æ­£åˆ™ã€‚</p><h2 id="å­¦ä¹ æ­£åˆ™ï¼š"><a href="#å­¦ä¹ æ­£åˆ™ï¼š" class="headerlink" title="å­¦ä¹ æ­£åˆ™ï¼š"></a>å­¦ä¹ æ­£åˆ™ï¼š</h2><p>å¦‚æœä½ æƒ³å­¦ä¹ æ­£åˆ™è¡¨è¾¾å¼çš„ä¹¦å†™ï¼Œæˆ‘è¿™é‡Œå°†æ¨èä¸€äº›å¥½çš„æ–‡ç« ç»™ä½ ï¼š</p><p><a href="https://juejin.im/post/5965943ff265da6c30653879#heading-0" target="_blank" rel="noopener">è€å§š-JSæ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰</a>     éå¸¸æ¨èçš„ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å°±æ˜¯çœ‹è¿™ç¯‡æ–‡ç« å­¦ä¹ çš„æ­£åˆ™ï¼Œé€‚åˆæœ‰ä¸€ç‚¹æ­£åˆ™åŸºç¡€çš„åŒå­¦</p><p><a href="https://juejin.im/post/59b5e50f51882519777c4815" target="_blank" rel="noopener">è€ƒæ‹‰æµ·å‰ç«¯å›¢é˜Ÿâ€”JS çš„æ­£åˆ™è¡¨è¾¾å¼</a>    æ¡ç†æ¸…æ™°â€“é€‚åˆåˆå­¦è€…å­¦ä¹ æ­£åˆ™çš„ä¹¦å†™</p><p>æ–‡ç« åœ¨ç²¾ä¸åœ¨å¤šï¼Œè¿™ä¸¤ç¯‡æ–‡ç« å¯¹åˆå­¦æ­£åˆ™çš„åŒå­¦éå¸¸å‹å¥½ï¼Œèƒ½å¼•å¯¼ä½ å†™å‡ºä¼˜ç§€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå†ç»“åˆè¿™ç¯‡æ–‡ç« å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„è¿ç”¨ï¼Œç›¸ä¿¡ä½ ä¼šå¯¹æ­£åˆ™çš„è¿ç”¨æ¸¸åˆƒæœ‰ä½™ã€‚</p><h1 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h1><p><a href="https://juejin.im/post/5965943ff265da6c30653879#heading-0" target="_blank" rel="noopener">è€å§š-JSæ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match" target="_blank" rel="noopener">MDN-String.prototype.match()</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace" target="_blank" rel="noopener">MDN-String.prototype.replace()</a></p><h2 id="å…±å‹‰"><a href="#å…±å‹‰" class="headerlink" title="å…±å‹‰"></a>å…±å‹‰</h2><p>å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸å›å…±å‹‰ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢å†æ¬¡å¯ç¨‹</title>
      <link href="/2019/12/02/%E5%8D%9A%E5%AE%A2%E5%86%8D%E6%AC%A1%E5%90%AF%E7%A8%8B/"/>
      <url>/2019/12/02/%E5%8D%9A%E5%AE%A2%E5%86%8D%E6%AC%A1%E5%90%AF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><img src="https://speed.moe/images/11283769e2d6035f894edb659848d4e1.jpg" alt=""></p><p>æ¢äº†åšå®¢çš„ä¸»é¢˜ï¼Œé¡µé¢ç¾è§‚å¤šäº†ï¼Œå¿ƒæƒ…ä¹Ÿèˆ’ç•…å¤šäº†ã€‚æ›´åŠ æœ‰åŠ¨åŠ›å†™åšå®¢äº†ï¼Œæ•´ç†å¥½å¿ƒæƒ…ï¼Œé‡æ–°å‡ºå‘ï¼ï¼</p><a id="more"></a><h1 id="ç¢ç¢å¿µ"><a href="#ç¢ç¢å¿µ" class="headerlink" title="ç¢ç¢å¿µ"></a>ç¢ç¢å¿µ</h1><p>ç»è¿‡ä¸€å¤©çš„é…ç½®ï¼Œåšå®¢æ­å»ºçš„å·®ä¸å¤šäº†ï¼Œ</p><p>æ•´ç†å¥½å¿ƒæƒ…ï¼ï¼ï¼</p><h1 id="é‡æ–°å‡ºå‘ï¼"><a href="#é‡æ–°å‡ºå‘ï¼" class="headerlink" title="é‡æ–°å‡ºå‘ï¼"></a>é‡æ–°å‡ºå‘ï¼</h1>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”Ÿæ´» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>drawing-boardç”»æ¿</title>
      <link href="/2019/08/14/drawing-board%E7%94%BB%E6%9D%BF/"/>
      <url>/2019/08/14/drawing-board%E7%94%BB%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p><img src="https://speed.moe/images/10b7a48eb201a8d8b55b879f1346bc08.png" alt=""><br>canvaså†™çš„ç”»æ¿</p><a id="more"></a><h1 id="å¿«åˆ°ç¢—é‡Œæ¥-ç”»æ¿"><a href="#å¿«åˆ°ç¢—é‡Œæ¥-ç”»æ¿" class="headerlink" title="å¿«åˆ°ç¢—é‡Œæ¥-ç”»æ¿"></a>å¿«åˆ°ç¢—é‡Œæ¥-ç”»æ¿</h1><hr><p>é¢„è§ˆï¼š<a href="https://curtaintan.github.io/drawing-board/" target="_blank" rel="noopener">ç‚¹å‡»</a></p><h2 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h2><hr><p>ä¹‹å‰å­¦å®Œcanvasï¼Œä¸€ç›´æƒ³è‡ªå·±å†™ä¸€ç‚¹ä¸œè¥¿ï¼Œè¿™ä¸¤å¤©ç»ˆäºå®Œæˆäº†ï¼Œå¼€å¿ƒï¼ï¼</p><h2 id="å®ŒæˆåŠŸèƒ½ï¼š"><a href="#å®ŒæˆåŠŸèƒ½ï¼š" class="headerlink" title="å®ŒæˆåŠŸèƒ½ï¼š"></a>å®ŒæˆåŠŸèƒ½ï¼š</h2><hr><ol><li>ç»˜ç”»</li><li>ç”»ç›´çº¿</li><li>æˆªå›¾</li><li>æ—‹è½¬</li><li>å¼¹å¹•</li><li>é¼ æ ‡è§¦ç¢°å¼¹å¹•ï¼Œå¼¹å¹•æ‚¬åœ</li><li>æ’¤é”€/å‰è¿›</li><li>è®¾ç½®ç”»ç¬”ä¿¡æ¯</li><li>å…¼å®¹ç§»åŠ¨ç«¯</li></ol><h3 id="åŠŸèƒ½æˆªå›¾ï¼š"><a href="#åŠŸèƒ½æˆªå›¾ï¼š" class="headerlink" title="åŠŸèƒ½æˆªå›¾ï¼š"></a>åŠŸèƒ½æˆªå›¾ï¼š</h3><p><fancybox><img src="https://speed.moe/images/049770423ee86256db618185a2e988f1.png" height="400px"  /></fancybox><br><fancybox><br>    <img src="https://speed.moe/image/byX3" height="300px" /><br>    <img src="https://speed.moe/images/be83f5d60c5876a922fdcc4f2f7a67e8.png" height="300px" /><br>    <img src="https://speed.moe/images/785defcb66b13d6054be52db20590def.png" height="300px" /><br></fancybox><br><fancybox><img src="https://speed.moe/images/5471de87336ed89bc3484110078ee2f8.png" height="400px" /></fancybox><br><fancybox><img src="https://speed.moe/images/3aba481fb121bc400470f7b39f946fc7.png" /></fancybox></p><h2 id="å‰ç½®è¯´æ˜"><a href="#å‰ç½®è¯´æ˜" class="headerlink" title="å‰ç½®è¯´æ˜"></a>å‰ç½®è¯´æ˜</h2><p>å¦‚æœä½ éœ€è¦å‚è€ƒä»£ç ï¼Œä½ éœ€è¦çœ‹ä¸‹è¿™é‡Œã€‚<br>å› ä¸ºåŠŸèƒ½å¤æ‚ï¼Œæ ‡å¿—çš„å˜é‡æœ‰æ¥è¿‘10ä¸ªä¹‹å¤šï¼Œä¸€ä¸‹å­å¯èƒ½å¾ˆéš¾çœ‹æ‡‚ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œè¯´æ˜ä¸‹æˆ‘çš„å¼€å‘æµç¨‹ï¼Œä»¥åŠå®šä¹‰å˜é‡çš„é¡ºåºã€‚</p><ol><li><strong>åŠŸèƒ½é¡ºåºï¼š</strong></li></ol><p>ç”»ç¬” â†’ å®šä¹‰ç”»ç¬”ä¿¡æ¯ â†’ æ©¡çš®æª« â†’ åˆ é™¤ â†’ æ’¤é”€/å‰è¿› â†’ ç›´çº¿ â†’ æˆªå›¾ â†’ å¼¹å¹•</p><ol start="2"><li><strong>å®šä¹‰å˜é‡çš„é¡ºåºï¼Œä»¥åŠä½œç”¨ï¼š</strong></li></ol><p>æ‰€æœ‰åŠŸèƒ½å˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isDown = <span class="literal">false</span>                  <span class="comment">// æ ‡å¿—é¼ æ ‡æ˜¯å¦æŒ‰ä¸‹      ç»˜å›¾ä¸‰æ­¥å’Œå‰ªåˆ‡ä¸‰æ­¥èµ°æ—¶ï¼Œåé¢ä¸¤ä¸ªäº‹ä»¶è§¦å‘çš„æ ‡å¿—</span></span><br><span class="line"><span class="keyword">var</span> points = []                     <span class="comment">// æ»‘åŠ¨æ—¶æ”¶é›†çš„ç‚¹       ç»˜ç”»ä¸‰æ­¥èµ°æ—¶ï¼Œä¸ºäº†æ—¶ç”»çš„çº¿å…‰æ»‘ï¼Œè®°å½•ç‚¹ï¼Œå‡çŸ­ç”»çº¿çš„è·ç¦»</span></span><br><span class="line"><span class="keyword">var</span> beginPoint = <span class="literal">null</span>               <span class="comment">// å¼€å§‹çš„ç‚¹            ç»˜ç”»ä¸‰æ­¥èµ°æ—¶ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">----è¿™ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œç”»çº¿ä¸‰äººç»„ï¼Œä¸ºäº†è®©ç”»çš„çº¿æ›´ä¸ºå…‰æ»‘</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> currentMenu = <span class="string">"icon-pen"</span>        <span class="comment">// åˆå§‹æŒ‰é’®            åº•éƒ¨æŒ‰é’®é€‰ä¸­çš„æŒ‰é’®</span></span><br><span class="line"><span class="keyword">var</span> currentColor = <span class="number">0</span>                <span class="comment">// åˆå§‹é¢œè‰²çš„index     é¢œè‰²é€‰æ‹©ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ª</span></span><br><span class="line"><span class="keyword">var</span> paintingModal = <span class="string">"pen"</span>           <span class="comment">// ç”»ç¬”æ¨¡å¼   line||pen||cut</span></span><br><span class="line"></span><br><span class="line">----æŒ‰é’®åŠŸèƒ½ä¸‰äººç»„ï¼ŒæŒ‰é’®é€‰ä¸­æ ‡è®°ï¼Œé¢œè‰²é€‰ä¸­ï¼Œç”»ç”»çš„æ¨¡å¼ï¼Œåˆ‡æ¢å‰é¢ç”»ç¬”å’Œç”»ç›´çº¿çš„æ¨¡å¼</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> lookModal = <span class="literal">false</span>               <span class="comment">// é¼ æ ‡æ¨¡å¼             æŒ‰é’®ç¬¬ä¸€ä¸ªåŠŸèƒ½ï¼Œæ­¤æ¨¡å¼ä¸èƒ½ç»˜ç”»ï¼Œåªèƒ½çœ‹</span></span><br><span class="line"><span class="keyword">var</span> cuted = <span class="literal">false</span>                   <span class="comment">// æ ‡è®°è£å‰ªæ—¶ï¼Œæ˜¯å¦å·²ç»è£å‰ª       è£å‰ªåï¼Œé˜²æ­¢åç»­çš„æ“ä½œå†æ¬¡è§¦å‘è£å‰ªæ“ä½œ </span></span><br><span class="line"></span><br><span class="line">----é¼ æ ‡æ¨¡å¼å’Œå‰ªåˆ‡æ¨¡å¼çš„å®šä¹‰</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> animationTimer = <span class="literal">null</span>           <span class="comment">// å¼¹å¹•åŠ¨ç”»çš„timer               åŠ¨ç”»çš„timer</span></span><br><span class="line"><span class="keyword">var</span> barrageArray = []               <span class="comment">// ä¿å­˜å¼¹å¹•çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> globalPoint = &#123; <span class="attr">x</span> : <span class="number">0</span>, <span class="attr">y</span> : <span class="number">0</span> &#125;  <span class="comment">// canvasä¸Šé¼ æ ‡çš„ç‚¹        ---å¼¹å¹•æ—¶ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line">----å¼¹å¹•ä¸‰äººç»„  globalPointç”¨æ¥æ ‡è®°é¼ æ ‡åœ¨canvasä¸­çš„åæ ‡ï¼Œç”¨äºåˆ¤æ–­é¼ æ ‡æ˜¯å¦è§¦ç¢°åˆ°å¼¹å¹•ä¸Š</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°æ’¤é”€å’Œé‡åšçš„åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">let</span> canvasHistory = []                    <span class="comment">// canvasæ•°æ®ï¼Œåœ¨æ¯æ¬¡ç”»çº¿å’Œæ©¡çš®æª«ä½¿ç”¨åä¿å­˜æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> step = <span class="number">0</span>                              <span class="comment">// ç”»ç¬”æŠ¬èµ·çš„æ­¥æ•°ï¼Œæ¸…ç©ºæ—¶ï¼Œæ­¥æ•°ä¹Ÿæ¸…ç©º</span></span><br><span class="line"></span><br><span class="line">----æ’¤é”€/å‰è¿›äºŒäººç»„ï¼Œç”»ç¬”æŠ¬èµ·æ—¶ï¼ŒæŠŠç”»å¸ƒä¿¡æ¯ç”¨getImageDataå­˜å…¥canvasHistoryï¼Œç”¨stepå®Œæˆå‰è¿›å’Œæ’¤é”€çš„åŠŸèƒ½</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> penAttibutes = &#123;                       <span class="comment">// ç”»ç¬”æ•°æ®ï¼Œ</span></span><br><span class="line">    width : <span class="number">2</span>,</span><br><span class="line">    lineCap : <span class="string">"round"</span>,</span><br><span class="line">    lineJoin : <span class="string">"round"</span>,</span><br><span class="line">    strokeStyle: <span class="string">"#000"</span>,</span><br><span class="line">    fillStyle: <span class="string">"#000"</span>,</span><br><span class="line">    globalCompositeOperation: <span class="string">"source-over"</span>,</span><br><span class="line">    globalAlpha : <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼€å‘ä¸­é‡åˆ°çš„éš¾ç‚¹ä¸é‡ç‚¹ä¸è§£å†³æ–¹æ¡ˆï¼š"><a href="#å¼€å‘ä¸­é‡åˆ°çš„éš¾ç‚¹ä¸é‡ç‚¹ä¸è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="å¼€å‘ä¸­é‡åˆ°çš„éš¾ç‚¹ä¸é‡ç‚¹ä¸è§£å†³æ–¹æ¡ˆï¼š"></a>å¼€å‘ä¸­é‡åˆ°çš„éš¾ç‚¹ä¸é‡ç‚¹ä¸è§£å†³æ–¹æ¡ˆï¼š</h2><ol><li>ä¿å­˜å†å²è®°å½•ä½¿ç”¨apiå¯¹æ¯”</li></ol><p>æˆ‘åœ¨å†™ä»£ç çš„æ—¶å€™æœ‰åšè¿‡å‚è€ƒ <strong><a href="https://juejin.im/post/5c7bf106e51d454b47558882" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a></strong>ï¼Œ<br>æ–‡ç« é‡Œç”¨æ˜¯canvas.toDataUrlçš„æ–¹å¼åšçš„æ•°æ®ä¿å­˜ï¼Œè¯„è®ºé‡Œè¯´è¿™ä¸ªæ•°æ®ä¿å­˜ä¸ç†æƒ³ï¼Œ<br>å…¶å®æˆ‘ä¸€å¼€å§‹çš„æ—¶å€™æƒ³çš„å°±æ˜¯ç”¨ctx.getImageDaataçš„æ–¹å¼æ¥åšçš„ï¼Œæˆ‘ä¹Ÿç”¨è¿™ä¸ªä¸¤ä¸ªapiåšäº†ä¸€ä¸ªå¯¹æ¯”ï¼š</p><p>ä»£ç ï¼š</p><img src="./image/savecode.png" /><p>ç»“æœï¼š</p><img src="./image/getImg.png" /><img src="./image/dataurl.png" /><p>å¯è§ï¼Œä½¿ç”¨getImageDataè·å–æ•°æ®æ˜¯æ—¶é—´æ˜¯éå¸¸çŸ­çš„ï¼Œå¹¶ä¸”è·å–åˆ°æ˜¯ç”»å¸ƒåƒç´ æ•°æ®ï¼Œ<br>åç»­å¯ä»¥ç›´æ¥è¿›è¡Œåƒç´ æ“ä½œï¼Œä»è€Œä¸ç”¨å†èŠ±æ—¶é—´å†å»è·å–ç”»å¸ƒä¿¡æ¯ï¼Œ<br>å…¶æ¬¡ï¼ŒgetImageDataè·å–åˆ°æ˜¯æ•°æ®æ˜¯æœ‰æ•°æ®ç»“æ„çš„ï¼Œè¿™æ ·åœ¨å†…å­˜é‡Œé¢ä¿å­˜ä¸‹æ¥å¯¹å†…å­˜æ›´åŠ å‹å¥½ï¼Œ<br>è€Œä½¿ç”¨toDataUrlæ–¹å¼ä¿å­˜ä¸‹æ¥çš„æ•°æ®æœ‰21ä¸‡è¡Œé‚£ä¹ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå¯¹å†…å­˜å¹¶ä¸å‹å¥½ã€‚</p><p>åé¢æˆ‘è¿˜åšäº†ä»–ä»¬ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šçš„æ—¶é—´å¯¹æ¯”ï¼Œä»–ä»¬çš„æ—¶é—´éƒ½åœ¨1mså†…ï¼Œåˆ°æ—¶æ¯æ¬¡putImageDataéƒ½è¦å¿«ä¸€ç‚¹ç‚¹ï¼Œä½†æ˜¯å¿«è¿™ä¸€ç‚¹æ—¶é—´çš„æ„ä¹‰å¹¶ä¸å¤§ã€‚</p><p>toDataUrlä¹Ÿæ˜¯æœ‰å¥½å¤„çš„ï¼Œå› ä¸ºè½¬ç½®å‡ºæ¥çš„æ˜¯base64çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä»–èƒ½å¤Ÿç›´æ¥ä½œä¸ºå›¾ç‰‡çš„srcå±æ€§ï¼Œè®©å›¾ç‰‡æ˜¾ç¤ºåˆ°é¡µé¢ã€‚</p><ol start="2"><li>ç”»ç›´çº¿</li></ol><p>å¦‚ä½•ç”»å‡ºä¸€æ¡ç›´çº¿ï¼Ÿï¼Ÿå½“æˆ‘åšäº†æ’¤é”€å’Œå‰è¿›çš„æ—¶å€™ï¼Œæˆ‘å°±æŠŠç”»æ¿æ•°æ®ç»™å­˜åˆ°canvasHistoryé‡Œé¢äº†ï¼Œ<br>è¿™é‡Œåˆšå¥½ç”¨åˆ°ï¼Œé¼ æ ‡ç§»åŠ¨æ˜¯æ—¶å€™ï¼Œå…ˆæ¸…ç©ºç”»å¸ƒï¼Œå†ç»˜åˆ¶ä¿å­˜åˆ°canvasHistoryé‡Œæœ€åé‚£ä¸ªæ•°æ®ï¼Œç„¶åå°±æ˜¯ç»˜å›¾ä¸‰æ­¥èµ°ï¼Œå°±å®Œæˆäº†ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>è¿™é‡Œä¸€å®šè¦ç»˜å›¾ä¸‰æ­¥èµ°ï¼Œæˆ–è€…åœ¨ç»˜åˆ¶å‰ä¸€å®šè¦ç”¨beginPath()é‡å¼€ä¸€æ¡è·¯å¾„ï¼Œå¦‚æœä¸é‡å¼€è·¯å¾„ï¼Œ<br>ç»˜åˆ¶æ—¶ï¼Œä¼šæŠŠå‰é¢çš„ç›´çº¿ä¸€åŒç»˜åˆ¶å‡ºæ¥ï¼Œå› ä¸ºä½ ä¸€ç›´æ˜¯ä¸€æ¡è·¯å¾„ï¼Œæ‰€ä»¥ä¸‹æ¬¡ç»˜åˆ¶æ—¶ï¼Œä¸Šæ¬¡çš„ç‚¹ä¹Ÿè¦ç»˜åˆ¶ä¸€éã€‚</p><ol start="3"><li><p>å›¾ç‰‡æ—‹è½¬</p><p> æ—‹è½¬å¾ˆç±»ä¼¼css3ï¼Œä½†æ˜¯ï¼Œcanvasçš„åŸºç‚¹å›ºå®šåœ¨å·¦ä¸Šè§’å¤„ï¼Œæ‰€ä»¥åœ¨æ—‹è½¬çš„æ—¶å€™ï¼Œéœ€è¦å…ˆç”¨translateç§»åŠ¨ç”»æ¿ï¼Œå¯ä»¥ç”»ä¸€ä¸‹å›¾ï¼Œ</p></li></ol><p>ä¸‹é¢æ˜¯æˆ‘ç”»çš„å›¾ï¼š</p><img src="./image/shiyitu.jpg" width="280px" /><pre><code>é—®é¢˜ï¼š å½“æˆ‘ç”»ç¬”æœ‰rotateå±æ€§çš„æ—¶å€™ï¼Œå½“å‰æ“ä½œçš„putImageDataä¸ä¼šæˆåŠŸï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆ-----</code></pre><ol start="4"><li><p>å¦‚ä½•ç”»å‡ºä¸€æ¡å…‰æ»‘çš„æ›²çº¿</p><p> ç”¨æ­£å¸¸çš„ç”»æ³•ç”»æ›²çº¿æ˜¯æ—¶å€™ï¼Œç”»å‡ºçš„æ›²çº¿ä¸å¤Ÿå…‰æ»‘ï¼Œ<br> æ‰€ä»¥æˆ‘å°±å‚è€ƒäº†è¿™ç¯‡æ–‡ç«  <strong><a href="https://segmentfault.com/a/1190000016672567" target="_blank" rel="noopener">canvasè¿›é˜¶â€”â€”å¦‚ä½•ç”»å‡ºå¹³æ»‘çš„æ›²çº¿?</a></strong><br> ï¼ˆå…¶å®æˆ‘ä¹Ÿæƒ³åˆ°äº†ç”¨äºŒæ¬¡è´å¡å°”æ›²çº¿ï¼Œåœ¨å¯»æ‰¾æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ—¶ï¼Œå°±æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•äº†ï¼Œè¿™ä¸ªæ–¹æ¡ˆæ›´ä¼˜ï¼‰ï¼ŒåŸç†å¯ä»¥çœ‹åŸæ–‡ã€‚</p></li><li><p>é¼ æ ‡è§¦æ‘¸å¼¹å¹•</p><p> å› ä¸ºcanvasæ˜¯æ— è®°å¿†æ€§çš„ï¼Œæ‰€ä»¥ï¼Œä½ ç”¨isPointPathå’ŒisPointStrokeæ—¶ï¼Œæ˜¯åœ¨å½“å‰ç»˜ç”»ä¸‹æ‰èƒ½æ£€æµ‹ã€‚<br> åœ¨ä½¿ç”¨isPointPathæ—¶ï¼Œä»–åªä¸pathè·¯å¾„æœ‰å…³ï¼Œæ„æ€å°±æ˜¯ï¼Œä½ ç”¨fillRectç›´æ¥ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢å›¾å½¢æ˜¯ä¸èƒ½æ£€æµ‹çš„ï¼Œ<br> åªèƒ½æ£€æµ‹rect()å’ŒpathToç­‰å›´èµ·æ¥çš„è·¯å¾„å†…ã€‚</p><p> æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘åšäº†ä¸€ä¸ªå¤–æŒ‚è·¯å¾„-ç”¨rect()æŠŠæ¯ä¸ªå¼¹å¹•æ¡†èµ·æ¥â€”â€”å“ˆå“ˆâ€“</p></li><li><p>ä½¿ç”¨drawImageé¡»çŸ¥ï¼š</p><p> drawImageæœ‰ä¸‰ç§ä¼ å‚æ–¹å¼ï¼Œä¸‰ç§æ–¹å¼å‡ºæ¥çš„æ•ˆæœï¼Œåœ¨ä¹¦å†™å‰å¯ä»¥å…ˆå‚è€ƒæ•ˆæœã€‚</p></li></ol><p>å‚è€ƒåœ°å€ï¼š<a href="https://www.canvasapi.cn/CanvasRenderingContext2D/drawImage" target="_blank" rel="noopener">CanvasRenderingContext2D.drawImage</a></p><ol start="7"><li><p>å…¼å®¹ç§»åŠ¨ç«¯</p><p> å½“åœ¨ç§»åŠ¨ç«¯æ—¶ï¼Œä¼šå­˜åœ¨ç§»åŠ¨ç«¯å»¶æ—¶300msçš„é—®é¢˜ï¼Œå› ä¸ºç§»åŠ¨ç«¯æœ‰åŒå‡»æ”¾å¤§åŠŸèƒ½ï¼Œæ•…å­˜åœ¨300msæ—¶é—´ã€‚</p><p> æˆ‘è§£å†³çš„æ–¹æ³•æ˜¯è®¾ç½®metaä¿¡æ¯ï¼Œç¦æ­¢ç¼©æ”¾ï¼Œå°±å¯ä»¥é˜²æ­¢300msé—®é¢˜</p> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi" /></li></ol><h2 id="ç»“è¯­ï¼š"><a href="#ç»“è¯­ï¼š" class="headerlink" title="ç»“è¯­ï¼š"></a>ç»“è¯­ï¼š</h2><p>è¿™ä¸ªé¡¹ç›®å¤§æ¦‚ç”¨äº†canvasçš„75%çš„apiï¼Œè¿˜æœ‰åƒç´ æ“ä½œå’Œæ¸å˜ç­‰apiè¿˜æ²¡ç”¨åˆ°ã€‚</p><p>ä¸çŸ¥é“æœ‰æ²¡æœ‰äººçœ‹å‘¢ï¼Œ</p><p>å¦‚æœä½ çœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚</p><p>æ…¢æ…¢æ¥ï¼Œå¥½å¥½å­¦ä¹ ï¼Œè¦åŠ æ²¹å“¦ï¼</p><p>ä¸å›å…±å‹‰ï¼ï¼</p><h3 id="å‚è€ƒææ–™ï¼š"><a href="#å‚è€ƒææ–™ï¼š" class="headerlink" title="å‚è€ƒææ–™ï¼š"></a>å‚è€ƒææ–™ï¼š</h3><ul><li><a href="https://juejin.im/post/5c7bf106e51d454b47558882" target="_blank" rel="noopener">æ‰‹æŠŠæ‰‹æ•™ä½ å®ç°ä¸€ä¸ªcanvasæ™ºç»˜ç”»æ¿</a></li></ul><p>å‚è€ƒäº†æ¥¼ä¸»é¡¹ç›®çš„æ ·å¼ï¼Œä½†æ˜¯æ‰€æœ‰æ ·å¼éƒ½æ˜¯æˆ‘è‡ªå·±å†™çš„ï¼Œå˜»å˜»ï¼Œå®ç°æ–¹å¼ä¸ä¸€æ ·å“¦ã€‚ã€‚</p><ul><li><a href="https://segmentfault.com/a/1190000016672567" target="_blank" rel="noopener">canvasè¿›é˜¶â€”â€”å¦‚ä½•ç”»å‡ºå¹³æ»‘çš„æ›²çº¿?</a></li></ul><p>ç”»ä¸€æ¡å…‰æ»‘çš„æ›²çº¿ï¼Œä¸é”™å“¦ã€‚</p><ul><li><a href="http://ghmagical.com/article/page/id/rf5VpT3YQPpN" target="_blank" rel="noopener">canvasåŠ¨ç”»åŒ…æ•™ä¸åŒ…ä¼š</a></li></ul><p>å¯ä»¥åœ¨è¿™é‡ŒæŠŠæ‰€æœ‰apiçš„æ„ä¹‰å’Œä½œç”¨å’Œå‚æ•°ç­‰éƒ½è®°ä¸‹æ¥â€”â€“</p><ul><li><a href="https://www.canvasapi.cn/" target="_blank" rel="noopener">Canvas APIä¸­æ–‡æ–‡æ¡£é¦–é¡µåœ°å›¾</a></li></ul><p>canvasæ‰€æœ‰çš„apiï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å»mdnçœ‹ï¼Œå…¶å®éƒ½ä¸€æ ·å•¦â€”</p>]]></content>
      
      
      <categories>
          
          <category> æˆ‘çš„ä½œå“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™å°è®°ï¼ˆä¸€ï¼‰ä¹‹apié€Ÿå­¦</title>
      <link href="/2019/08/14/%E6%AD%A3%E5%88%99%E5%B0%8F%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%E4%B9%8Bapi%E9%80%9F%E5%AD%A6/"/>
      <url>/2019/08/14/%E6%AD%A3%E5%88%99%E5%B0%8F%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%E4%B9%8Bapi%E9%80%9F%E5%AD%A6/</url>
      
        <content type="html"><![CDATA[<p><img src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3529936001,627965941&fm=26&gp=0.jpg" alt=""></p><p>ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œæ­£åˆ™æ˜¯å¿…é¡»è¦ä¼šçš„æŠ€èƒ½ä¹‹ä¸€ï¼Œæ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹å­¦ä¹ æ­£åˆ™å§ã€‚</p><p>è¿™æ˜¯æ­£åˆ™å­¦ä¹ çš„ç¬¬ä¸€ç¯‡æ–‡ç« â€¦</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ­£åˆ™ï¼Œç”¨ç®€çŸ­çš„ä¸€å¥è¯æ¦‚æ‹¬ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯åŒ¹é…æ¨¡å¼ï¼Œè¦ä¹ˆåŒ¹é…å­—ç¬¦ï¼Œè¦ä¹ˆåŒ¹é…ä½ç½®ã€‚</p><h2 id="æ­£åˆ™çš„æ–¹æ³•å’Œä¸æ­£åˆ™æœ‰å…³çš„æ–¹æ³•"><a href="#æ­£åˆ™çš„æ–¹æ³•å’Œä¸æ­£åˆ™æœ‰å…³çš„æ–¹æ³•" class="headerlink" title="æ­£åˆ™çš„æ–¹æ³•å’Œä¸æ­£åˆ™æœ‰å…³çš„æ–¹æ³•"></a>æ­£åˆ™çš„æ–¹æ³•å’Œä¸æ­£åˆ™æœ‰å…³çš„æ–¹æ³•</h2><p>å…±æœ‰6ä¸ªï¼Œå­—ç¬¦ä¸²å®ä¾‹4ä¸ªï¼Œæ­£åˆ™å®ä¾‹2ä¸ªï¼š</p><p>String#search</p><p>String#split</p><p>String#match</p><p>String#replace</p><p>RegExp#test</p><p>RegExp#exec</p><h3 id="1-search"><a href="#1-search" class="headerlink" title="1.search()"></a>1.search()</h3><p>å®šä¹‰ï¼šæ­£åˆ™å»åŒ¹é…å­—ç¬¦ä¸²ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå°±è¿”å›åŒ¹é…æˆåŠŸçš„ä½ç½®ï¼ŒåŒ¹é…å¤±è´¥å°±è¿”å›-1.</p><p>ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d/</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"abc123"</span>;</span><br><span class="line"><span class="built_in">console</span>.log( string.search(regex) );</span><br><span class="line"><span class="comment">// =&gt; 3</span></span><br></pre></td></tr></table></figure><h3 id="2-split"><a href="#2-split" class="headerlink" title="2.split"></a>2.split</h3><p>å®šä¹‰ï¼šsplit()æ–¹æ³•æŠŠåŸå­—ç¬¦ä¸²åˆ†å‰²æˆå­å­—ç¬¦ä¸²ç»„æˆæ•°ç»„ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚</p><p>è¯­æ³•ï¼šstr.split(separator, limit)</p><p>ä¸¤ä¸ªå‚æ•°å‡æ˜¯å¯é€‰çš„ï¼Œå…¶ä¸­ separator è¡¨ç¤ºåˆ†éš”ç¬¦ï¼Œå®ƒå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœå¿½ç•¥ separatorï¼Œåˆ™è¿”å›çš„æ•°ç»„åŒ…å«ä¸€ä¸ªç”±åŸå­—ç¬¦ä¸²ç»„æˆçš„å…ƒç´ ã€‚å¦‚æœ separator æ˜¯ä¸€ä¸ªç©ºä¸²ï¼Œåˆ™ str å°†ä¼šè¢«åˆ†å‰²æˆä¸€ä¸ªç”±åŸå­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„æˆçš„æ•°ç»„ã€‚limit è¡¨ç¤ºä»è¿”å›çš„æ•°ç»„ä¸­æˆªå–å‰ limit ä¸ªå…ƒç´ ï¼Œä»è€Œé™å®šè¿”å›çš„æ•°ç»„é•¿åº¦ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\D/</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"2017/06/26"</span>.split(regex) )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"2017.06.26"</span>.split(regex) )</span><br><span class="line"><span class="built_in">console</span>.log( <span class="string">"2017-06-26"</span>.split(regex) )</span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "26"]</span></span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "26"]</span></span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "26"]</span></span><br></pre></td></tr></table></figure><h3 id="3-match"><a href="#3-match" class="headerlink" title="3.match"></a>3.match</h3><p>å®šä¹‰ï¼šmatch() æ–¹æ³•ç”¨äºæµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦æ”¯æŒæŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™ï¼Œå³ä½¿ä¼ å…¥çš„æ˜¯éæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œå®ƒä¹Ÿä¼šéšå¼åœ°ä½¿ç”¨new RegExp(obj)å°†å…¶è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚</p><p>è¯­æ³•ï¼šstr.match(regexp)</p><p>è¯¥æ–¹æ³•è¿”å›åŒ…å«åŒ¹é…ç»“æœçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› null</p><p>åŒ¹é…åŸåˆ™ï¼š<br>    åŒ¹é…æˆåŠŸå°±ä¼šç»“æŸï¼Œå¦‚æœæƒ³ç»§ç»­å…¨éƒ¨åŒ¹é…ï¼ŒåŠ æ ‡è¯†g</p><p><strong>æè¿°</strong></p><ul><li><p>è‹¥æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰ g æ ‡å¿—ï¼Œåˆ™è¿”å›åŒ RegExp.exec(str) ç›¸åŒçš„ç»“æœã€‚è€Œä¸”è¿”å›çš„æ•°ç»„æ‹¥æœ‰ä¸€ä¸ªé¢å¤–çš„ input å±æ€§ï¼Œè¯¥å±æ€§åŒ…å«åŸå§‹å­—ç¬¦ä¸²ï¼Œå¦å¤–è¯¥æ•°ç»„è¿˜æ‹¥æœ‰ä¸€ä¸ª index å±æ€§ï¼Œè¯¥å±æ€§è¡¨ç¤ºåŒ¹é…å­—ç¬¦ä¸²åœ¨åŸå­—ç¬¦ä¸²ä¸­ç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰ã€‚</p></li><li><p>è‹¥æ­£åˆ™è¡¨è¾¾å¼åŒ…å« g æ ‡å¿—ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…ç»“æœçš„æ•°ç»„ï¼Œæ²¡æœ‰åŒ¹é…åˆ°åˆ™è¿”å› nullã€‚</p></li></ul><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"2017-06-26"</span>;</span><br><span class="line"><span class="built_in">console</span>.log( string.match(regex) );</span><br><span class="line"><span class="comment">// =&gt;["2017-06-26", "2017", "06", "26", index: 0, input: "2017-06-26"]</span></span><br></pre></td></tr></table></figure><h3 id="4-replace"><a href="#4-replace" class="headerlink" title="4.replace"></a>4.replace</h3><p>è¯­æ³•ï¼šstr.replace( regexp | substr, newSubStr | function[, flags] )</p><p>å‚æ•°ï¼š</p><ul><li>regexp: ä¸€ä¸ª RegExp å¯¹è±¡. è¯¥æ­£åˆ™æ‰€åŒ¹é…çš„å†…å®¹ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°çš„è¿”å›å€¼æ›¿æ¢æ‰ã€‚</li><li>substr: ä¸€ä¸ªè¦è¢« newSubStr æ›¿æ¢çš„å­—ç¬¦ä¸².</li><li>newSubStr: æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„åŒ¹é…éƒ¨åˆ†. è¯¥å­—ç¬¦ä¸²ä¸­å¯ä»¥å†…æ’ä¸€äº›ç‰¹æ®Šçš„å˜é‡å.</li><li>function: ä¸€ä¸ªç”¨æ¥åˆ›å»ºæ–°å­å­—ç¬¦ä¸²çš„å‡½æ•°, è¯¥å‡½æ•°çš„è¿”å›å€¼å°†æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åŒ¹é…åˆ°çš„ç»“æœ. è¯¥å‡½æ•°çš„å‚æ•°æ-è¿°è¯·å‚è€ƒ æŒ‡å®šä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•° å°èŠ‚.</li><li>flags: æ³¨æ„ï¼šflags å‚æ•°åœ¨ v8 å†…æ ¸ï¼ˆChrome and NodeJsï¼‰ä¸­ä¸èµ·ä½œç”¨. æ–¹æ³•ä¸­ä½¿ç”¨ flags å‚æ•°ä¸æ˜¯ç¬¦åˆæ ‡å‡†çš„å¹¶ä¸”ä¸èµæˆè¿™æ ·åš.</li></ul><p><strong>replaceåé¢å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« æ€»ç»“</strong></p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"2017-06-26"</span>;</span><br><span class="line"><span class="keyword">var</span> date = [];</span><br><span class="line">string.replace(regex, <span class="function"><span class="keyword">function</span>(<span class="params">match, year, month, day</span>) </span>&#123;</span><br><span class="line">date.push(year, month, day);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(date);</span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "26"]</span></span><br></pre></td></tr></table></figure><h3 id="5-test"><a href="#5-test" class="headerlink" title="5.test"></a>5.test</h3><p>è¯´æ˜ï¼šæ­£åˆ™å»åŒ¹é…å­—ç¬¦ä¸²ï¼ŒåŒ¹é…æˆåŠŸï¼Œè¿”å›trueï¼ŒåŒ¹é…å¤±è´¥ï¼Œè¿”å›false</p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d/</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"abc123"</span>;</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(string) );</span><br><span class="line"><span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="6-exec"><a href="#6-exec" class="headerlink" title="6.exec"></a>6.exec</h3><p>è¯´æ˜ï¼šexec() æ–¹æ³•åœ¨ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸²ä¸­æ‰§è¡Œä¸€ä¸ªæœç´¢åŒ¹é…ã€‚è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„æˆ– nullã€‚</p><p>è¿™ä¸ªæ–¹æ³•å¾ˆç±»ä¼¼matchæ–¹æ³•ã€‚</p><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/^(\d&#123;4&#125;)\D(\d&#123;2&#125;)\D(\d&#123;2&#125;)$/</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"2017-06-26"</span>;</span><br><span class="line"><span class="built_in">console</span>.log( regex.exec(string) );</span><br><span class="line"><span class="comment">// =&gt;["2017-06-26", "2017", "06", "26", index: 0, input: "2017-06-26"]</span></span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³APIæ³¨æ„è¦ç‚¹"><a href="#ç›¸å…³APIæ³¨æ„è¦ç‚¹" class="headerlink" title="ç›¸å…³APIæ³¨æ„è¦ç‚¹-"></a>ç›¸å…³APIæ³¨æ„è¦ç‚¹-</h2><h3 id="1-searchå’Œmatchçš„å‚æ•°é—®é¢˜"><a href="#1-searchå’Œmatchçš„å‚æ•°é—®é¢˜" class="headerlink" title="1 searchå’Œmatchçš„å‚æ•°é—®é¢˜"></a>1 searchå’Œmatchçš„å‚æ•°é—®é¢˜</h3><p>æˆ‘ä»¬çŸ¥é“å­—ç¬¦ä¸²å®ä¾‹çš„é‚£4ä¸ªæ–¹æ³•å‚æ•°éƒ½æ”¯æŒæ­£åˆ™å’Œå­—ç¬¦ä¸²ã€‚</p><p>ä½†searchå’Œmatchï¼Œä¼šæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­£åˆ™çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">"2017.06.27"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( string.search(<span class="string">"."</span>) );</span><br><span class="line"><span class="comment">// =&gt; 0</span></span><br><span class="line"><span class="comment">//éœ€è¦ä¿®æ”¹æˆä¸‹åˆ—å½¢å¼ä¹‹ä¸€</span></span><br><span class="line"><span class="built_in">console</span>.log( string.search(<span class="string">"\\."</span>) );</span><br><span class="line"><span class="built_in">console</span>.log( string.search(<span class="regexp">/\./</span>) );</span><br><span class="line"><span class="comment">// =&gt; 4</span></span><br><span class="line"><span class="comment">// =&gt; 4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( string.match(<span class="string">"."</span>) );</span><br><span class="line"><span class="comment">// =&gt; ["2", index: 0, input: "2017.06.27"]</span></span><br><span class="line"><span class="comment">//éœ€è¦ä¿®æ”¹æˆä¸‹åˆ—å½¢å¼ä¹‹ä¸€</span></span><br><span class="line"><span class="built_in">console</span>.log( string.match(<span class="string">"\\."</span>) );</span><br><span class="line"><span class="built_in">console</span>.log( string.match(<span class="regexp">/\./</span>) );</span><br><span class="line"><span class="comment">// =&gt; [".", index: 4, input: "2017.06.27"]</span></span><br><span class="line"><span class="comment">// =&gt; [".", index: 4, input: "2017.06.27"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( string.split(<span class="string">"."</span>) );</span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "27"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( string.replace(<span class="string">"."</span>, <span class="string">"/"</span>) );</span><br><span class="line"><span class="comment">// =&gt; "2017/06.27"</span></span><br></pre></td></tr></table></figure><h3 id="2-matchè¿”å›ç»“æœçš„æ ¼å¼é—®é¢˜"><a href="#2-matchè¿”å›ç»“æœçš„æ ¼å¼é—®é¢˜" class="headerlink" title="2 matchè¿”å›ç»“æœçš„æ ¼å¼é—®é¢˜"></a>2 matchè¿”å›ç»“æœçš„æ ¼å¼é—®é¢˜</h3><p>matchè¿”å›ç»“æœçš„æ ¼å¼ï¼Œä¸æ­£åˆ™å¯¹è±¡æ˜¯å¦æœ‰ä¿®é¥°ç¬¦gæœ‰å…³ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">"2017.06.27"</span>;</span><br><span class="line"><span class="keyword">var</span> regex1 = <span class="regexp">/\b(\d+)\b/</span>;</span><br><span class="line"><span class="keyword">var</span> regex2 = <span class="regexp">/\b(\d+)\b/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log( string.match(regex1) );</span><br><span class="line"><span class="built_in">console</span>.log( string.match(regex2) );</span><br><span class="line"><span class="comment">// =&gt; ["2017", "2017", index: 0, input: "2017.06.27"]</span></span><br><span class="line"><span class="comment">// =&gt; ["2017", "06", "27"]</span></span><br></pre></td></tr></table></figure><p>æ²¡æœ‰gï¼Œè¿”å›çš„æ˜¯æ ‡å‡†åŒ¹é…æ ¼å¼ï¼Œå³ï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ•´ä½“åŒ¹é…çš„å†…å®¹ï¼Œæ¥ä¸‹æ¥æ˜¯åˆ†ç»„æ•è·çš„å†…å®¹ï¼Œç„¶åæ˜¯æ•´ä½“åŒ¹é…çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼Œæœ€åæ˜¯è¾“å…¥çš„ç›®æ ‡å­—ç¬¦ä¸²ã€‚</p><p>æœ‰gï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰åŒ¹é…çš„å†…å®¹ã€‚</p><h3 id="3-execæ¯”matchæ›´å¼ºå¤§"><a href="#3-execæ¯”matchæ›´å¼ºå¤§" class="headerlink" title="3 execæ¯”matchæ›´å¼ºå¤§"></a>3 execæ¯”matchæ›´å¼ºå¤§</h3><p>å½“æ­£åˆ™æ²¡æœ‰gæ—¶ï¼Œä½¿ç”¨matchè¿”å›çš„ä¿¡æ¯æ¯”è¾ƒå¤šã€‚ä½†æ˜¯æœ‰gåï¼Œå°±æ²¡æœ‰å…³é”®çš„ä¿¡æ¯indexäº†ã€‚</p><p>è€Œexecæ–¹æ³•å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒèƒ½æ¥ç€ä¸Šä¸€æ¬¡åŒ¹é…åç»§ç»­åŒ¹é…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">"2017.06.27"</span>;</span><br><span class="line"><span class="keyword">var</span> regex2 = <span class="regexp">/\b(\d+)\b/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log( regex2.exec(string) );</span><br><span class="line"><span class="built_in">console</span>.log( regex2.lastIndex);</span><br><span class="line"><span class="built_in">console</span>.log( regex2.exec(string) );</span><br><span class="line"><span class="built_in">console</span>.log( regex2.lastIndex);</span><br><span class="line"><span class="built_in">console</span>.log( regex2.exec(string) );</span><br><span class="line"><span class="built_in">console</span>.log( regex2.lastIndex);</span><br><span class="line"><span class="built_in">console</span>.log( regex2.exec(string) );</span><br><span class="line"><span class="built_in">console</span>.log( regex2.lastIndex);</span><br><span class="line"><span class="comment">// =&gt; ["2017", "2017", index: 0, input: "2017.06.27"]</span></span><br><span class="line"><span class="comment">// =&gt; 4</span></span><br><span class="line"><span class="comment">// =&gt; ["06", "06", index: 5, input: "2017.06.27"]</span></span><br><span class="line"><span class="comment">// =&gt; 7</span></span><br><span class="line"><span class="comment">// =&gt; ["27", "27", index: 8, input: "2017.06.27"]</span></span><br><span class="line"><span class="comment">// =&gt; 10</span></span><br><span class="line"><span class="comment">// =&gt; null</span></span><br><span class="line"><span class="comment">// =&gt; 0</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­æ­£åˆ™å®ä¾‹lastIndexå±æ€§ï¼Œè¡¨ç¤ºä¸‹ä¸€æ¬¡åŒ¹é…å¼€å§‹çš„ä½ç½®ã€‚</p><p>æ¯”å¦‚ç¬¬ä¸€æ¬¡åŒ¹é…äº†â€œ2017â€ï¼Œå¼€å§‹ä¸‹æ ‡æ˜¯0ï¼Œå…±4ä¸ªå­—ç¬¦ï¼Œå› æ­¤è¿™æ¬¡åŒ¹é…ç»“æŸçš„ä½ç½®æ˜¯3ï¼Œä¸‹ä¸€æ¬¡å¼€å§‹åŒ¹é…çš„ä½ç½®æ˜¯4ã€‚</p><p>ä»ä¸Šè¿°ä»£ç çœ‹å‡ºï¼Œåœ¨ä½¿ç”¨execæ—¶ï¼Œç»å¸¸éœ€è¦é…åˆä½¿ç”¨whileå¾ªç¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">"2017.06.27"</span>;</span><br><span class="line"><span class="keyword">var</span> regex2 = <span class="regexp">/\b(\d+)\b/g</span>;</span><br><span class="line"><span class="keyword">var</span> result;</span><br><span class="line"><span class="keyword">while</span> ( result = regex2.exec(string) ) &#123;</span><br><span class="line"><span class="built_in">console</span>.log( result, regex2.lastIndex );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// =&gt; ["2017", "2017", index: 0, input: "2017.06.27"] 4</span></span><br><span class="line"><span class="comment">// =&gt; ["06", "06", index: 5, input: "2017.06.27"] 7</span></span><br><span class="line"><span class="comment">// =&gt; ["27", "27", index: 8, input: "2017.06.27"] 10</span></span><br></pre></td></tr></table></figure><h3 id="4-ä¿®é¥°ç¬¦gï¼Œå¯¹exexå’Œtestçš„å½±å“"><a href="#4-ä¿®é¥°ç¬¦gï¼Œå¯¹exexå’Œtestçš„å½±å“" class="headerlink" title="4 ä¿®é¥°ç¬¦gï¼Œå¯¹exexå’Œtestçš„å½±å“"></a>4 ä¿®é¥°ç¬¦gï¼Œå¯¹exexå’Œtestçš„å½±å“</h3><p>ä¸Šé¢æåˆ°äº†æ­£åˆ™å®ä¾‹çš„lastIndexå±æ€§ï¼Œè¡¨ç¤ºå°è¯•åŒ¹é…æ—¶ï¼Œä»å­—ç¬¦ä¸²çš„lastIndexä½å¼€å§‹å»åŒ¹é…ã€‚</p><p>å­—ç¬¦ä¸²çš„å››ä¸ªæ–¹æ³•ï¼Œæ¯æ¬¡åŒ¹é…æ—¶ï¼Œéƒ½æ˜¯ä»0å¼€å§‹çš„ï¼Œå³lastIndexå±æ€§å§‹ç»ˆä¸å˜ã€‚</p><p>è€Œæ­£åˆ™å®ä¾‹çš„ä¸¤ä¸ªæ–¹æ³•execã€testï¼Œå½“æ­£åˆ™æ˜¯å…¨å±€åŒ¹é…æ—¶ï¼Œæ¯ä¸€æ¬¡åŒ¹é…å®Œæˆåï¼Œéƒ½ä¼šä¿®æ”¹lastIndexã€‚ä¸‹é¢è®©æˆ‘ä»¬ä»¥testä¸ºä¾‹ï¼Œçœ‹çœ‹ä½ æ˜¯å¦ä¼šè¿·ç³Šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/a/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"a"</span>), regex.lastIndex );</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"aba"</span>), regex.lastIndex );</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"ababc"</span>), regex.lastIndex );</span><br><span class="line"><span class="comment">// =&gt; true 1</span></span><br><span class="line"><span class="comment">// =&gt; true 3</span></span><br><span class="line"><span class="comment">// =&gt; false 0</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸Šé¢ä»£ç ä¸­çš„ç¬¬ä¸‰æ¬¡è°ƒç”¨testï¼Œå› ä¸ºè¿™ä¸€æ¬¡å°è¯•åŒ¹é…ï¼Œå¼€å§‹ä»ä¸‹æ ‡lastIndexå³3ä½ç½®å¤„å¼€å§‹æŸ¥æ‰¾ï¼Œè‡ªç„¶å°±æ‰¾ä¸åˆ°äº†ã€‚</p><p>å¦‚æœæ²¡æœ‰gï¼Œè‡ªç„¶éƒ½æ˜¯ä»å­—ç¬¦ä¸²ç¬¬0ä¸ªå­—ç¬¦å¤„å¼€å§‹å°è¯•åŒ¹é…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/a/</span>;</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"a"</span>), regex.lastIndex );</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"aba"</span>), regex.lastIndex );</span><br><span class="line"><span class="built_in">console</span>.log( regex.test(<span class="string">"ababc"</span>), regex.lastIndex );</span><br><span class="line"><span class="comment">// =&gt; true 0</span></span><br><span class="line"><span class="comment">// =&gt; true 0</span></span><br><span class="line"><span class="comment">// =&gt; true 0</span></span><br></pre></td></tr></table></figure><h3 id="5-testæ•´ä½“åŒ¹é…æ—¶éœ€è¦ä½¿ç”¨-å’Œ"><a href="#5-testæ•´ä½“åŒ¹é…æ—¶éœ€è¦ä½¿ç”¨-å’Œ" class="headerlink" title="5 testæ•´ä½“åŒ¹é…æ—¶éœ€è¦ä½¿ç”¨^å’Œ$"></a>5 testæ•´ä½“åŒ¹é…æ—¶éœ€è¦ä½¿ç”¨^å’Œ$</h3><p>è¿™ä¸ªç›¸å¯¹å®¹æ˜“ç†è§£ï¼Œå› ä¸ºtestæ˜¯çœ‹ç›®æ ‡å­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰å­ä¸²åŒ¹é…æ­£åˆ™ï¼Œå³æœ‰éƒ¨åˆ†åŒ¹é…å³å¯ã€‚</p><p>å¦‚æœï¼Œè¦æ•´ä½“åŒ¹é…ï¼Œæ­£åˆ™å‰åéœ€è¦æ·»åŠ å¼€å¤´å’Œç»“å°¾ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log( <span class="regexp">/123/</span>.test(<span class="string">"a123b"</span>) );</span><br><span class="line"><span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="regexp">/^123$/</span>.test(<span class="string">"a123b"</span>) );</span><br><span class="line"><span class="comment">// =&gt; false</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="regexp">/^123$/</span>.test(<span class="string">"123"</span>) );</span><br><span class="line"><span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure><h3 id="6-splitç›¸å…³æ³¨æ„äº‹é¡¹"><a href="#6-splitç›¸å…³æ³¨æ„äº‹é¡¹" class="headerlink" title="6 splitç›¸å…³æ³¨æ„äº‹é¡¹"></a>6 splitç›¸å…³æ³¨æ„äº‹é¡¹</h3><p>splitæ–¹æ³•çœ‹èµ·æ¥ä¸èµ·çœ¼ï¼Œä½†è¦æ³¨æ„çš„åœ°æ–¹æœ‰ä¸¤ä¸ªçš„ã€‚</p><p>ç¬¬ä¸€ï¼Œå®ƒå¯ä»¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºç»“æœæ•°ç»„çš„æœ€å¤§é•¿åº¦ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">"html,css,javascript"</span>;</span><br><span class="line"><span class="built_in">console</span>.log( string.split(<span class="regexp">/,/</span>, <span class="number">2</span>) );</span><br><span class="line"><span class="comment">// =&gt;["html", "css"]</span></span><br></pre></td></tr></table></figure><h3 id="7-replaceæ˜¯å¾ˆå¼ºå¤§çš„"><a href="#7-replaceæ˜¯å¾ˆå¼ºå¤§çš„" class="headerlink" title="7 replaceæ˜¯å¾ˆå¼ºå¤§çš„"></a>7 replaceæ˜¯å¾ˆå¼ºå¤§çš„</h3><hr><p>ã€ŠJavaScriptæƒå¨æŒ‡å—ã€‹è®¤ä¸ºexecæ˜¯è¿™6ä¸ªAPIä¸­æœ€å¼ºå¤§çš„ï¼Œè€Œæˆ‘å§‹ç»ˆè®¤ä¸ºreplaceæ‰æ˜¯æœ€å¼ºå¤§çš„ã€‚</p><p>å› ä¸ºå®ƒä¹Ÿèƒ½æ‹¿åˆ°è¯¥æ‹¿åˆ°çš„ä¿¡æ¯ï¼Œç„¶åå¯ä»¥å‡å€Ÿæ›¿æ¢ä¹‹åï¼Œåšäº›å…¶ä»–äº‹æƒ…ã€‚</p><p>æ€»ä½“æ¥è¯´replaceæœ‰ä¸¤ç§ä½¿ç”¨å½¢å¼ï¼Œè¿™æ˜¯å› ä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ã€‚å½“ç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œå¦‚ä¸‹çš„å­—ç¬¦æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼š</p><pre><code>$1,$2,...,$99 åŒ¹é…ç¬¬1~99ä¸ªåˆ†ç»„é‡Œæ•è·çš„æ–‡æœ¬$&amp; åŒ¹é…åˆ°çš„å­ä¸²æ–‡æœ¬$` åŒ¹é…åˆ°çš„å­ä¸²çš„å·¦è¾¹æ–‡æœ¬ $&apos; åŒ¹é…åˆ°çš„å­ä¸²çš„å³è¾¹æ–‡æœ¬$$ ç¾å…ƒç¬¦å·</code></pre><p>ä¾‹å¦‚ï¼ŒæŠŠâ€2,3,5â€ï¼Œå˜æˆâ€5=2+3â€ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"2,3,5"</span>.replace(<span class="regexp">/(\d+),(\d+),(\d+)/</span>, <span class="string">"$3=$1+$2"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">// =&gt; "5=2+3"</span></span><br></pre></td></tr></table></figure><p>åˆä¾‹å¦‚ï¼ŒæŠŠâ€2,3,5â€ï¼Œå˜æˆâ€222,333,555â€:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"2,3,5"</span>.replace(<span class="regexp">/(\d+)/g</span>, <span class="string">"$&amp;$&amp;$&amp;"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">// =&gt; "222,333,555"</span></span><br></pre></td></tr></table></figure><p>å†ä¾‹å¦‚ï¼ŒæŠŠâ€2+3=5â€ï¼Œå˜æˆâ€2+3=2+3=5=5â€:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="string">"2+3=5"</span>.replace(<span class="regexp">/=/</span>, <span class="string">"$&amp;$`$&amp;$'$&amp;"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">// =&gt; "2+3=2+3=5=5"</span></span><br></pre></td></tr></table></figure><p>å½“ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„è¯¥å›è°ƒå‡½æ•°çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"1234 2345 3456"</span>.replace(<span class="regexp">/(\d)\d&#123;2&#125;(\d)/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match, $<span class="number">1</span>, $<span class="number">2</span>, index, input</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log([match, $<span class="number">1</span>, $<span class="number">2</span>, index, input]);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// =&gt; ["1234", "1", "4", 0, "1234 2345 3456"]</span></span><br><span class="line"><span class="comment">// =&gt; ["2345", "2", "5", 5, "1234 2345 3456"]</span></span><br><span class="line"><span class="comment">// =&gt; ["3456", "3", "6", 10, "1234 2345 3456"]</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°replaceæ‹¿åˆ°çš„ä¿¡æ¯ï¼Œå¹¶ä¸æ¯”execå°‘ã€‚</p><h3 id="8-ä½¿ç”¨æ„é€ å‡½æ•°éœ€è¦æ³¨æ„çš„é—®é¢˜"><a href="#8-ä½¿ç”¨æ„é€ å‡½æ•°éœ€è¦æ³¨æ„çš„é—®é¢˜" class="headerlink" title="8 ä½¿ç”¨æ„é€ å‡½æ•°éœ€è¦æ³¨æ„çš„é—®é¢˜"></a>8 ä½¿ç”¨æ„é€ å‡½æ•°éœ€è¦æ³¨æ„çš„é—®é¢˜</h3><hr><p>ä¸€èˆ¬ä¸æ¨èä½¿ç”¨æ„é€ å‡½æ•°ç”Ÿæˆæ­£åˆ™ï¼Œè€Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨å­—é¢é‡ã€‚å› ä¸ºç”¨æ„é€ å‡½æ•°ä¼šå¤šå†™å¾ˆå¤š\ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> string = <span class="string">"2017-06-27 2017.06.27 2017/06/27"</span>;</span><br><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/\d&#123;4&#125;(-|\.|\/)\d&#123;2&#125;\1\d&#123;2&#125;/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log( string.match(regex) );</span><br><span class="line"><span class="comment">// =&gt; ["2017-06-27", "2017.06.27", "2017/06/27"]</span></span><br><span class="line"></span><br><span class="line">regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"\\d&#123;4&#125;(-|\\.|\\/)\\d&#123;2&#125;\\1\\d&#123;2&#125;"</span>, <span class="string">"g"</span>);</span><br><span class="line"><span class="built_in">console</span>.log( string.match(regex) );</span><br><span class="line"><span class="comment">// =&gt; ["2017-06-27", "2017.06.27", "2017/06/27"]</span></span><br></pre></td></tr></table></figure><h3 id="9-ä¿®é¥°ç¬¦"><a href="#9-ä¿®é¥°ç¬¦" class="headerlink" title="9 ä¿®é¥°ç¬¦"></a>9 ä¿®é¥°ç¬¦</h3><hr><p>ES5ä¸­ä¿®é¥°ç¬¦ï¼Œå…±3ä¸ªï¼š</p><pre><code>g å…¨å±€åŒ¹é…ï¼Œå³æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„ï¼Œå•è¯æ˜¯globali å¿½ç•¥å­—æ¯å¤§å°å†™ï¼Œå•è¯ingoreCasem å¤šè¡ŒåŒ¹é…ï¼Œåªå½±å“^å’Œ$ï¼ŒäºŒè€…å˜æˆè¡Œçš„æ¦‚å¿µï¼Œå³è¡Œå¼€å¤´å’Œè¡Œç»“å°¾ã€‚å•è¯æ˜¯multiline</code></pre><h3 id="10-sourceå±æ€§"><a href="#10-sourceå±æ€§" class="headerlink" title="10 sourceå±æ€§"></a>10 sourceå±æ€§</h3><p>æ­£åˆ™å®ä¾‹å¯¹è±¡å±æ€§ï¼Œé™¤äº†globalã€ingnoreCaseã€multilineã€lastIndexå±æ€§ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªsourceå±æ€§ã€‚</p><p>å®ƒä»€ä¹ˆæ—¶å€™æœ‰ç”¨å‘¢ï¼Ÿ</p><p>æ¯”å¦‚ï¼Œåœ¨æ„å»ºåŠ¨æ€çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥é€šè¿‡æŸ¥çœ‹è¯¥å±æ€§ï¼Œæ¥ç¡®è®¤æ„å»ºå‡ºçš„æ­£åˆ™åˆ°åº•æ˜¯ä»€ä¹ˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> className = <span class="string">"high"</span>;</span><br><span class="line"><span class="keyword">var</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|\\s)"</span> + className + <span class="string">"(\\s|$)"</span>);</span><br><span class="line"><span class="built_in">console</span>.log( regex.source )</span><br><span class="line"><span class="comment">// =&gt; (^|\s)high(\s|$) å³å­—ç¬¦ä¸²"(^|\\s)high(\\s|$)"</span></span><br></pre></td></tr></table></figure><h3 id="11-æ„é€ å‡½æ•°å±æ€§"><a href="#11-æ„é€ å‡½æ•°å±æ€§" class="headerlink" title="11 æ„é€ å‡½æ•°å±æ€§"></a>11 æ„é€ å‡½æ•°å±æ€§</h3><hr><p>æ„é€ å‡½æ•°çš„é™æ€å±æ€§åŸºäºæ‰€æ‰§è¡Œçš„æœ€è¿‘ä¸€æ¬¡æ­£åˆ™æ“ä½œè€Œå˜åŒ–ã€‚é™¤äº†æ˜¯$1,â€¦,$9ä¹‹å¤–ï¼Œè¿˜æœ‰å‡ ä¸ªä¸å¤ªå¸¸ç”¨çš„å±æ€§ï¼ˆæœ‰å…¼å®¹æ€§é—®é¢˜ï¼‰ï¼š</p><pre><code>RegExp.input æœ€è¿‘ä¸€æ¬¡ç›®æ ‡å­—ç¬¦ä¸²ï¼Œç®€å†™æˆRegExp[&quot;$_&quot;]RegExp.lastMatch æœ€è¿‘ä¸€æ¬¡åŒ¹é…çš„æ–‡æœ¬ï¼Œç®€å†™æˆRegExp[&quot;$&amp;&quot;]RegExp.lastParen æœ€è¿‘ä¸€æ¬¡æ•è·çš„æ–‡æœ¬ï¼Œç®€å†™æˆRegExp[&quot;$+&quot;]RegExp.leftContext ç›®æ ‡å­—ç¬¦ä¸²ä¸­lastMatchä¹‹å‰çš„æ–‡æœ¬ï¼Œç®€å†™æˆRegExp[&quot;$`&quot;]RegExp.rightContext ç›®æ ‡å­—ç¬¦ä¸²ä¸­lastMatchä¹‹åçš„æ–‡æœ¬ï¼Œç®€å†™æˆRegExp[&quot;$&apos;&quot;]</code></pre><p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regex = <span class="regexp">/([abc])(\d)/g</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">"a1b2c3d4e5"</span>;</span><br><span class="line">string.match(regex);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>.input );</span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>[<span class="string">"$_"</span>]);</span><br><span class="line"><span class="comment">// =&gt; "a1b2c3d4e5"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>.lastMatch );</span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>[<span class="string">"$&amp;"</span>] );</span><br><span class="line"><span class="comment">// =&gt; "c3"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>.lastParen );</span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>[<span class="string">"$+"</span>] );</span><br><span class="line"><span class="comment">// =&gt; "3"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>.leftContext );</span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>[<span class="string">"$`"</span>] );</span><br><span class="line"><span class="comment">// =&gt; "a1b2"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>.rightContext );</span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">RegExp</span>[<span class="string">"$'"</span>] );</span><br><span class="line"><span class="comment">// =&gt; "d4e5"</span></span><br></pre></td></tr></table></figure><h2 id="ç»“è¯­ï¼š"><a href="#ç»“è¯­ï¼š" class="headerlink" title="ç»“è¯­ï¼š"></a>ç»“è¯­ï¼š</h2><hr><pre><code>æˆ‘æœæŸ¥åˆ—å‡ºäº†ç›¸å…³çš„6ä¸ªæ–¹æ³•ï¼Œå¹¶å¯¹6ä¸ªæ–¹æ³•è¿›è¡Œäº†è¯´æ˜ã€‚åé¢æˆ‘ä¼šå¯¹replaceå†å•ç‹¬å‡ºä¸€ç¯‡æ–‡ç« ã€‚å‚è€ƒèµ„æ–™é‡Œçš„ç¬¬ä¸€ç¯‡æ–‡ç« çœŸçš„éå¸¸å¥½ï¼Œå€¼å¾—ä»”ç»†ç ”è¯»ã€‚å¦‚æœä½ æƒ³ç²—ç•¥äº†è§£æ­£åˆ™çš„æ–¹æ³•ï¼Œçœ‹æˆ‘è¿™ç¯‡æ–‡ç« æ˜¯æ²¡é”™äº†ï¼Œåé¢åˆ—å‡ºçš„ç›¸åº”æ–¹æ³•çš„å‘ç‚¹å’Œæ³¨æ„ç‚¹ã€‚åé¢ï¼Œæˆ‘ä¼šå†æ…¢æ…¢è¡¥å……åŒ¹é…è§„åˆ™ï¼Œæˆ‘ä¼šå•ç‹¬åˆ—å‡ºä¸€ç¯‡æ–‡ç« ï¼Œå› ä¸ºåŒ¹é…è§„åˆ™ä¹Ÿæœ‰å¾ˆå¤šæ³¨æ„ç‚¹å‘¢ã€‚å“ˆå“ˆå“ˆï¼Œå…¶å®ä¹Ÿæ˜¯åœ¨ä¸‹é¢çš„æ–‡ç« é‡Œé¢çœ‹çš„å•¦ï¼Œæ–‡ç« çœŸçš„å†™å¾—å¥½---å˜»å˜»å…¶å®æ­£åˆ™ä¹Ÿæ²¡æœ‰é‚£ä¹ˆéš¾çš„å•¦-----å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¯å¤©éƒ½è¦åŠ æ²¹å“¦ã€‚åŠ æ²¹ï¼Œä¸å›å…±å‹‰ï¼ï¼ï¼</code></pre><h2 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h2><ul><li><a href="https://juejin.im/post/5965943ff265da6c30653879#heading-0" target="_blank" rel="noopener">JSæ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰</a></li></ul><p>æ–‡ç« çœŸçš„å†™çš„ä¸é”™ï¼Œè®¤è®¤çœŸçœŸï¼Œç»†åš¼æ…¢å’½çš„çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œä¿è¯ä½ å­¦ä¼šæ­£åˆ™ã€‚</p><p>è¿™ç¯‡æ–‡ç« å¯¹æ­£åˆ™çš„ç»†ææœ«èŠ‚éƒ½æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œæˆ‘æ‘˜æŠ„äº†éƒ¨åˆ†é‡è¦çš„ä»£ç ï¼Œå’Œæ€»ç»“äº†6ä¸ªæ–¹æ³•ã€‚</p><p>å‰©ä¸‹çš„åŒ¹é…è§„åˆ™ã€å…³é”®å­—ç­‰ï¼Œä»¥åä¼šä¸€ä¸€è¡¥å……ã€‚</p><ul><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener">MDN-RegExp</a></p></li><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noopener">MDN-String</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
