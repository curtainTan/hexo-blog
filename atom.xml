<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>curTain</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.curtaintan.club/"/>
  <updated>2020-10-08T12:35:09.056Z</updated>
  <id>http://blog.curtaintan.club/</id>
  
  <author>
    <name>tanTantan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>10.8-每日一题--反转字符串</title>
    <link href="http://blog.curtaintan.club/2020/10/08/10-8-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/10/08/10-8-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-10-08T01:30:07.000Z</published>
    <updated>2020-10-08T12:35:09.056Z</updated>
    
    <content type="html"><![CDATA[<ol start="344"><li>反转字符串</li></ol><a id="more"></a><h2 id="344-反转字符串"><a href="#344-反转字符串" class="headerlink" title="344. 反转字符串"></a><a href="https://leetcode-cn.com/problems/reverse-string/" target="_blank" rel="noopener">344. 反转字符串</a></h2><p>编写一个函数，其作用是将输入的字符串反转过来。输入字符串以字符数组 char[] 的形式给出。</p><p>不要给另外的数组分配额外的空间，你必须原地修改输入数组、使用 O(1) 的额外空间解决这一问题。</p><p>你可以假设数组中的所有字符都是 ASCII 码表中的可打印字符。</p><p>示例 1：</p><blockquote><p>输入：[“h”,”e”,”l”,”l”,”o”]<br>输出：[“o”,”l”,”l”,”e”,”h”]</p></blockquote><p>示例 2：</p><blockquote><p>输入：[“H”,”a”,”n”,”n”,”a”,”h”]<br>输出：[“h”,”a”,”n”,”n”,”a”,”H”]</p></blockquote><p>解题思路：</p><p>使用双指针，左右下标元素互相替换</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;character[]&#125; s</span></span><br><span class="line"><span class="comment"> * @return &#123;void&#125; Do not return anything, modify s in-place instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> reverseString = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> right = s.length - <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span>( ; left &lt; right; left ++, right -- )&#123;</span><br><span class="line">        [ s[left], s[ right ] ] = [ s[right], s[left] ]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;344&quot;&gt;
&lt;li&gt;反转字符串&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="数组" scheme="http://blog.curtaintan.club/tags/%E6%95%B0%E7%BB%84/"/>
    
      <category term="双指针" scheme="http://blog.curtaintan.club/tags/%E5%8F%8C%E6%8C%87%E9%92%88/"/>
    
  </entry>
  
  <entry>
    <title>10.7-每日一题--75. 颜色分类</title>
    <link href="http://blog.curtaintan.club/2020/10/07/10-7-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/10/07/10-7-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-10-07T02:51:35.000Z</published>
    <updated>2020-10-07T03:14:25.613Z</updated>
    
    <content type="html"><![CDATA[<ol start="75"><li>颜色分类</li></ol><a id="more"></a><h2 id=""><a href="#" class="headerlink" title=""></a><img src="https://leetcode-cn.com/problems/sort-colors/" alt="75. 颜色分类"></h2><p>给定一个包含红色、白色和蓝色，一共 n 个元素的数组，原地对它们进行排序，使得相同颜色的元素相邻，并按照红色、白色、蓝色顺序排列。</p><p>此题中，我们使用整数 0、 1 和 2 分别表示红色、白色和蓝色。</p><p>注意:<br>不能使用代码库中的排序函数来解决这道题。</p><p>示例:</p><blockquote><p>输入: [2,0,2,1,1,0]<br>输出: [0,0,1,1,2,2]</p></blockquote><p>进阶：</p><p>一个直观的解决方案是使用计数排序的两趟扫描算法。<br>首先，迭代计算出0、1 和 2 元素的个数，然后按照0、1、2的排序，重写当前数组。<br>你能想出一个仅使用常数空间的一趟扫描算法吗？</p><h2 id="解法一：冒泡排序"><a href="#解法一：冒泡排序" class="headerlink" title="解法一：冒泡排序"></a>解法一：冒泡排序</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sortColors = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length - <span class="number">1</span>; i ++ )&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.length; j ++ )&#123;</span><br><span class="line">            <span class="keyword">if</span>( nums[i] &gt; nums[j] )&#123;</span><br><span class="line">                [ nums[i], nums[j] ] = [ nums[j], nums[i] ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="解法二：单指针"><a href="#解法二：单指针" class="headerlink" title="解法二：单指针"></a>解法二：单指针</h2><p>解题思路：使用单指针，依次排 <code>0</code> 和 <code>1</code>，需要进行 <code>n-1</code> 次循环</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sortColors = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i ++ )&#123;</span><br><span class="line">        <span class="keyword">if</span>( nums[i] === <span class="number">0</span> )&#123;</span><br><span class="line">            [ nums[i], nums[index] ] = [ nums[index], nums[i] ]</span><br><span class="line">            index ++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = index; i &lt; nums.length; i ++ )&#123;</span><br><span class="line">        <span class="keyword">if</span>( nums[i] === <span class="number">1</span> )&#123;</span><br><span class="line">            [ nums[i], nums[index] ] = [ nums[index], nums[i] ]</span><br><span class="line">            index ++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="解法二：双指针"><a href="#解法二：双指针" class="headerlink" title="解法二：双指针"></a>解法二：双指针</h2><p>解题思路：</p><ol><li>使用一个指针记录 <code>0</code> 的下标</li><li>使用一个指针记录 <code>2</code> 的下标</li><li>向中间逼近，中间的元素就是 <code>1</code></li></ol><p>该方法比较适合只有三个元素排序的数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sortColors = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sIndex = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> eIndex = nums.length - <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span>( i &lt;= eIndex )&#123;</span><br><span class="line">        <span class="keyword">if</span>( nums[i] === <span class="number">0</span> )&#123;</span><br><span class="line">            [ nums[i], nums[sIndex] ] = [ nums[sIndex], nums[i] ]</span><br><span class="line">            sIndex ++</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( nums[i] === <span class="number">2</span> )&#123;</span><br><span class="line">            [ nums[i], nums[eIndex] ] = [ nums[eIndex], nums[i] ]</span><br><span class="line">            eIndex --</span><br><span class="line">            <span class="comment">// 位置回退，因为不知道交换后的元素的值，故需要重新判断一次</span></span><br><span class="line">            i--</span><br><span class="line">        &#125;</span><br><span class="line">        i++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;75&quot;&gt;
&lt;li&gt;颜色分类&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="数组" scheme="http://blog.curtaintan.club/tags/%E6%95%B0%E7%BB%84/"/>
    
      <category term="排序" scheme="http://blog.curtaintan.club/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>10.5-每日一题--四数之和</title>
    <link href="http://blog.curtaintan.club/2020/10/05/10-5-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/10/05/10-5-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-10-05T01:48:17.000Z</published>
    <updated>2020-10-05T02:04:32.414Z</updated>
    
    <content type="html"><![CDATA[<ol start="18"><li>四数之和</li></ol><a id="more"></a><h2 id="18-四数之和"><a href="#18-四数之和" class="headerlink" title="18. 四数之和"></a><a href="https://leetcode-cn.com/problems/4sum/" target="_blank" rel="noopener">18. 四数之和</a></h2><p>给定一个包含 n 个整数的数组 nums 和一个目标值 target，判断 nums 中是否存在四个元素 a，b，c 和 d ，使得 a + b + c + d 的值与 target 相等？找出所有满足条件且不重复的四元组。</p><p>注意：</p><p>答案中不可以包含重复的四元组。</p><p>示例：</p><p>给定数组 nums = [1, 0, -1, 0, -2, 2]，和 target = 0。</p><p>满足要求的四元组集合为：</p><blockquote><p>[<br> [-1,  0, 0, 1],<br> [-2, -1, 1, 2],<br> [-2,  0, 0, 2]<br>]</p></blockquote><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><ol><li>对数组进行排序</li><li>将取得的值以 <strong>数组字符串</strong> 的形式存入数组</li><li>使用 <code>Set</code> 去重</li><li>使用 <code>JSON.parse()</code> 将元素恢复为数组对象</li></ol><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number[]&#125; nums</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; target</span></span><br><span class="line"><span class="comment"> * @return &#123;number[][]&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> fourSum = <span class="function"><span class="keyword">function</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> len = nums.length</span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    <span class="keyword">if</span>( len &lt; <span class="number">4</span> ) <span class="keyword">return</span> res</span><br><span class="line">    nums = nums.sort( <span class="function">(<span class="params"> a, b </span>) =&gt;</span> a - b )</span><br><span class="line">    <span class="comment">// 获取合适的值</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">3</span>; i ++ )&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len - <span class="number">2</span>; j ++ )&#123;</span><br><span class="line">            <span class="keyword">for</span>( <span class="keyword">let</span> x = j + <span class="number">1</span>; x &lt; len - <span class="number">1</span>; x ++ )&#123;</span><br><span class="line">                <span class="keyword">for</span>( <span class="keyword">let</span> y = x + <span class="number">1</span>; y &lt; len; y ++ )&#123;</span><br><span class="line">                    <span class="keyword">if</span>( nums[i] + nums[j] + nums[x] + nums[y] === target )&#123;</span><br><span class="line">                        <span class="comment">// 将值以字符串的形式存入数组</span></span><br><span class="line">                        res.push( <span class="string">`[<span class="subst">$&#123;nums[i]&#125;</span>,<span class="subst">$&#123;nums[j]&#125;</span>,<span class="subst">$&#123;nums[x]&#125;</span>,<span class="subst">$&#123;nums[y]&#125;</span>]`</span> )</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 去重</span></span><br><span class="line">    res = [ ...new <span class="built_in">Set</span>(res) ]</span><br><span class="line">    <span class="comment">// 恢复元素为数组</span></span><br><span class="line">    res = res.map( <span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">JSON</span>.parse( item ) )</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>使用 <code>JSON.stringify()</code> 函数处理对象时，属性为 <code>undefined</code> 和 <code>function</code> 会被忽略，所以在使用 <code>JSON.stringify()</code> 时需要先查看对象是否适合使用</p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    name: <span class="string">"tan"</span>,</span><br><span class="line">    age: <span class="literal">undefined</span>,</span><br><span class="line">    book: [</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">"chinese"</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">name</span>: <span class="string">"math"</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log( <span class="string">"my name is "</span>, <span class="keyword">this</span>.name )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify( obj )</span><br><span class="line"><span class="comment">// "&#123;"name":"tan","book":[&#123;"name":"chinese"&#125;,&#123;"name":"math"&#125;]&#125;"</span></span><br></pre></td></tr></table></figure><p>可知，值为 <code>undefined</code> 和 <code>function</code> 的属性已经被忽略了</p>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;18&quot;&gt;
&lt;li&gt;四数之和&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
  </entry>
  
  <entry>
    <title>javascript之位操作</title>
    <link href="http://blog.curtaintan.club/2020/10/04/javascript%E4%B9%8B%E4%BD%8D%E6%93%8D%E4%BD%9C/"/>
    <id>http://blog.curtaintan.club/2020/10/04/javascript%E4%B9%8B%E4%BD%8D%E6%93%8D%E4%BD%9C/</id>
    <published>2020-10-04T14:30:02.000Z</published>
    <updated>2020-10-07T06:57:04.713Z</updated>
    
    <content type="html"><![CDATA[<p>位运算平时用得比较少，但是在进行数字操作的时候，还是有必要了解的</p><a id="more"></a><h3 id="数的二进制表示"><a href="#数的二进制表示" class="headerlink" title="数的二进制表示"></a>数的二进制表示</h3><p>接下来要介绍的操作符用于数值的底层操作，也就是操作内存中表示数据的比特（位）。ECMAScript中的所有数值都以IEEE 754 64位格式存储，但位操作并不直接应用到64位表示，而是先把值转换为32位整数，再进行位操作，之后再把结果转换为64位。对开发者而言，就好像只有32位整数一样，因为64位整数存储格式是不可见的。既然知道了这些，就只需要考虑32位整数即可。</p><h3 id="整数表示"><a href="#整数表示" class="headerlink" title="整数表示"></a>整数表示</h3><p>有符号整数使用32位的前31位表示整数值。第32位表示数值的符号，如0表示正，1表示负。这一位称为符号位（sign bit），它的值决定了数值其余部分的格式。正值以真正的二进制格式存储，即31位中的每一位都代表2的幂。第一位（称为第0位）表示2^0，第二位表示2^1，依此类推。如果一个位是空的，则以0填充，相当于忽略不计。比如，数值18的二进制格式为00000000000000000000000000010010，或更精简的10010。后者是用到的5个有效位，决定了实际的值。</p><h3 id="负数"><a href="#负数" class="headerlink" title="负数"></a>负数</h3><p>负值以一种称为二补数的二进制编码存储。一个数值的二补数通过如下3个步骤计算得到：<br>(1) 确定绝对值的二进制表示（如，对于-18，先确定18的二进制表示）；<br>(2) 找到数值的一补数，换句话说，就是每个0都变成1，每个1都变成0；<br>(3) 给结果加1。<br>基于上述步骤确定-18的二进制表示，首先从18的二进制表示开始：</p><blockquote><p>0000 0000 0000 0000 0000 0000 0001 0010</p></blockquote><p>然后，计算一补数，即反转每一位的二进制值：</p><blockquote><p>1111 1111 1111 1111 1111 1111 1110 1101</p></blockquote><p>最后，给一补数加1：</p><blockquote><p>1111 1111 1111 1111 1111 1111 1110 1101<br>+1</p></blockquote><hr><blockquote><p>1111 1111 1111 1111 1111 1111 1110 1110</p></blockquote><p>那么，-18的二进制表示就是11111111111111111111111111101110。要注意的是，在处理有符号整数时，我们无法访问第31位。ECMAScript会帮我们记录这些信息。在把负值输出为一个二进制字符串时，我们会得到一个前面加了减号的绝对值，如下所示：</p><blockquote><p>let num = -18;<br>console.log(num.toString(2)); // “-10010”</p></blockquote><h2 id="位操作"><a href="#位操作" class="headerlink" title="位操作"></a>位操作</h2><p>位操作有 7 种操作：</p><ol><li>按位非( ~ )</li><li>按位与( &amp; )</li><li>按位或( | )</li><li>按位异或( ^ )</li><li>左移( &lt;&lt; )</li><li>有符号位右移( &gt;&gt; )</li><li>无符号位右移( &gt;&gt;&gt; )</li></ol><h3 id="1-按位非"><a href="#1-按位非" class="headerlink" title="1.按位非( ~ )"></a>1.按位非( ~ )</h3><blockquote><p>按位非~会将数值的32位二进制的每一位取反(0变为1，1变为0)。按位非的操作符的本质取操作数的负值，然后减一</p></blockquote><p>真值表</p><table><thead><tr><th>a</th><th>~a</th></tr></thead><tbody><tr><td>0</td><td>1</td></tr><tr><td>1</td><td>0</td></tr></tbody></table><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ~10</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ~ 取反</span></span><br><span class="line"><span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">0101</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据上面的公式反推</span></span><br><span class="line"><span class="comment">// 先 - 1</span></span><br><span class="line"><span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">0100</span></span><br><span class="line"><span class="comment">// 再取反   得到 -11   8+2+1=11</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1011</span></span><br></pre></td></tr></table></figure><h3 id="2-按位与-amp"><a href="#2-按位与-amp" class="headerlink" title="2.按位与( &amp; )"></a>2.按位与( &amp; )</h3><blockquote><p>按位与&amp;, 本质上将两个操作数的32位二进制数的每一位对齐。</p></blockquote><p>真值表：</p><table><thead><tr><th>a</th><th>b</th><th>a&amp;b</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 10&amp;8  -&gt; 8</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span>    <span class="comment">// 10</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1000</span>    <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1000</span>    <span class="comment">// 8</span></span><br></pre></td></tr></table></figure><h3 id="3-按位或"><a href="#3-按位或" class="headerlink" title="3.按位或( | )"></a>3.按位或( | )</h3><p>真值表：</p><p>|a|b|a | b|<br>|–|–|–|<br>|0|0|0<br>|0|1|1<br>|1|0|1<br>|1|1|1</p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 10 | 8  -&gt; 10</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span>    <span class="comment">// 10</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1000</span>    <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span>    <span class="comment">// 10</span></span><br></pre></td></tr></table></figure><h3 id="4-按位异或"><a href="#4-按位异或" class="headerlink" title="4.按位异或( ^ )"></a>4.按位异或( ^ )</h3><p>真值表：</p><table><thead><tr><th>a</th><th>b</th><th>a ^ b</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 10 ^ 8  -&gt; 2</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span>    <span class="comment">// 10</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1000</span>    <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0010</span>    <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h3 id="5-左移-lt-lt"><a href="#5-左移-lt-lt" class="headerlink" title="5.左移( &lt;&lt; )"></a>5.左移( &lt;&lt; )</h3><blockquote><p>左移(&lt;&lt;)将32位二进制向左移动指定的位数，空缺的位将会使用0填充。左移不会影响符号位</p></blockquote><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span>&lt;&lt;<span class="number">2</span>   -&gt; <span class="number">40</span></span><br><span class="line"><span class="number">0</span>|<span class="number">000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span>    <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// 符号位不会被挤掉</span></span><br><span class="line"><span class="number">0</span>|<span class="number">000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0010</span> <span class="number">1000</span>    <span class="comment">// 2^5+2^3 = 32+8 = 40</span></span><br></pre></td></tr></table></figure><h3 id="5-右移-gt-gt"><a href="#5-右移-gt-gt" class="headerlink" title="5.右移( &gt;&gt; )"></a>5.右移( &gt;&gt; )</h3><blockquote><p>右移(&gt;&gt;)将32位二进制向右移动指定的位数，但是保留符号位，右移空缺的符号位使用0填充</p></blockquote><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span>&gt;&gt;<span class="number">2</span>   -&gt; <span class="number">2</span></span><br><span class="line"><span class="number">0</span>|<span class="number">000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span>    <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// 符号位不会被挤掉</span></span><br><span class="line"><span class="number">0</span>|<span class="number">000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0010</span>    <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h3 id="5-无符号位右移-gt-gt-gt"><a href="#5-无符号位右移-gt-gt-gt" class="headerlink" title="5.无符号位右移( &gt;&gt;&gt; )"></a>5.无符号位右移( &gt;&gt;&gt; )</h3><blockquote><p>无符号位右移，会将所有32位数都向右移动。对于正数来说右移和无符号位右移的结果是一致的。</p></blockquote><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 10&gt;&gt;&gt;2   -&gt; 2</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">1010</span>    <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// 符号位不会被挤掉</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0010</span>    <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// -11</span></span><br><span class="line"><span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">1111</span> <span class="number">0101</span></span><br><span class="line"><span class="comment">// -11&gt;&gt;&gt;29  -&gt; 7</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0000</span> <span class="number">0111</span>    <span class="comment">// 1+2+4=7</span></span><br></pre></td></tr></table></figure><h2 id="位操作符的用法"><a href="#位操作符的用法" class="headerlink" title="位操作符的用法"></a>位操作符的用法</h2><ul><li>~~向下取整</li></ul><blockquote><p>按位非，将操作数取负值再减1，对于浮点数，位操作会舍弃小数部分，再进行取反，就能获得舍去小数部分的数了</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~<span class="number">12.3</span></span><br><span class="line"><span class="comment">// -13</span></span><br><span class="line">~~<span class="number">12.3</span></span><br><span class="line"><span class="comment">// 12</span></span><br></pre></td></tr></table></figure><ul><li>~判断索引是否存在</li></ul><p>由上述表达式可知，负数取反的结果是将负数变为正数再减 1，则 <code>~-1 = 0</code></p><p>在平时使用 <code>indexOf()</code> 函数时，当没有找到结果时会返回 <code>-1</code>，此时我们可以使用取反操作来做判断</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>( [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].indexOf( <span class="number">5</span> ) &gt; <span class="number">-1</span> )&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用取反做判断</span></span><br><span class="line"><span class="keyword">if</span>( ~[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].indexOf( <span class="number">5</span> ) )&#123;&#125;</span><br></pre></td></tr></table></figure><ul><li>使用 <code>&amp;</code> 判断奇偶</li></ul><p>由二进制计算方式可知（ 2^n+2^n-1+…+2^1+2^0 ），只有最后一位可以为奇数，则可以使用按位与 <code>&amp;</code> 来判断奇数偶数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 奇数</span></span><br><span class="line"><span class="number">3</span>^<span class="number">1</span>    <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 偶数</span></span><br><span class="line"><span class="number">4</span>^<span class="number">1</span>    <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>位操作平时虽然用得少，但是技多不压身</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;位运算平时用得比较少，但是在进行数字操作的时候，还是有必要了解的&lt;/p&gt;
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://blog.curtaintan.club/categories/JavaScript/"/>
    
    
      <category term="js基础" scheme="http://blog.curtaintan.club/tags/js%E5%9F%BA%E7%A1%80/"/>
    
      <category term="科普" scheme="http://blog.curtaintan.club/tags/%E7%A7%91%E6%99%AE/"/>
    
  </entry>
  
  <entry>
    <title>10.4-每日一题--两数相加(链表)</title>
    <link href="http://blog.curtaintan.club/2020/10/04/10-4-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/10/04/10-4-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-10-04T14:14:22.000Z</published>
    <updated>2020-10-04T14:20:36.581Z</updated>
    
    <content type="html"><![CDATA[<ol start="2"><li>两数相加</li></ol><a id="more"></a><p><a href="https://leetcode-cn.com/problems/add-two-numbers/" target="_blank" rel="noopener">2. 两数相加</a></p><p>给出两个 非空 的链表用来表示两个非负的整数。其中，它们各自的位数是按照 逆序 的方式存储的，并且它们的每个节点只能存储 一位 数字。</p><p>如果，我们将这两个数相加起来，则会返回一个新的链表来表示它们的和。</p><p>您可以假设除了数字 0 之外，这两个数都不会以 0 开头。</p><p>示例：</p><blockquote><p>输入：(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)<br>输出：7 -&gt; 0 -&gt; 8<br>原因：342 + 465 = 807</p></blockquote><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = val;</span></span><br><span class="line"><span class="comment"> *     this.next = null;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;ListNode&#125; l1</span></span><br><span class="line"><span class="comment"> * @param &#123;ListNode&#125; l2</span></span><br><span class="line"><span class="comment"> * @return &#123;ListNode&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> addTwoNumbers = <span class="function"><span class="keyword">function</span>(<span class="params">l1, l2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> node = <span class="keyword">new</span> ListNode(<span class="number">0</span>)</span><br><span class="line">    <span class="comment">// 记录下返回的节点</span></span><br><span class="line">    <span class="keyword">let</span> res = node</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span>( l1 || l2 )&#123;</span><br><span class="line">        <span class="comment">// 当其中一个节点为 null 时取 0</span></span><br><span class="line">        <span class="keyword">let</span> now = ( l1 &amp;&amp; l1.val || <span class="number">0</span> ) + ( l2 &amp;&amp; l2.val || <span class="number">0</span> ) + flag</span><br><span class="line">        <span class="comment">// 超过十，标记进位</span></span><br><span class="line">        flag = now &gt;= <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span></span><br><span class="line">        node.next = <span class="keyword">new</span> ListNode( now % <span class="number">10</span> )</span><br><span class="line">        node = node.next</span><br><span class="line">        l1 = l1 &amp;&amp; l1.next</span><br><span class="line">        l2 = l2 &amp;&amp; l2.next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 计算完后，有进位，需要加上进位</span></span><br><span class="line">    <span class="keyword">if</span>( flag )&#123;</span><br><span class="line">        node.next = <span class="keyword">new</span> ListNode( flag )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.next</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>答题要点：</p><ol><li>记录首节点</li><li>记录进位</li><li>添加进位数</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;两数相加&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="链表" scheme="http://blog.curtaintan.club/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>10.3-每日一题-缺失数字</title>
    <link href="http://blog.curtaintan.club/2020/10/03/10.3-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/10/03/10.3-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-10-03T10:22:51.000Z</published>
    <updated>2020-10-05T01:52:53.431Z</updated>
    
    <content type="html"><![CDATA[<ol start="268"><li>缺失数字</li></ol><a id="more"></a><h2 id="268-缺失数字"><a href="#268-缺失数字" class="headerlink" title="268. 缺失数字"></a><a href="https://leetcode-cn.com/problems/missing-number/" target="_blank" rel="noopener">268. 缺失数字</a></h2><p>给定一个包含 0, 1, 2, …, n 中 n 个数的序列，找出 0 .. n 中没有出现在序列中的那个数。</p><p>示例 1:</p><blockquote><p>输入: [3,0,1]<br>输出: 2<br>示例 2:</p></blockquote><blockquote><p>输入: [9,6,4,2,3,5,7,0,1]<br>输出: 8</p></blockquote><h2 id="解法一-高斯求和公式"><a href="#解法一-高斯求和公式" class="headerlink" title="解法一   高斯求和公式"></a>解法一   高斯求和公式</h2><p>使用数学解法：</p><ol><li>利用高斯求和公式求出序列长度值总和</li><li>遍历数列，求出现有总和</li><li>相减得差</li></ol><p>可知，和为 0 到 n 的和，<br>高斯求和公式：总个数 / 2 * ( 最小的数 + 最大的数 )</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> missingNumber = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 因为缺失了一个数，所以长度要加一，</span></span><br><span class="line">    <span class="comment">// 最大的数就是数组的长度那个数，那个数加上 0</span></span><br><span class="line">    <span class="keyword">let</span> allcount = ( nums.length + <span class="number">1</span> ) / <span class="number">2</span> * ( nums.length + <span class="number">0</span> )</span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i ++ )&#123;</span><br><span class="line">        res += nums[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> allcount - res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="解法二-位运算"><a href="#解法二-位运算" class="headerlink" title="解法二   位运算"></a>解法二   位运算</h2><p>异或运算满足结合律，两个相同的数异或运算返回 0，不相同的数异或返回原来的数</p><p>异或运算的真值表：</p><table><thead><tr><th>a</th><th>b</th><th>a^b</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>0</td></tr></tbody></table><p>案例：</p><blockquote><p>1^1   // 0<br>1^2   // 3   10^1 -&gt; 11 -&gt; 2+1=3<br>4^5   // 1    4-&gt;100  5-&gt;101  100^101 -&gt; 001 -&gt; 1</p></blockquote><p>解释：会把数字转换为二进制，再进行异或运算</p><p>案例：</p><p>有这样的案例：</p><p>|下标|0|1|2|3|<br>|–|–|–|–|<br>|数字|0|1|3|4|</p><blockquote><p>得到公式：4^(0^0)^(1^1)^(2^3)^(3^4)<br>交换律：  = (4^4)^(0^0)^(1^1)^(3^3)^2<br>最后结果：= 0^0^0^0^2<br>         = 2</p></blockquote><h2 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> missingNumber = <span class="function"><span class="keyword">function</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = nums.length</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i ++ )&#123;</span><br><span class="line">        n ^= nums[i] ^ i</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>当涉及到数字运算时，可以优先考虑数学公式和位运算</p>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;268&quot;&gt;
&lt;li&gt;缺失数字&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="位操作" scheme="http://blog.curtaintan.club/tags/%E4%BD%8D%E6%93%8D%E4%BD%9C/"/>
    
  </entry>
  
  <entry>
    <title>10.2-每日一题-宝石与石头</title>
    <link href="http://blog.curtaintan.club/2020/10/02/10-2-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/10/02/10-2-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-10-02T00:54:32.000Z</published>
    <updated>2020-10-02T01:11:42.667Z</updated>
    
    <content type="html"><![CDATA[<ol start="771"><li>宝石与石头</li></ol><a id="more"></a><h3 id="771-宝石与石头"><a href="#771-宝石与石头" class="headerlink" title="771. 宝石与石头"></a><a href="https://leetcode-cn.com/problems/jewels-and-stones/" target="_blank" rel="noopener">771. 宝石与石头</a></h3><p>给定字符串J 代表石头中宝石的类型，和字符串 S代表你拥有的石头。 S 中每个字符代表了一种你拥有的石头的类型，你想知道你拥有的石头中有多少是宝石。</p><p>J 中的字母不重复，J 和 S中的所有字符都是字母。字母区分大小写，因此”a”和”A”是不同类型的石头。</p><p>示例 1:</p><blockquote><p>输入: J = “aA”, S = “aAAbbbb”<br>输出: 3<br>示例 2:</p></blockquote><blockquote><p>输入: J = “z”, S = “ZZ”<br>输出: 0</p></blockquote><p>注意:</p><ul><li>S 和 J 最多含有50个字母。</li><li>J 中的字符不重复。</li></ul><h3 id="解题思路一"><a href="#解题思路一" class="headerlink" title="解题思路一"></a>解题思路一</h3><p>解题原理：使用正则搭配 <code>replace()</code> 完成计数</p><ol><li>在 J 的每个元素后面加上 <code>*</code> ，表示宝石有任意个</li><li>构建正则，使用 <code>g</code> 全局模式</li><li>使用 <code>replace</code> 函数计数并替换元素</li></ol><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numJewelsInStones = <span class="function"><span class="keyword">function</span>(<span class="params">J, S</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 创建正则</span></span><br><span class="line">    <span class="keyword">let</span> Jstr = J.split(<span class="string">""</span>).join(<span class="string">"*"</span>) + <span class="string">"*"</span></span><br><span class="line">    <span class="keyword">let</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>( Jstr, <span class="string">"g"</span> )</span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 替换元素并技术</span></span><br><span class="line">    S = S.replace( reg, (all) =&gt; &#123;</span><br><span class="line">        res += all.length</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="解题思路二"><a href="#解题思路二" class="headerlink" title="解题思路二"></a>解题思路二</h3><p>使用两次遍历</p><ol><li>遍历 J 将每一个元素存在对象内</li><li>遍历 S 判定元素是否存在对象上</li><li>计数返回结果</li></ol><h3 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numJewelsInStones = <span class="function"><span class="keyword">function</span>(<span class="params">J, S</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> map = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 存入 map</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> item <span class="keyword">of</span> J )&#123;</span><br><span class="line">        map[item] = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 计数</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> item <span class="keyword">of</span> S )&#123;</span><br><span class="line">        map[item] &amp;&amp; res ++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>适当的使用 map 来存储值，可以减小时间复杂度</p>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;771&quot;&gt;
&lt;li&gt;宝石与石头&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="字符串" scheme="http://blog.curtaintan.club/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
  </entry>
  
  <entry>
    <title>红宝书第三章-语言基础</title>
    <link href="http://blog.curtaintan.club/2020/09/30/%E7%BA%A2%E5%AE%9D%E4%B9%A6%E7%AC%AC%E4%B8%89%E7%AB%A0-%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/"/>
    <id>http://blog.curtaintan.club/2020/09/30/%E7%BA%A2%E5%AE%9D%E4%B9%A6%E7%AC%AC%E4%B8%89%E7%AB%A0-%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/</id>
    <published>2020-09-30T02:17:45.000Z</published>
    <updated>2020-10-02T09:44:48.856Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、语法"><a href="#一、语法" class="headerlink" title="一、语法"></a>一、语法</h2><h3 id="1-1-变量命名规则"><a href="#1-1-变量命名规则" class="headerlink" title="1.1 变量命名规则"></a>1.1 变量命名规则</h3><ol><li>第一个字符必须是一个字符、下划线（_）或美元符号（$）</li><li>剩下的字符可以是字母、下划线、美元符号和数字，也可以是 Unicode 的字母字符</li></ol><h3 id="1-2-严格模式"><a href="#1-2-严格模式" class="headerlink" title="1.2 严格模式"></a>1.2 严格模式</h3><p>概念：ES5 添加了严格模式，严格模式是一个预处理指令，严格模式的目的是处理一些不规范写法，对于不安全的活动抛错误</p><p>如何添加严格模式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在脚本开头添加一行</span></span><br><span class="line"><span class="meta">"use strict"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或在函数体内第一行添加</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">    "use strict"</span></span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>严格模式的影响：</strong></p><h4 id="1-2-1-针对变量："><a href="#1-2-1-针对变量：" class="headerlink" title="1.2.1 针对变量："></a>1.2.1 针对变量：</h4><ol><li>不允许以外创建全局变量，给一个没有声明的变量赋值，抛错 ReferenceError 引用错误</li><li>不能对变量使用 delete 操作符</li><li>不能使用保留字作为变量名</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 非严格模式:创建全局变量 </span></span><br><span class="line"><span class="comment">// 严格模式:抛出 ReferenceError</span></span><br><span class="line">name = <span class="string">"tan"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//非严格模式:静默失败 </span></span><br><span class="line"><span class="comment">//严格模式:抛出 ReferenceError</span></span><br><span class="line"><span class="keyword">var</span> color = <span class="string">"red"</span>;</span><br><span class="line"><span class="keyword">delete</span> color;</span><br></pre></td></tr></table></figure><h4 id="1-2-2-针对对象："><a href="#1-2-2-针对对象：" class="headerlink" title="1.2.2 针对对象："></a>1.2.2 针对对象：</h4><ol><li>为只读属性赋值会抛出 <code>TypeError</code></li><li>对不可配置的属性（noConfigurable）使用 delete 操作会抛出 TypeError</li><li>对不可扩展的对象添加属性会抛出 <code>TypeError</code></li><li>使用对象字面量时，属性名必须唯一</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( obj, <span class="string">"name"</span>, &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// read-only </span></span><br><span class="line">    writable: <span class="literal">false</span>,</span><br><span class="line">value: <span class="string">"tan"</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非严格模式: 默认修改失败</span></span><br><span class="line"><span class="comment">// 严格模式: 抛出错误 Cannot assign to read only property "name"</span></span><br><span class="line">obj.name = <span class="string">"yu"</span></span><br></pre></td></tr></table></figure><h4 id="1-2-3-针对函数："><a href="#1-2-3-针对函数：" class="headerlink" title="1.2.3 针对函数："></a>1.2.3 针对函数：</h4><ol><li>要求命名函数的参数必须唯一</li><li>在非严格模式下，修改命名参数的值会反映到 arguments 对象中，而在严格模式下，值是独立的</li><li>arguments.callee 和 arguments.caller，在非严格模式下，这两个属性一个引用函数本身，一个引用调用函数。而在严格模式下，访问哪个属性都会抛出 TypeError</li><li>只能在脚本的顶级和函数内部生命函数</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//非严格模式: 没有错误，后面的参数覆盖前面的值</span></span><br><span class="line"><span class="comment">//严格模式: 抛出语法错误</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"> num, str, num </span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 非严格模式：undefined 12</span></span><br><span class="line">    <span class="comment">// 严格模式: 抛出语法错误</span></span><br><span class="line">    <span class="built_in">console</span>.log( num, str )</span><br><span class="line">&#125;</span><br><span class="line">fn( <span class="number">12</span>, <span class="string">"tan"</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">//非严格模式: 修改会反映到 arguments 中 </span></span><br><span class="line"><span class="comment">//严格模式: 修改不会反映到 arguments 中</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showValue</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    value = <span class="string">"yu"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(value); <span class="comment">// "yu" </span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">// 非严格模式:"yu"，严格模式:"tan"</span></span><br><span class="line">&#125;</span><br><span class="line">showValue(<span class="string">"tan"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//访问 arguments.callee </span></span><br><span class="line"><span class="comment">//非严格模式:没有问题 </span></span><br><span class="line"><span class="comment">//严格模式:抛出 TypeError</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num * <span class="built_in">arguments</span>.callee(num<span class="number">-1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> result=factorial(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在 if 语句中声明函数 </span></span><br><span class="line"><span class="comment">//非严格模式:将函数提升到 if 语句外部 </span></span><br><span class="line"><span class="comment">//严格模式:抛出语法错误</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// todo </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-2-4-针对-eval-函数中的变量"><a href="#1-2-4-针对-eval-函数中的变量" class="headerlink" title="1.2.4 针对 eval() 函数中的变量"></a>1.2.4 针对 eval() 函数中的变量</h4><ol><li>在严格模式中，它在包含上下文中不再创建变量或函数</li><li>在 eval() 函数中声明的变量和函数，只在特殊的终于用中有效，随后将被销毁</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用 eval()创建变量</span></span><br><span class="line"><span class="comment">//非严格模式:弹出对话框显示 10</span></span><br><span class="line"><span class="comment">//严格模式:调用 alert(x)时会抛出 ReferenceError</span></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">"var x=10"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(x);</span><br><span class="line"></span><br><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> result = <span class="built_in">eval</span>(<span class="string">"var x=10, y=11; x+y"</span>);</span><br><span class="line">alert(result);  <span class="comment">// 21   执行结果存在变量内</span></span><br></pre></td></tr></table></figure><h4 id="1-2-5-抑制-this-指向"><a href="#1-2-5-抑制-this-指向" class="headerlink" title="1.2.5 抑制 this 指向"></a>1.2.5 抑制 this 指向</h4><p>在非严格模式下使用函数的 apply()或 call()方法时，null 或 undefined 值会被转换为全局 对象。而在严格模式下，函数的 this 值始终是指定的值，无论指定的是什么值</p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问属性</span></span><br><span class="line"><span class="comment">// 非严格模式: 传入null, 函数的this值是全局对象</span></span><br><span class="line"><span class="comment">// 严格模式: 抛出错误，因为this的值为 null</span></span><br><span class="line"><span class="keyword">var</span> color = <span class="string">"red"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">displayColor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.color);</span><br><span class="line">&#125;</span><br><span class="line">displayColor.call(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><h4 id="1-2-6-其他影响"><a href="#1-2-6-其他影响" class="headerlink" title="1.2.6 其他影响"></a>1.2.6 其他影响</h4><ol><li>严格模式去掉了 JavaScript 中的八进制字面量</li><li>严格模式下 parseInt()的行为，八进制字面量在严格模式下会被当作以 0 开头的十进制字面量</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用八进制字面量 </span></span><br><span class="line"><span class="comment">//非严格模式:值为 8 </span></span><br><span class="line"><span class="comment">//严格模式:抛出语法错误</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="number">010</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 parseInt()解析八进制字面量 </span></span><br><span class="line"><span class="comment">//非严格模式:值为 8 </span></span><br><span class="line"><span class="comment">//严格模式:值为 10</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="built_in">parseInt</span>(<span class="string">"010"</span>);</span><br></pre></td></tr></table></figure><h4 id="1-2-7-总结"><a href="#1-2-7-总结" class="headerlink" title="1.2.7 总结"></a>1.2.7 总结</h4><p>简单的概括一下，严格模式会造成以下影响：</p><ol><li>变量必须定义后才能赋值，且不能随意删除</li><li>修改对象中只读属性和不可配置的属性时，会报错</li><li>函数中，arguments 与参数独立，操作互不影响</li><li>显式绑定 this 时，不能将函数绑定到 null 上</li><li>其他影响，eval 函数执行中的变量定义和定义数字时的进制问题</li></ol><p>严格模式的目的：</p><ol><li>消除 js 语法不严谨的地方，减少奇怪行为（不定义变量，直接赋值，八进制数字）</li><li>消除代码运行不安全的地方（修改只读属性）</li><li>提高编译效率和运行速度</li><li>为未来做铺垫</li></ol><h2 id="二、变量"><a href="#二、变量" class="headerlink" title="二、变量"></a>二、变量</h2><p>有三个关键字可以声明变量：<code>var</code>、<code>let</code>、<code>const</code></p><h3 id="2-1-var、let、const-的区别"><a href="#2-1-var、let、const-的区别" class="headerlink" title="2.1 var、let、const 的区别"></a>2.1 var、let、const 的区别</h3><table><thead><tr><th>关键字</th><th>变量提升</th><th>块级作用域</th><th>重新赋值</th><th>重复声明</th></tr></thead><tbody><tr><td>var</td><td>存在</td><td>不存在</td><td>可以</td><td>可以</td></tr><tr><td>let</td><td>不存在</td><td>存在</td><td>可以</td><td>不可以</td></tr><tr><td>const</td><td>不存在</td><td>存在</td><td>不可以</td><td>不可以</td></tr></tbody></table><p><strong>注意：</strong></p><ol><li>const 必须初始化一个值</li><li>var 声明的变量在浏览器环境会挂载到 window 上，而 let 和 const 不会</li></ol><h3 id="2-2-var、let、const-的使用"><a href="#2-2-var、let、const-的使用" class="headerlink" title="2.2 var、let、const 的使用"></a>2.2 var、let、const 的使用</h3><ol><li>不使用 var 定义变量</li><li>使用 let 定义需要改变的基础变量</li><li>使用 const 定义常量或不会直接更改引用的对象</li></ol><h2 id="三、数据类型"><a href="#三、数据类型" class="headerlink" title="三、数据类型"></a>三、数据类型</h2><p>ECMAScript 有其中简单数据类型（原始类型）：</p><ol><li>number</li><li>string</li><li>boolean</li><li>null</li><li>undefined</li><li>symbol</li><li>bigInt</li></ol><p>复杂数据类型：object（包含对象、function）</p><h3 id="3-1-typeof-操作符"><a href="#3-1-typeof-操作符" class="headerlink" title="3.1 typeof 操作符"></a>3.1 typeof 操作符</h3><p>对一个值使用 <code>typeof</code> 会返回以下字符串之一：</p><ol><li><code>undefined</code> 表示值未定义</li><li><code>boolean</code> 表示值为布尔值</li><li><code>string</code> 表示值为字符串</li><li><code>number</code> 表示值为数字</li><li><code>object</code> 表示值为对象（不是函数）或 null</li><li><code>function</code> 表示值为函数</li><li><code>symbol</code> 表示值为符号</li><li><code>bigint</code> 表示值为bigint</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>  <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>  <span class="comment">// object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>  <span class="comment">// boolean</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"tan"</span>  <span class="comment">// string</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">12</span>  <span class="comment">// number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">12n</span>  <span class="comment">// bigint</span></span><br><span class="line"><span class="keyword">typeof</span> &#123; <span class="attr">name</span>: <span class="string">"yuuu"</span> &#125;  <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">typeof</span> fn  <span class="comment">// function</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;一、语法&quot;&gt;&lt;a href=&quot;#一、语法&quot; class=&quot;headerlink&quot; title=&quot;一、语法&quot;&gt;&lt;/a&gt;一、语法&lt;/h2&gt;&lt;h3 id=&quot;1-1-变量命名规则&quot;&gt;&lt;a href=&quot;#1-1-变量命名规则&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
    
      <category term="红宝书" scheme="http://blog.curtaintan.club/categories/%E7%BA%A2%E5%AE%9D%E4%B9%A6/"/>
    
    
      <category term="js基础" scheme="http://blog.curtaintan.club/tags/js%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>9.30-每日一题</title>
    <link href="http://blog.curtaintan.club/2020/09/30/9-30-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/09/30/9-30-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-09-30T00:30:49.000Z</published>
    <updated>2020-09-30T02:16:18.856Z</updated>
    
    <content type="html"><![CDATA[<ol start="701"><li>二叉搜索树中的插入操作</li></ol><a id="more"></a><h2 id="701-二叉搜索树中的插入操作"><a href="#701-二叉搜索树中的插入操作" class="headerlink" title="701. 二叉搜索树中的插入操作"></a><a href="https://leetcode-cn.com/problems/insert-into-a-binary-search-tree/" target="_blank" rel="noopener">701. 二叉搜索树中的插入操作</a></h2><p>给定二叉搜索树（BST）的根节点和要插入树中的值，将值插入二叉搜索树。 返回插入后二叉搜索树的根节点。 输入数据保证，新值和原始二叉搜索树中的任意节点值都不同。</p><p>注意，可能存在多种有效的插入方式，只要树在插入后仍保持为二叉搜索树即可。 你可以返回任意有效的结果。</p><p>例如：</p><style>.bg-pre {    padding: 10px;    background: rgba(33,150,243,.2);    border-radius: 4px;}</style><pre class="bg-pre" >给定二叉搜索树:        4       / \      2   7     / \    1   3和 插入的值: 5</pre><p>你可以返回这个二叉搜索树:</p><pre class="bg-pre" >         4       /   \      2     7     / \   /    1   3 5</pre><p>或者这个树也是有效的:</p><pre class="bg-pre" >         5       /   \      2     7     / \       1   3         \          4</pre><p><strong>提示：</strong></p><p>新值和原始二叉搜索树中的任意节点值都不同</p><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>由题可知，题目是搜索二叉树，搜索二叉树的特点是，左子节点的值小于当前节点的值，右子节点的值大于当前节点的值</p><p>迭代进行比较，一直比较到下一个位置为 null 时停止，并创建一个节点放在最后就完成了插入</p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * function TreeNode(val, left, right) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = (val===undefined ? 0 : val)</span></span><br><span class="line"><span class="comment"> *     this.left = (left===undefined ? null : left)</span></span><br><span class="line"><span class="comment"> *     this.right = (right===undefined ? null : right)</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;TreeNode&#125; root</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; val</span></span><br><span class="line"><span class="comment"> * @return &#123;TreeNode&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> insertIntoBST = <span class="function"><span class="keyword">function</span>(<span class="params">root, val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( !root ) <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(val)</span><br><span class="line">    <span class="keyword">let</span> node = root</span><br><span class="line">    <span class="comment">// 依次迭代</span></span><br><span class="line">    <span class="keyword">while</span>( node )&#123;</span><br><span class="line">        <span class="keyword">if</span>( val &lt; node.val )&#123;</span><br><span class="line">            <span class="comment">// 迭代到最后，插入节点</span></span><br><span class="line">            <span class="keyword">if</span>( !node.left )&#123;</span><br><span class="line">                node.left = <span class="keyword">new</span> TreeNode(val)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                node = node.left</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>( !node.right )&#123;</span><br><span class="line">                node.right = <span class="keyword">new</span> TreeNode(val)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                node = node.right</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回首节点</span></span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><p>递归实现：</p><blockquote><p>递归结束条件：当前节点为 null，返回以 val 新建的节点<br>将节点的左右节点进行赋值，赋值为当前函数的调用<br>最后返回当前节点</p></blockquote><h2 id="递归实现"><a href="#递归实现" class="headerlink" title="递归实现"></a>递归实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> insertIntoBST = <span class="function"><span class="keyword">function</span>(<span class="params">root, val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( !root ) <span class="keyword">return</span> <span class="keyword">new</span> TreeNode(val)</span><br><span class="line">    <span class="keyword">if</span>( val &lt; root.val )&#123;</span><br><span class="line">        root.left = insertIntoBST( root.left, val )</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        root.right = insertIntoBST( root.right, val )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;701&quot;&gt;
&lt;li&gt;二叉搜索树中的插入操作&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="二叉树" scheme="http://blog.curtaintan.club/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
      <category term="二叉搜索树" scheme="http://blog.curtaintan.club/tags/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>9.29-每日一题--二叉树后序遍历</title>
    <link href="http://blog.curtaintan.club/2020/09/29/9-29-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/09/29/9-29-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-09-29T00:47:28.000Z</published>
    <updated>2020-09-29T01:36:51.539Z</updated>
    
    <content type="html"><![CDATA[<ol start="145"><li>二叉树的后序遍历</li></ol><a id="more"></a><p><a href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/" target="_blank" rel="noopener">145. 二叉树的后序遍历</a></p><p>给定一个二叉树，返回它的 后序 遍历。</p><style>.bg-pre {    padding: 10px;    background: rgba(33,150,243,.2);    border-radius: 4px;}</style><p>示例:</p><pre class="bg-pre" > 输入: [1,null,2,3]     1    \     2    /   3 </pre><p>输出: [3,2,1]<br>进阶: 递归算法很简单，你可以通过迭代算法完成吗？</p><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><ol><li>当前节点存在左节点，递归左节点</li><li>当前节点存在右节点，递归右节点</li><li>将当前节点的值存到结果中</li></ol><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> postorderTraversal = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 保存最后结果</span></span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    <span class="keyword">let</span> dfs = <span class="function">(<span class="params"> node </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>( !node ) <span class="keyword">return</span></span><br><span class="line">        <span class="comment">// 左右子树递归</span></span><br><span class="line">        node.left &amp;&amp; dfs( node.left )</span><br><span class="line">        node.right &amp;&amp; dfs( node.right )</span><br><span class="line">        res.push( node.val )</span><br><span class="line">    &#125;</span><br><span class="line">    dfs( root )</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;145&quot;&gt;
&lt;li&gt;二叉树的后序遍历&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="二叉树" scheme="http://blog.curtaintan.club/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>javascript之类型转换</title>
    <link href="http://blog.curtaintan.club/2020/09/28/javascript%E4%B9%8B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
    <id>http://blog.curtaintan.club/2020/09/28/javascript%E4%B9%8B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</id>
    <published>2020-09-28T08:58:25.000Z</published>
    <updated>2020-10-04T14:29:40.627Z</updated>
    
    <content type="html"><![CDATA[<p>js 中类型转换分为显式类型转换和隐式类型转换</p><ol><li>显式类型转换方法：<code>Number()</code>、<code>parseInt()</code>、<code>parseFloat()</code>、<code>toString()</code>、<code>String</code>、<code>Boolean()</code></li><li>隐式类型转换：逻辑运算符（ &amp;&amp;、||、！ ）、运算符（+、-、*、/）、关系运算符（&gt;、&lt;、&lt;=、&gt;=）、相等运算符（==）、if/while 条件运算</li></ol><h2 id="一、显式类型转换"><a href="#一、显式类型转换" class="headerlink" title="一、显式类型转换"></a>一、显式类型转换</h2><h3 id="1-1-Number"><a href="#1-1-Number" class="headerlink" title="1.1 Number()"></a>1.1 Number()</h3><blockquote><p>Number() 能将任意类型的参数转换为数值类型</p></blockquote><p>规则如下：</p><ul><li>布尔值：true 和 false 分别被转换为 1 和 0</li><li>数字：返回本身</li><li>null：返回 0</li><li>undefined：返回 NaN </li><li>字符串：<ul><li>只包含数字（<code>0X</code>/<code>0x</code>开头的十六进制数字字符串，允许正负号），返回十进制数</li><li>包含有效浮点数，返回浮点数</li><li>空字符串，返回0</li><li>不是以上形式的字符串，返回 NaN</li></ul></li><li>Symbol：抛错</li><li>对象：调用对象的 <code>valueOf()</code> 方法，然后依据前面的规则转换返回的值，如果转换的结果是 <code>NaN</code>，则调用对象的 <code>toString()</code> 方法，再次按照前面的规则转换返回的字符串</li></ul><p><strong>强调：</strong></p><blockquote><p>当对象转换为数字时，调用对象的 <code>valueOf()</code> 方法，然后依据前面的规则转换返回的值，如果转换的结果是引用类型，则调用对象的 <code>toString()</code> 方法，再次按照前面的规则转换返回的字符串，如果返回还是引用类型，最后返回 <code>NaN</code></p></blockquote><style>table th:first-of-type {    width: 100px;}table th:nth-of-type(3) {    width: 100px;}</style><p>部分内置对象默认调用的 <code>valueOf()</code> 方法的行为：</p><table><thead><tr><th>对象</th><th>返回值</th><th>类型</th></tr></thead><tbody><tr><td>Boolean</td><td>布尔值</td><td>基础类型</td></tr><tr><td>Date</td><td>返回毫秒数-从1970.1.1 0:0:0 开始计算</td><td>基础类型</td></tr><tr><td>Nunber</td><td>数字值</td><td>基础类型</td></tr><tr><td>String</td><td>字符串值</td><td>基础类型</td></tr><tr><td>Array</td><td>返回数组本身</td><td>对象类型</td></tr><tr><td>Object</td><td>对象本身</td><td>对象类型</td></tr><tr><td>Function</td><td>函数本身</td><td>对象类型</td></tr></tbody></table><p><strong>注意：</strong></p><p>当数组只有一个元素时，会将第一个元素提取出来做转换</p><p><strong>案例：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Number() 类型转换</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">true</span>)        <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">null</span>)        <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">undefined</span>)   <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">"0x15"</span>)      <span class="comment">// 21   0x15 -&gt; 16+5=21</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">""</span>)          <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">"-0X16"</span>)     <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="built_in">Symbol</span>(<span class="number">12</span>))  <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// valueOf() 方法返回值</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].valueOf()     <span class="comment">// [1, 2, 3, 4]  对象类型</span></span><br><span class="line"><span class="built_in">Number</span>( [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] )     <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Number</span>( [ <span class="number">12</span> ] )        <span class="comment">// 12</span></span><br><span class="line"><span class="built_in">Number</span>( [ <span class="string">"12"</span> ] )      <span class="comment">// 12</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> empty = [].valueOf()   <span class="comment">// []  对象类型</span></span><br><span class="line"><span class="built_in">Number</span>( empty )   <span class="comment">// 0  [].valueOf()=[]-&gt;NaN, 再调用empty.toString()='' Number("") -&gt; 0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Boolean</span>().valueOf()     <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Number</span>( <span class="built_in">Boolean</span>() )     <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">date.valueOf()          <span class="comment">// 1601345955850</span></span><br><span class="line"><span class="built_in">Number</span>( date )          <span class="comment">// 1601345955850</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123; <span class="keyword">var</span> a = <span class="number">1</span> &#125;</span><br><span class="line">fn.valueOf()            <span class="comment">// fn()&#123; var a = 1 &#125;</span></span><br><span class="line"><span class="built_in">Number</span>( fn )            <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">name</span>: <span class="string">"tan"</span> &#125;</span><br><span class="line">obj.valueOf()           <span class="comment">// &#123;name: "tan"&#125;   // 对象本身</span></span><br><span class="line"><span class="built_in">Number</span>( fn )            <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><h3 id="1-2-parseInt-param，radix"><a href="#1-2-parseInt-param，radix" class="headerlink" title="1.2 parseInt( param，radix )"></a>1.2 parseInt( param，radix )</h3><p>传入两个参数，第一个是需要进行转换的参数，第二是转换的进制，最终返回十进制数字或NaN</p><h4 id="1-2-1-第一个参数是字符串："><a href="#1-2-1-第一个参数是字符串：" class="headerlink" title="1.2.1 第一个参数是字符串："></a>1.2.1 第一个参数是字符串：</h4><ol><li>忽略字符串前面的空格，从非空字符开始计算</li><li>空字符串返回 NaN</li><li>第一个字符超过进制，返回 NaN，进制从0-9a-z开始计算，最大进制为 36</li><li>如果第一个字符在进制内，则解析到第一个超出进制的符号为止</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">"  0111"</span>)      <span class="comment">// 111</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">""</span>)            <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"1c"</span>, <span class="number">13</span>)      <span class="comment">// 25  13+12</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"1cd"</span>, <span class="number">13</span>)     <span class="comment">// 25  13+12</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"dc1"</span>, <span class="number">13</span>)     <span class="comment">// NaN d进制超过13</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">"-1cd"</span>, <span class="number">13</span>)    <span class="comment">// -25</span></span><br></pre></td></tr></table></figure><h4 id="1-2-2-第一个参数是数字："><a href="#1-2-2-第一个参数是数字：" class="headerlink" title="1.2.2 第一个参数是数字："></a>1.2.2 第一个参数是数字：</h4><ol><li>第一个参数不是以 0 开头的，以第二个参数作为进制进行转换</li><li>第一个参数是以 0 开头的，先进行八进制转换，再以第二个参数作为进制进行转换</li><li>第一个参数是以 <code>0X/0x</code> 开头的，先进行十六进制转换，在以第二个参数作为进制进行转换</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="number">111</span>)       <span class="comment">// 111</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">13</span>, <span class="number">16</span>)    <span class="comment">// 19   16+3</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">013</span>, <span class="number">16</span>)   <span class="comment">// 17   013-&gt;8+3=11  11-&gt;16+1=17</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="number">0X13</span>, <span class="number">16</span>)  <span class="comment">// 25   0X13-&gt;16+3=19  19-&gt;16+9=25</span></span><br></pre></td></tr></table></figure><h4 id="1-2-3-第一个参数是-null-或-undefined"><a href="#1-2-3-第一个参数是-null-或-undefined" class="headerlink" title="1.2.3 第一个参数是 null 或 undefined"></a>1.2.3 第一个参数是 <code>null</code> 或 <code>undefined</code></h4><p>返回 <code>NaN</code></p><h4 id="1-2-4-第一个元素是数组"><a href="#1-2-4-第一个元素是数组" class="headerlink" title="1.2.4 第一个元素是数组"></a>1.2.4 第一个元素是数组</h4><p>取数组的第一个元素作为第一个参数，再进行进制转换</p><p>空数组返回 <code>NaN</code></p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>([<span class="number">11</span>], <span class="number">16</span>)  <span class="comment">// 17  16+1=17</span></span><br><span class="line"><span class="built_in">parseInt</span>([<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">23</span>], <span class="number">16</span>)  <span class="comment">// 17</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>([])  <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><h4 id="1-2-5-第一个参数是-Symbol-类型"><a href="#1-2-5-第一个参数是-Symbol-类型" class="headerlink" title="1.2.5 第一个参数是 Symbol 类型"></a>1.2.5 第一个参数是 Symbol 类型</h4><p>抛出错误</p><h3 id="1-3-parseFloat-string-string"><a href="#1-3-parseFloat-string-string" class="headerlink" title="1.3 parseFloat( string: string )"></a>1.3 parseFloat( string: string )</h3><p>将参数转为浮点型数字，没有进制转换，转换规则与 <code>parseInt</code> 基本相同</p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>( <span class="string">"123.45abc"</span> )   <span class="comment">// 123.45</span></span><br><span class="line"><span class="built_in">parseFloat</span>( [<span class="string">"123.45abc"</span>, <span class="string">"78"</span>, <span class="string">"9"</span>] )   <span class="comment">// 123.45</span></span><br></pre></td></tr></table></figure><h3 id="1-4-toString-方法"><a href="#1-4-toString-方法" class="headerlink" title="1.4 toString() 方法"></a>1.4 toString() 方法</h3><p>转换规则如下：</p><ol><li>Number类型：输出数字字符串，函数可以填入转换进制</li><li><code>null</code> 或 <code>undefined</code>：抛错</li><li>数组：将数组展开，空数组返回 <code>&quot;&quot;</code></li><li>对象：返回 <code>[object Object]</code></li><li>Date：返回日期的文字表示法</li><li>函数：函数的字符串</li><li>Symbol：输出 Symbol 字符串</li><li>Boolean：返回字符串</li></ol><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">29</span></span><br><span class="line">num.toString()      <span class="comment">// '29'</span></span><br><span class="line">num.toString(<span class="number">15</span>)    <span class="comment">// '1e'    15+14   14-&gt;e</span></span><br><span class="line"><span class="number">29.5</span> .toString(<span class="number">15</span>)  <span class="comment">// '1e.7777777777778'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nul = <span class="literal">null</span></span><br><span class="line">nul.toString()      <span class="comment">// 抛错</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].toString()  <span class="comment">// '1,2,3'</span></span><br><span class="line">[&#123;<span class="attr">name</span>:<span class="string">"tan"</span>&#125;,<span class="number">1</span>,<span class="number">3</span>].toString()   <span class="comment">// '[object Object],1,3'</span></span><br><span class="line">[].toString()   <span class="comment">// ''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>:<span class="string">"tan"</span>&#125;</span><br><span class="line">obj.toString()  <span class="comment">// '[object Object]'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">date.toString() <span class="comment">// 'Tue Sep 29 2020 18:20:50 GMT+0800 (中国标准时间)'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">"tan"</span>) &#125;</span><br><span class="line">fn.toString()   <span class="comment">// 'function fn()&#123; console.log("tan") &#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tan = <span class="built_in">Symbol</span>(<span class="string">"tan"</span>)</span><br><span class="line">tan.toString()  <span class="comment">// 'Symbol(tan)'</span></span><br><span class="line"></span><br><span class="line"><span class="literal">true</span>.toString() <span class="comment">// 'true'</span></span><br></pre></td></tr></table></figure><h3 id="1-5-String-value-any"><a href="#1-5-String-value-any" class="headerlink" title="1.5 String( value?: any )"></a>1.5 String( value?: any )</h3><p>将参数转为字符串，与 <code>toString</code> 转换规则基本类似，只能传一个参数</p><p>与 <code>toString()</code> 不同，<code>String()</code> 可以转换 <code>null</code> 和 <code>undefined</code></p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>(<span class="number">123</span>)     <span class="comment">// '123'</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">true</span>)    <span class="comment">// 'true'</span></span><br><span class="line"><span class="built_in">String</span>(&#123;&#125;)      <span class="comment">// '[object Object]'</span></span><br><span class="line"><span class="built_in">String</span>([])      <span class="comment">// ""</span></span><br><span class="line"><span class="built_in">String</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment">// '1,2,3'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">null</span>)    <span class="comment">// 'null'</span></span><br><span class="line"><span class="built_in">String</span>( <span class="literal">undefined</span> ) <span class="comment">// 'undefined'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">"tan"</span>) &#125;</span><br><span class="line"><span class="built_in">String</span>(fn)     <span class="comment">// 'function fn()&#123; console.log("tan") &#125;'</span></span><br></pre></td></tr></table></figure><h3 id="1-6-Boolean-value-any"><a href="#1-6-Boolean-value-any" class="headerlink" title="1.6 Boolean( value?: any )"></a>1.6 Boolean( value?: any )</h3><p><code>undefined</code>、<code>null</code>、<code>false</code>、<code>&#39;&#39;</code>、<code>0</code>，<code>+-0</code>、<code>NaN</code> 转换为 <code>false</code></p><p>其余都是 <code>true</code>，负数转为 <code>true</code></p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Boolean</span>(<span class="literal">undefined</span>)  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">null</span>)       <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="number">0</span>)          <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="number">-0</span>)         <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">NaN</span>)        <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="number">-34</span>)        <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>([])         <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="二、隐式类型转换"><a href="#二、隐式类型转换" class="headerlink" title="二、隐式类型转换"></a>二、隐式类型转换</h2><blockquote><p>逻辑运算符（ &amp;&amp;、||、！ ）、运算符（+、-、*、/）、关系运算符（&gt;、&lt;、&lt;=、&gt;=）、相等运算符（==）、if/while 条件运算</p></blockquote><h3 id="2-1-条件判断"><a href="#2-1-条件判断" class="headerlink" title="2.1 条件判断"></a>2.1 条件判断</h3><blockquote><p>&amp;&amp;、||、!、if/while 条件判断</p></blockquote><p>会将数据转换成 Boolean 类型，转换规则同 Boolean 强制类型转换</p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>( [] )      <span class="comment">// true</span></span><br><span class="line"><span class="keyword">if</span>( ![] )     <span class="comment">// false</span></span><br><span class="line"><span class="keyword">if</span>( <span class="number">-1</span> )      <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h3 id="2-2-运算符"><a href="#2-2-运算符" class="headerlink" title="2.2 运算符"></a>2.2 运算符</h3><blockquote><p>运算符：+ - * /</p></blockquote><h4 id="2-2-1-运算符"><a href="#2-2-1-运算符" class="headerlink" title="2.2.1 + 运算符"></a>2.2.1 + 运算符</h4><p>用于数字相加和字符串拼接</p><ol><li>当一侧为 <code>String</code> 类型时，被识别为字符串拼接，优先将另一侧调用 <code>String()</code> 转换为字符串</li><li>当一侧为 <code>Number</code> 类型时，另一侧为原始类型时，将原始类型调用 <code>Number()</code> 转化为数字类型</li><li>当一侧为 <code>Number</code> 类型时，另一侧为引用类型时，将引用类型作为参数调用 <code>String()</code> 和 <code>Number</code> 类型转换为字符串后拼接</li></ol><p>以上三点，优先级从高到低</p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span> + <span class="string">"123"</span>   <span class="comment">// 123123</span></span><br><span class="line"><span class="number">123</span> + <span class="literal">true</span>    <span class="comment">// 124</span></span><br><span class="line"><span class="number">123</span> + <span class="literal">null</span>    <span class="comment">// 123</span></span><br><span class="line"><span class="string">"1"</span> + <span class="number">4</span> + <span class="number">5</span> + <span class="string">"6"</span> <span class="comment">// 1456</span></span><br><span class="line"></span><br><span class="line"><span class="number">123</span> + &#123;&#125;      <span class="comment">// 123[object Object]   &#123;&#125; -&gt; String(&#123;&#125;) -&gt; [object Object]</span></span><br><span class="line"><span class="number">123</span> + <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;&#125;  <span class="comment">// 123function fn()&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nul = <span class="literal">null</span></span><br><span class="line"><span class="string">"tan"</span> + nul     <span class="comment">// tannull    null -&gt; String(null) -&gt; null</span></span><br><span class="line"></span><br><span class="line"><span class="number">12</span> + [ <span class="number">5</span>, <span class="number">4</span> ]   <span class="comment">// 125,4    [5, 4] -&gt; String([5,4]) =&gt; 5,4</span></span><br></pre></td></tr></table></figure><h4 id="2-2-1-运算符-1"><a href="#2-2-1-运算符-1" class="headerlink" title="2.2.1 - * / 运算符"></a>2.2.1 - * / 运算符</h4><p>将各种非 <code>Number</code> 类型隐式调用 <code>Number()</code> 函数将值转换为数值类型，如果其中一个转换为 <code>NaN</code>，结果为 <code>NaN</code></p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span> + <span class="literal">true</span> <span class="comment">// 2</span></span><br><span class="line"><span class="number">2</span> - <span class="literal">true</span>    <span class="comment">// 3</span></span><br><span class="line"><span class="number">5</span> - <span class="number">012</span>     <span class="comment">// -5    012 -&gt; Number(012) -&gt; 8+2=10</span></span><br><span class="line"><span class="number">5</span> - <span class="number">0x12</span>    <span class="comment">// -13   0x12 -&gt; Number(0x12) -&gt; 16+2=18</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span> - [ <span class="number">2</span> ]    <span class="comment">// 3  [2] -&gt; Number([2]) -&gt; 2</span></span><br><span class="line"><span class="number">5</span> - [ <span class="number">2</span>, <span class="number">3</span> ] <span class="comment">// NaN [2, 3] -&gt; Number([2, 3]) -&gt; NaN</span></span><br><span class="line"><span class="number">5</span> - &#123;&#125;       <span class="comment">// NaN  &#123;&#125; -&gt; Number(&#123;&#125;) -&gt; NaN</span></span><br></pre></td></tr></table></figure><h3 id="2-3-关系操作符"><a href="#2-3-关系操作符" class="headerlink" title="2.3 关系操作符"></a>2.3 关系操作符</h3><blockquote><p>关系操作符：==、&lt;、&gt;、&lt;=、&lt;= </p></blockquote><h4 id="2-3-1-lt-、-gt-、-lt-、-lt-操作符"><a href="#2-3-1-lt-、-gt-、-lt-、-lt-操作符" class="headerlink" title="2.3.1 &lt;、&gt;、&lt;=、&lt;= 操作符"></a>2.3.1 &lt;、&gt;、&lt;=、&lt;= 操作符</h4><ol><li>两个操作值都是数值，进行数值比较</li><li>都是字符串，比较字符对应的字符编码值</li><li>一方是 Symbol，抛错</li><li>除了上述情况，都使用 <code>Number()</code> 函数进行隐式转换，再进行比较</li></ol><p><strong>注意：</strong></p><blockquote><p>NaN 与任何数值比较都不相等，都返回 false</p></blockquote><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">26</span>] &gt; [<span class="number">12</span>]     <span class="comment">// true     [26] -&gt; Number([26]) -&gt; 26    [24] -&gt; 24 </span></span><br><span class="line"><span class="string">"abc"</span> &lt; <span class="string">"acb"</span>   <span class="comment">// true     b &lt; c</span></span><br><span class="line"><span class="number">77</span> &gt; <span class="string">"76"</span>       <span class="comment">// true</span></span><br><span class="line"><span class="number">77</span> &gt; <span class="string">"76a"</span>      <span class="comment">// false    76a -&gt; Number("76a") -&gt; NaN</span></span><br><span class="line"><span class="number">77</span> &gt; []         <span class="comment">// true     Number([])  -&gt; 0</span></span><br><span class="line"></span><br><span class="line"><span class="number">18</span> &gt; <span class="string">"0x11"</span>     <span class="comment">// true    0x11 -&gt; Number(0x11) -&gt; 16+1=17</span></span><br><span class="line"><span class="number">17</span> &gt; <span class="string">"0x11"</span>     <span class="comment">// false   0x11 -&gt; Number(0x11) -&gt; 16+1=17</span></span><br></pre></td></tr></table></figure><h4 id="2-3-1-操作符"><a href="#2-3-1-操作符" class="headerlink" title="2.3.1 == 操作符"></a>2.3.1 == 操作符</h4><ol><li><code>NaN</code> 不与其他任何值相等</li><li><code>null</code> 与 <code>undefined</code> 进行比较为 <code>true</code></li><li><code>null</code>、<code>undefined</code> 与其他任何值比较结果都为 <code>false</code></li></ol><ol><li><code>Boolean</code> 与其他类型比较，<code>Boolean</code> 先转换为 <code>Number</code></li><li><code>String</code> 与 <code>Number</code> 进行比较，<code>String</code> 转换为 <code>Number</code></li><li>引用类型与基础类型进行比较，引用类型先转换为基础类型（调用 ToPrimitive）</li><li>引用类型与引用类型，直接判断是否指向同一对象</li></ol><p><strong>注意：</strong></p><blockquote><p>如果没有部署 [Symbol.toPrimitive] 接口，则先返回 <code>valudeOf()</code> 的值，若返回的不是基础类型，再返回 <code>toString()</code> 的值，若返回的不是基础类型的值，则抛出错误</p></blockquote><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[] == ![]    <span class="comment">// true</span></span><br><span class="line"><span class="comment">// ![] -&gt; false</span></span><br><span class="line"><span class="comment">// 再运用规则一：false -&gt; 0</span></span><br><span class="line"><span class="comment">// 再运用规则三：[] 调用 toPrimitive 返回 0</span></span><br><span class="line"><span class="comment">// 0 == 0   返回 true</span></span><br><span class="line"></span><br><span class="line"><span class="string">"[object Object]"</span> = &#123;&#125;  <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 引用类型与基础类型进行比较，引用类型先调用 ToPrimitive 函数，</span></span><br><span class="line"><span class="comment">// 没有 ToPrimitive 函数，则调用 &#123;&#125;.valueOf() 返回引用类型的值</span></span><br><span class="line"><span class="comment">// 返回值不是基础类型，继续调用 &#123;&#125;.toString() 返回 [object Object]</span></span><br></pre></td></tr></table></figure><h2 id="附加知识点–对象转换成原始数据类型"><a href="#附加知识点–对象转换成原始数据类型" class="headerlink" title="附加知识点–对象转换成原始数据类型"></a>附加知识点–对象转换成原始数据类型</h2><p>如果部署了 [Symbol.toPrimitive] 接口，那么调用此接口，若返回的不是基础数据类型，抛出错误。</p><p>如果没有部署 [Symbol.toPrimitive] 接口，那么先返回 valueOf() 的值，若返回的不是基础类型的值，再返回 toString() 的值，若返回的不是基础类型的值， 则抛出异常。</p><p>案例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先调用 valueOf, 后调用 toString</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">200</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    valueOf() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">300</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    toString() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Hello'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果 valueOf 返回的不是基本数据类型，则会调用 toString， </span></span><br><span class="line"><span class="comment">//如果 toString 返回的也不是基本数据类型，会抛出错误</span></span><br><span class="line"><span class="built_in">console</span>.log(obj + <span class="number">200</span>); <span class="comment">//400</span></span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>js 类型转换分为显式转换和隐式转换</p><p>通过本文可知，隐式转换也是间接的调用显式转换的方法来进行转换的，但是我们需要记住隐式转换的规则</p><h3 id="在显式转换的方法中，需要注意的以下几点："><a href="#在显式转换的方法中，需要注意的以下几点：" class="headerlink" title="在显式转换的方法中，需要注意的以下几点："></a>在显式转换的方法中，需要注意的以下几点：</h3><ol><li>Number( value: any ): 参数以 <code>0</code> 开头会进行八进制转换，以 <code>0x/0X</code> 开头会进行十六进制转换</li><li>parseInt( value, radix )：参数是数组时，取第一个元素转换，与 <code>Number()</code> 处理数组的方式不同，传空数组时，会返回 <code>NaN</code>,而 <code>Number([])</code> 会返回 <code>0</code></li><li>toString(): <code>toString</code> 方法可以将数字转为特定进制的字符串</li></ol><h3 id="显式转换的使用："><a href="#显式转换的使用：" class="headerlink" title="显式转换的使用："></a>显式转换的使用：</h3><ol><li>实现进制互相转换</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">29</span></span><br><span class="line"><span class="keyword">let</span> str = num.toString( <span class="number">16</span> )    <span class="comment">// 1d  16+13=29  13-&gt;d</span></span><br><span class="line"><span class="keyword">let</span> strToNum = <span class="built_in">parseInt</span>( str, <span class="number">16</span> )</span><br><span class="line"><span class="built_in">console</span>.log( str, strToNum )    <span class="comment">// 1d 29</span></span><br></pre></td></tr></table></figure><ol start="2"><li>生成随机字符串</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> randomStr = <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).slice(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log( randomStr )    <span class="comment">// j40a2j457ojg   36进制可以包含所有字母</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>数组去重</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [ <span class="number">123</span>, <span class="number">123</span>, &#123; <span class="attr">name</span>: <span class="string">"tan"</span> &#125;, [ <span class="number">123</span> ], [ <span class="number">1</span>,<span class="number">2</span> ], &#123; <span class="attr">name</span>: <span class="string">"tan"</span> &#125;, [ <span class="number">1</span>,<span class="number">2</span> ] ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> copyArr = arr.map( <span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">JSON</span>.stringify( item ) )</span><br><span class="line"><span class="keyword">let</span> flatArr = [ ...new <span class="built_in">Set</span>( copyArr ) ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newArr = flatArr.map( <span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">JSON</span>.parse( item ) )</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["123", "123", "&#123;"name":"tan"&#125;", "[123]", "[1,2]", "&#123;"name":"tan"&#125;", "[1,2]"]</span></span><br><span class="line"><span class="built_in">console</span>.log( copyArr )</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["123", "&#123;"name":"tan"&#125;", "[123]", "[1,2]"]</span></span><br><span class="line"><span class="built_in">console</span>.log( flatArr )</span><br></pre></td></tr></table></figure></li><li><p>函数深拷贝</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"hello"</span> )</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"hello1111"</span> )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> bodyStr = <span class="string">""</span></span><br><span class="line">fn.toString().replace( <span class="regexp">/\&#123;(.*)\&#125;/</span>sm, <span class="function"><span class="keyword">function</span>(<span class="params"> all, one </span>)</span>&#123;</span><br><span class="line">    bodyStr = <span class="built_in">arguments</span>[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> newFn = <span class="keyword">new</span> <span class="built_in">Function</span>( bodyStr )</span><br><span class="line"></span><br><span class="line"><span class="comment">// hello</span></span><br><span class="line"><span class="comment">// hello1111</span></span><br><span class="line">newFn()</span><br></pre></td></tr></table></figure></li></ol><p><strong>写下这篇文章希望对你有帮助，共勉-</strong></p><h2 id="参考材料"><a href="#参考材料" class="headerlink" title="参考材料"></a>参考材料</h2><p><a href="https://juejin.im/post/6844903828093927431#heading-6" target="_blank" rel="noopener">刘小夕–JS 类型转换的规则是什么？</a></p><p><a href="https://juejin.im/post/6869699873407500295" target="_blank" rel="noopener">粥里有勺糖–offer收割机–js的隐式类型转换规则整理</a></p><p><a href="https://chinese.freecodecamp.org/news/javascript-implicit-type-conversion/" target="_blank" rel="noopener">freeCodeCamp–Javascript 隐式类型转换，一篇就够了！</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;js 中类型转换分为显式类型转换和隐式类型转换&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;显式类型转换方法：&lt;code&gt;Number()&lt;/code&gt;、&lt;code&gt;parseInt()&lt;/code&gt;、&lt;code&gt;parseFloat()&lt;/code&gt;、&lt;code&gt;toString()&lt;/c
      
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://blog.curtaintan.club/categories/JavaScript/"/>
    
    
      <category term="js基础" scheme="http://blog.curtaintan.club/tags/js%E5%9F%BA%E7%A1%80/"/>
    
      <category term="科普" scheme="http://blog.curtaintan.club/tags/%E7%A7%91%E6%99%AE/"/>
    
  </entry>
  
  <entry>
    <title>红宝书第二章-HTML中的js</title>
    <link href="http://blog.curtaintan.club/2020/09/28/%E7%BA%A2%E5%AE%9D%E4%B9%A6%E7%AC%AC%E4%BA%8C%E7%AB%A0-HTML%E4%B8%AD%E7%9A%84js/"/>
    <id>http://blog.curtaintan.club/2020/09/28/%E7%BA%A2%E5%AE%9D%E4%B9%A6%E7%AC%AC%E4%BA%8C%E7%AB%A0-HTML%E4%B8%AD%E7%9A%84js/</id>
    <published>2020-09-28T00:51:11.000Z</published>
    <updated>2020-09-28T08:33:24.832Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、-lt-script-gt-元素"><a href="#一、-lt-script-gt-元素" class="headerlink" title="一、&lt;script&gt; 元素"></a>一、&lt;script&gt; 元素</h2><p><code>&lt;script&gt;</code> 元素由网景公司创造出来，并在网景浏览器2中实现，<code>&lt;script&gt;</code> 元素有以下 8 个属性</p><style>table th:first-of-type {    width: 130px;}table th:nth-of-type(2) {    width: 100px;}</style><table><thead><tr><th>属性名</th><th>填写</th><th>说明</th></tr></thead><tbody><tr><td>async</td><td>选填</td><td>表示立即下载该脚本，但不阻止其他页面操作，比如下载资源或等待掐他脚本加载</td></tr><tr><td>charset</td><td>可选</td><td>使用 src 属性指定的代码字符集，很少使用</td></tr><tr><td>corssorigin</td><td>可选</td><td>配置相关请求的CORS设置，默认不使用 CORS</td></tr><tr><td>defer</td><td>可选</td><td>立即下载脚本，不阻止页面其他操作，在文档解析完成后再执行脚本</td></tr><tr><td>integrity</td><td>可选</td><td>允许对比接收到的资源和指定的加密签名以验证资源的完整性，如果接收到的资源的签名与这个属性指定的签名不匹配，页面会报错，脚本不执行</td></tr><tr><td>language</td><td>废弃</td><td>用来标识代码块中的脚本语言，如 <code>VB</code>、<code>JS</code></td></tr><tr><td>src</td><td>可选</td><td>包含要执行代码的外部文件</td></tr><tr><td>type</td><td>可选</td><td>代替<code>language</code>，表示代码块中脚本语言的内容类型，一般是<code>text/javascript</code>，如果这个值是 <code>module</code> ，则代码会被当成 ES6 模块，而且只有这时候代码中才能出现 <code>import</code> 和 <code>export</code> 关键字</td></tr></tbody></table><p><strong>注意：</strong> 使用了 src 属性的 <code>&lt;script&gt;</code> 元素不应该再在元素中包含其他 javascript 代码，如果两者都提供的话，则浏览器只会下载并执行脚本，从而忽略行内代码</p><h3 id="lt-script-gt-标签位置"><a href="#lt-script-gt-标签位置" class="headerlink" title="&lt;script&gt; 标签位置"></a><code>&lt;script&gt;</code> 标签位置</h3><p>由于 script 标签会打断 DOM 的解析，所以将脚本放置在文档首部会阻塞 DOM 的解析，导致页面加载变慢，所以一般将 script 标签放在 body 元素中的内容后面，页面会在处理 js 代码之前完成渲染页面</p><h3 id="推迟脚本执行"><a href="#推迟脚本执行" class="headerlink" title="推迟脚本执行"></a>推迟脚本执行</h3><p>HTML4.0.1 为 script 标签定义了 defer 属性，这个属性表示脚本在整个页面解析完成之后再运行，HTML5 规范要求脚本要求脚本按照他们出现的顺序执行，因此第一个推迟的脚本会在第二个推迟的脚本之前运行（defer脚本按顺序执行），并且两者都会在 <code>DOMContentLoaded</code> 事件之前执行</p><h3 id="异步执行脚本"><a href="#异步执行脚本" class="headerlink" title="异步执行脚本"></a>异步执行脚本</h3><p>HTML5 为 script 元素定义了 async 属性，async 与 defer 类似，脚本的加载不会阻塞 DOM 的解析，但是 async 脚本加载完成会立即执行，如果此时还在进行 ODM 的解析，会打断 DOM 解析，被标记为 async 的脚本不能保证按照他们出现的顺序执行，异步脚本会在页面的 <code>load</code> 事件前执行</p><h3 id="动态加载脚本"><a href="#动态加载脚本" class="headerlink" title="动态加载脚本"></a>动态加载脚本</h3><p>除了 script 标签，还有其他方式加载脚本，</p><ol><li>使用 js 创建 script 标签</li><li>在文档头部预加载：<code>&lt;link rel=&quot;preload&quot; href=&quot;a.js&quot;&gt;</code></li></ol><h4 id="lt-noscript-gt-元素"><a href="#lt-noscript-gt-元素" class="headerlink" title="&lt;noscript&gt; 元素"></a><code>&lt;noscript&gt; 元素</code></h4><p>针对早期浏览器不支持 javascript 的问题，需要一个页面优雅降级的处理方案，<code>&lt;noscript&gt;</code> 元素出现，对不支持 javascript 的浏览器提供替代内容，与 <code>&lt;canvas&gt;</code> 元素中添加内容的目的一样，用于提示用户不支持相关操作</p><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ol><li>使用外部 javascript 文件时，必须将 src 属性设置为包含文件的 URL</li><li>对于不推迟执行的脚本，通常会把 <code>&lt;script&gt;</code> 元素放到页面尾部，介于主内容尾部和<code>&lt;/body&gt;</code>标签之前</li><li>使用 defer 属性会把脚本推迟到文档渲染完毕之后执行，推迟的脚本总是按照他们被列出的次序执行</li><li>使用 async 属性异步加载脚本，让脚本加载完成立马执行</li><li>通过使用 <code>&lt;noscript&gt;</code> 元素指定浏览器不支持脚本时显示的内容</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;一、-lt-script-gt-元素&quot;&gt;&lt;a href=&quot;#一、-lt-script-gt-元素&quot; class=&quot;headerlink&quot; title=&quot;一、&amp;lt;script&amp;gt; 元素&quot;&gt;&lt;/a&gt;一、&amp;lt;script&amp;gt; 元素&lt;/h2&gt;&lt;p&gt;&lt;cod
      
    
    </summary>
    
    
      <category term="红宝书" scheme="http://blog.curtaintan.club/categories/%E7%BA%A2%E5%AE%9D%E4%B9%A6/"/>
    
    
      <category term="科普" scheme="http://blog.curtaintan.club/tags/%E7%A7%91%E6%99%AE/"/>
    
  </entry>
  
  <entry>
    <title>9.28-每日一题-填充节点的next指针</title>
    <link href="http://blog.curtaintan.club/2020/09/28/9-28-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/09/28/9-28-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-09-28T00:17:23.000Z</published>
    <updated>2020-09-28T00:45:17.033Z</updated>
    
    <content type="html"><![CDATA[<ol start="117"><li>填充每个节点的下一个右侧节点指针 II</li></ol><p><fancybox><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/02/15/117_sample.png" alt=""></fancybox></p><a id="more"></a><h2 id="117-填充每个节点的下一个右侧节点指针-II"><a href="#117-填充每个节点的下一个右侧节点指针-II" class="headerlink" title="117. 填充每个节点的下一个右侧节点指针 II"></a><a href="https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node-ii/" target="_blank" rel="noopener">117. 填充每个节点的下一个右侧节点指针 II</a></h2><p>给定一个二叉树</p><blockquote><p>struct Node {<br>   int val;<br>   Node *left;<br>   Node *right;<br>   Node *next;<br>}</p></blockquote><p>填充它的每个 next 指针，让这个指针指向其下一个右侧节点。如果找不到下一个右侧节点，则将 next 指针设置为 NULL。</p><p>初始状态下，所有 next 指针都被设置为 NULL。</p><p><fancybox><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/02/15/117_sample.png" alt=""></fancybox></p><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><ol><li>层序遍历，将节点一层一层的放到数组内</li><li>使用一个变量记录数组的长度</li><li>遍历这个长度的元素（一层的元素）， 将前一个元素的 next 指向下一个元素即可</li></ol><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * // Definition for a Node.</span></span><br><span class="line"><span class="comment"> * function Node(val, left, right, next) &#123;</span></span><br><span class="line"><span class="comment"> *    this.val = val === undefined ? null : val;</span></span><br><span class="line"><span class="comment"> *    this.left = left === undefined ? null : left;</span></span><br><span class="line"><span class="comment"> *    this.right = right === undefined ? null : right;</span></span><br><span class="line"><span class="comment"> *    this.next = next === undefined ? null : next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;Node&#125; root</span></span><br><span class="line"><span class="comment"> * @return &#123;Node&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> connect = <span class="function"><span class="keyword">function</span>(<span class="params">root</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( !root ) <span class="keyword">return</span> root</span><br><span class="line">    <span class="comment">// 将首节点存入数组</span></span><br><span class="line">    <span class="keyword">let</span> arr = [ root ]</span><br><span class="line">    <span class="keyword">while</span>( arr.length )&#123;</span><br><span class="line">        <span class="comment">// 按层遍历元素</span></span><br><span class="line">        <span class="keyword">let</span> size = arr.length</span><br><span class="line">        <span class="keyword">while</span>( size-- )&#123;</span><br><span class="line">            <span class="keyword">let</span> item = arr.shift()</span><br><span class="line">            <span class="keyword">if</span>( size )&#123;</span><br><span class="line">                item.next = arr[<span class="number">0</span>]</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将子节点存入数组</span></span><br><span class="line">            item.left &amp;&amp; arr.push( item.left )</span><br><span class="line">            item.right &amp;&amp; arr.push( item.right )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;117&quot;&gt;
&lt;li&gt;填充每个节点的下一个右侧节点指针 II&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;fancybox&gt;&lt;img src=&quot;https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/02/15/117_sample.png&quot; alt=&quot;&quot;&gt;&lt;/fancybox&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="二叉树" scheme="http://blog.curtaintan.club/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>红宝书第一章--什么是js</title>
    <link href="http://blog.curtaintan.club/2020/09/27/%E7%BA%A2%E5%AE%9D%E4%B9%A6%E7%AC%AC%E4%B8%80%E7%AB%A0-%E4%BB%80%E4%B9%88%E6%98%AFjs/"/>
    <id>http://blog.curtaintan.club/2020/09/27/%E7%BA%A2%E5%AE%9D%E4%B9%A6%E7%AC%AC%E4%B8%80%E7%AB%A0-%E4%BB%80%E4%B9%88%E6%98%AFjs/</id>
    <published>2020-09-27T06:41:42.000Z</published>
    <updated>2020-09-27T08:50:00.671Z</updated>
    
    <content type="html"><![CDATA[<h3 id="js-历史回顾"><a href="#js-历史回顾" class="headerlink" title="js 历史回顾"></a>js 历史回顾</h3><ol><li>问世缘由</li></ol><blockquote><p>1995年，javascript 问世。在此之前，要验证某个必填字段是否已填写，或某个输入值是否有效，需要与服务端进行一次往返通信，js 的用途就是代替服务端语言处理输入验证。</p></blockquote><ol start="2"><li>ECMAScript 与 javascript 的关系</li></ol><blockquote><p>1995 年 Brandan Eich 花了 10 天写出 javascript，并把它内置到网景浏览器2中，让 web 大受欢迎，此时，微软决定向 IE 投入更多资源，网景浏览器3发布不久，微软发布了 IE3，其中包含了自己名为 JScript 的 javascript 实现。<br>微软的 javascript 实现意味着出现了两个版本的 javascript：网景的 javascript 和 微软的 JScript，1997 年，javascript1.1 作为题提案被提交给欧洲计算机制造商协会（Ecma），第 39 技术委员会承担了“标准化一门通用、跨平台、厂商中立的脚本语言的语法和语义”的任务，此后，各家浏览器均以 ECMAScript 作为自己 JavaScript 实现的一句，虽然具体实现各不相同</p></blockquote><h3 id="JavaScript-的实现"><a href="#JavaScript-的实现" class="headerlink" title="JavaScript 的实现"></a>JavaScript 的实现</h3><p>虽然 JavaScript 和 ECMAScript 基本上是同义词，但是 js 不限于 ECMAScript，完整的 JavaScript 包含以下三个部分：</p><ol><li>核心（ECMAScript）</li><li>文档对象模型（DOM）</li><li>浏览器对象模型（BOM）</li></ol><h4 id="ECMAScript-概述"><a href="#ECMAScript-概述" class="headerlink" title="ECMAScript 概述"></a>ECMAScript 概述</h4><p>ECMAScript 作为一门语言的基准定义，目的是在它之上再构建更稳定的脚本语言</p><p>web 浏览器只是 ECMAScript 实现的一种宿主环境，宿主环境提供 ECMAScript 的基准实现和自身交互必须的扩展。扩展（比如 DOM 和 BOM）使用 ECMAScript 核心类型和语法，提供特定环境的额外功能</p><p><strong>ECMAScript 版本概述</strong></p><ol><li>ES1：本质上与网景的JavaScript1.1相同，删除所有浏览器特定的代码</li><li>ES2：只做了一些编校工作</li><li>ES3：第一次对标准进行更新，新增字符串处理、错误定义和数值输出，添加了正则、新的控制语句、try/catch的支持</li><li>ES4：进行彻底修订，包括强类型变量、新语句和数据结构、真正的类和经典的继承，以及操作数据的新手段，为了避免改动太大，又制定了 ES3.1</li><li>ES5：ES3.1 变成了 ES5，于2009年12月发布，添加了序列化和解析 JSON 数据的 JSON 对象、继承、增强 ES 引擎解释和执行代码能力的严格模式</li><li>ES6：于2015年6月发布，这一版包含了有史以来最重要的一批增强特性，正式支持了类、模块、迭代器、生成器、箭头函数、期约、反射、代理和众多新的数据类型</li><li>ES7：于2016年6月发布，新增少量api，如 <code>Array.prototype.includes</code> 和指数操作</li><li>ES8：完成于2017年6月，添加异步函数（async/await）、<code>SharedArrayBuffer</code> 等</li><li>ES9：发布于2018年6月，对原始对象添加方法，如正则和promise</li><li>ES10：发布于2019年6月，对原始对象添加方法，如数组，并添加新的语法如：<code>obj?.name?.first</code></li></ol><h4 id="DOM-简介"><a href="#DOM-简介" class="headerlink" title="DOM 简介"></a>DOM 简介</h4><p>DOM 通过创建表示文档的树，让开发者可以随心所欲的控制网页中的内容和结构。使用 DOM API，可以轻松的删除、添加、替换、修改节点</p><h4 id="BOM简介"><a href="#BOM简介" class="headerlink" title="BOM简介"></a>BOM简介</h4><p>IE3 和 网景浏览器3 提供了浏览器对象模型 API，用于支持访问和操作浏览器的窗口，它是唯一一个没有相关标准的 JavaScript 实现。但是 HTML5 正在规范尽可能多的 BOM 特性</p><p><strong>BOM的能力</strong></p><ol><li>弹出新浏览器窗口</li><li>移动、缩放和关闭浏览器窗口</li><li>navigator 对象，获取浏览器相关信息</li><li>location 对象，网页信息</li><li>screen 对象，屏幕信息</li><li>performance 对象，提供浏览器占用内存、导航行为等信息</li><li>cookie </li><li>其他自定义对象：<code>XMLHttpRequest</code> 和 <code>ActiveXObject</code></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;js-历史回顾&quot;&gt;&lt;a href=&quot;#js-历史回顾&quot; class=&quot;headerlink&quot; title=&quot;js 历史回顾&quot;&gt;&lt;/a&gt;js 历史回顾&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;问世缘由&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;1995年，javasc
      
    
    </summary>
    
    
      <category term="红宝书" scheme="http://blog.curtaintan.club/categories/%E7%BA%A2%E5%AE%9D%E4%B9%A6/"/>
    
    
      <category term="科普" scheme="http://blog.curtaintan.club/tags/%E7%A7%91%E6%99%AE/"/>
    
  </entry>
  
  <entry>
    <title>9.27-每日一题-二叉搜索树的最近公共祖先</title>
    <link href="http://blog.curtaintan.club/2020/09/27/9.27-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/"/>
    <id>http://blog.curtaintan.club/2020/09/27/9.27-%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%98/</id>
    <published>2020-09-27T02:33:54.000Z</published>
    <updated>2020-09-27T06:27:02.312Z</updated>
    
    <content type="html"><![CDATA[<ol start="235"><li>二叉搜索树的最近公共祖先</li></ol><a id="more"></a><h2 id="235-二叉搜索树的最近公共祖先"><a href="#235-二叉搜索树的最近公共祖先" class="headerlink" title="235. 二叉搜索树的最近公共祖先"></a><a href="https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/" target="_blank" rel="noopener">235. 二叉搜索树的最近公共祖先</a></h2><p>给定一个二叉搜索树, 找到该树中两个指定节点的最近公共祖先。</p><p>百度百科中最近公共祖先的定义为：“对于有根树 T 的两个结点 p、q，最近公共祖先表示为一个结点 x，满足 x 是 p、q 的祖先且 x 的深度尽可能大（一个节点也可以是它自己的祖先）。”</p><p>例如，给定如下二叉搜索树:  root = [6,2,8,0,4,7,9,null,null,3,5]</p><p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/binarysearchtree_improved.png" alt=""></p><p><strong>示例 1:</strong></p><blockquote><p>输入: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8<br>输出: 6<br>解释: 节点 2 和节点 8 的最近公共祖先是 6。</p></blockquote><h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><p>主要分为两步：</p><ol><li>遍历一次二叉树，节点的值与两个目标值对比，对比成功，将路径存到两个数组内</li><li>以较短的数组作为标准，再比对两个数组，当两个节点的值不一样时，取数组的前一个节点返回，当遍历结束依然没有找到不相等的节点，返回短数组的尾节点</li></ol><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lowestCommonAncestor = <span class="function"><span class="keyword">function</span>(<span class="params">root, p, q</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> dfs = <span class="function">(<span class="params"> node, path=[], target, target2, res=[], res2=[] </span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>( !node ) <span class="keyword">return</span> path</span><br><span class="line">        path = [ ...path, node ]</span><br><span class="line">        <span class="keyword">if</span>( target === node.val )&#123;</span><br><span class="line">            res.push( ...path )</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>( target2 === node.val )&#123;</span><br><span class="line">            res2.push( ...path )</span><br><span class="line">        &#125;</span><br><span class="line">        node.left &amp;&amp; dfs( node.left, [...path], target, target2, res, res2 )</span><br><span class="line">        node.right &amp;&amp; dfs( node.right, [...path], target, target2, res, res2 )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    <span class="keyword">let</span> res2 = []</span><br><span class="line">    <span class="keyword">let</span> ret = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 找两个路径，放入数组</span></span><br><span class="line">    dfs( root, [], p.val, q.val, res, res2 )</span><br><span class="line">    <span class="comment">// 进行对比，获取公共节点</span></span><br><span class="line">    <span class="keyword">let</span> map = res.length &lt; res2.length ? res : res2</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; map.length; i ++ )&#123;</span><br><span class="line">        <span class="keyword">if</span>( res[i].val !== res2[i].val )&#123;</span><br><span class="line">            ret = res[ i<span class="number">-1</span> ]</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret ? ret : map[ map.length - <span class="number">1</span> ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ol start=&quot;235&quot;&gt;
&lt;li&gt;二叉搜索树的最近公共祖先&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="算法" scheme="http://blog.curtaintan.club/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="leetcode" scheme="http://blog.curtaintan.club/tags/leetcode/"/>
    
      <category term="二叉树" scheme="http://blog.curtaintan.club/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
      <category term="二叉搜索树" scheme="http://blog.curtaintan.club/tags/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>拖拽 DOM 碰撞检测</title>
    <link href="http://blog.curtaintan.club/2020/05/07/%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B/"/>
    <id>http://blog.curtaintan.club/2020/05/07/%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B/</id>
    <published>2020-05-07T01:56:28.000Z</published>
    <updated>2020-09-27T06:33:28.750Z</updated>
    
    <content type="html"><![CDATA[<p>拖拽 DOM 碰撞检测</p><p><fancybox><img src="https://s1.ax1x.com/2020/05/07/YZuNeH.png" alt=""></fancybox></p><a id="more"></a><h2 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h2><p>总共分为两步：</p><ol><li>实现拖拽</li><li>碰撞检测</li></ol><h2 id="实现拖拽"><a href="#实现拖拽" class="headerlink" title="实现拖拽"></a>实现拖拽</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> red = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"red"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">red.addEventListener( <span class="string">"mousedown"</span>, (event) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 事先记录下与元素左上角的偏移</span></span><br><span class="line">    <span class="keyword">let</span> left = event.clientX - red.offsetLeft;</span><br><span class="line">    <span class="keyword">let</span> top = event.clientY - red.offsetTop;</span><br><span class="line">    <span class="comment">// 使用 addEventListener 方式添加事件监听，后期不好移除，故使用 onmousemove</span></span><br><span class="line">    <span class="built_in">document</span>.onmousemove = move.bind( <span class="keyword">this</span>, left, top )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听抬起事件</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"mouseup"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">document</span>.onmousemove = <span class="string">""</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params"> left, top </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> event = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>)[<span class="number">2</span>];</span><br><span class="line">    <span class="comment">// 先固定左上角的偏移量 - 偏移量，让元素跟随鼠标移动</span></span><br><span class="line">    red.style.left = event.clientX - left + <span class="string">"px"</span>;</span><br><span class="line">    red.style.top = event.clientY - top + <span class="string">"px"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="DOM-碰撞检测"><a href="#DOM-碰撞检测" class="headerlink" title="DOM 碰撞检测"></a>DOM 碰撞检测</h2><p><fancybox><img src="https://s1.ax1x.com/2020/05/07/YZuNeH.png" alt=""></fancybox></p><ol><li>当div1在div2的上边线(t2)以上的区域活动时，始终碰不上</li><li>当div1在div2的右边线(r2)以右的区域活动时,始终碰不上</li><li>当div1在div2的下边线(b2)以下的区域活动时,始终碰不上</li><li>当div1在div2的左边线(r2)以左的区域活动时,始终碰不上</li></ol><p>除了以上四种情况，其他情况表示div1和div2碰上了，下面试完整测试代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"red"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"green"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        div &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.red</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            background-color: red;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.green</span>&#123;</span></span><br><span class="line">            background-color: green;</span><br><span class="line">            position: relative;</span><br><span class="line">            top: 300px;</span><br><span class="line">            left: 300px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.blue</span> &#123;</span></span><br><span class="line">            background-color: blue;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    /**</span><br><span class="line">     * 题目描述：在页面中写一个红色正方形，实现红色正方形拖拽到页面的任意位置，随鼠标一起动，</span><br><span class="line">     * 页面中有另一个绿色正方形，当鼠标拖动红色正方形移动到绿色正方形时，绿色正方形变蓝色</span><br><span class="line">     * </span><br><span class="line">     * 实现思路：1.实现随鼠标拖拽，2.拖拽的过程中判定是否碰撞</span><br><span class="line">     */</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> red = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"red"</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> green = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"green"</span>)[<span class="number">0</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">move</span><span class="params">( left, top )</span></span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> event = <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>)[<span class="number">2</span>];</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 先固定左上角的偏移量 - 偏移量，让元素跟随鼠标移动</span></span></span><br><span class="line"><span class="actionscript">        red.style.left = event.clientX - left + <span class="string">"px"</span>;</span></span><br><span class="line"><span class="actionscript">        red.style.top = event.clientY - top + <span class="string">"px"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 获取目标元素四个边框的偏移</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> greenleft = green.offsetLeft</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> greenTop = green.offsetTop</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> greenRight = green.offsetLeft + green.offsetWidth</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> greenbottom = green.offsetTop + green.offsetHeight</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">        <span class="comment">// 拖拽元素的左边框偏移 大于 目标元素的右边框偏移</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 拖拽元素的顶部边框偏移 大于 目标元素的底部偏移</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 拖拽元素的右边框偏移 小于 目标元素的左边框偏移</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 拖拽元素的底部边框偏移 大于 目标元素的顶部边框偏移</span></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 其中一个成立，就代表没有碰撞，反之则表示已经碰撞</span></span></span><br><span class="line">        if( red.offsetLeft &gt; greenRight || </span><br><span class="line">        red.offsetTop &gt; greenbottom|| </span><br><span class="line">        red.offsetLeft + red.offsetWidth &lt; greenleft || </span><br><span class="line">        red.offsetTop + red.offsetHeight &lt; greenTop)&#123;</span><br><span class="line"><span class="actionscript">            <span class="comment">// 移除 css 类</span></span></span><br><span class="line"><span class="actionscript">            green.classList.remove(<span class="string">"blue"</span>)</span></span><br><span class="line"><span class="actionscript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="actionscript">            green.classList.add(<span class="string">"blue"</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    red.addEventListener( <span class="string">"mousedown"</span>, (event) =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 事先记录下与元素左上角的偏移</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> left = event.clientX - red.offsetLeft;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> top = event.clientY - red.offsetTop;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用 addEventListener 方式添加事件监听，后期不好移除，故使用 onmousemove</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.onmousemove = move.bind( <span class="keyword">this</span>, left, top )</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// 监听抬起事件</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.addEventListener(<span class="string">"mouseup"</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.onmousemove = <span class="string">""</span></span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="参考材料"><a href="#参考材料" class="headerlink" title="参考材料"></a>参考材料</h2><p><a href="https://www.jb51.net/article/133260.htm" target="_blank" rel="noopener">JS实现碰撞检测的方法分析</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;拖拽 DOM 碰撞检测&lt;/p&gt;
&lt;p&gt;&lt;fancybox&gt;&lt;img src=&quot;https://s1.ax1x.com/2020/05/07/YZuNeH.png&quot; alt=&quot;&quot;&gt;&lt;/fancybox&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://blog.curtaintan.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>从 0 写一个简单的 React.js</title>
    <link href="http://blog.curtaintan.club/2020/02/23/%E4%BB%8E0%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84React.js/"/>
    <id>http://blog.curtaintan.club/2020/02/23/%E4%BB%8E0%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84React.js/</id>
    <published>2020-02-22T17:11:26.000Z</published>
    <updated>2020-02-24T03:55:56.398Z</updated>
    
    <content type="html"><![CDATA[<p>从 0 写一个简单的 React.js</p><a id="more"></a><h1 id="从-0-写一个简单的-React-js"><a href="#从-0-写一个简单的-React-js" class="headerlink" title="从 0 写一个简单的 React.js"></a>从 0 写一个简单的 React.js</h1><p>预览：<a href="https://curtaintan.github.io/create-simple-react/dist/index.html" target="_blank" rel="noopener">点击直达</a><br>源码地址：<a href="https://github.com/curtainTan/create-simple-react" target="_blank" rel="noopener">github</a><br>文章地址：<a href="http://blog.curtaintan.club/2020/02/23/%E4%BB%8E0%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84React.js/">博客-从 0 写一个简单的 React.js</a></p><p>简单的实现如下功能：</p><ol><li>将 jsx 使用 babel 转换成 vnode</li><li>组件是实现</li><li>生命周期的实现</li><li>diff 算法（这里没懂）</li><li>异步的setState</li></ol><p>下面，我将总结一下整体的实现过程。</p><h2 id="1-React-createElement-的实现"><a href="#1-React-createElement-的实现" class="headerlink" title="1. React.createElement() 的实现"></a>1. React.createElement() 的实现</h2><p>当我们在写 React 组件的时候，你是否有疑惑我们为什么要引入 React ，但是从来没用到呢？？</p><p>其实我们用到了，因为我们用到了 <code>React.createElement()</code> 函数，此方法搭配 babel 插件将 jsx 转化成 vnode。</p><h2 id="2-将-jsx-使用-babel-转换成-vnode"><a href="#2-将-jsx-使用-babel-转换成-vnode" class="headerlink" title="2. 将 jsx 使用 babel 转换成 vnode"></a>2. 将 jsx 使用 babel 转换成 vnode</h2><p>使用 babel 插件 @babel/plugin-transform-react-jsx 将 jsx 转换成 vnode 对象。</p><figure class="highlight js"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ele = (</span><br><span class="line">    &lt;div className=<span class="string">"active"</span> title=<span class="string">"tan"</span>&gt;</span><br><span class="line">        hello,&lt;span&gt;react&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">)</span><br><span class="line"><span class="built_in">console</span>.log( ele )</span><br></pre></td></tr></table></figure><p><fancybox><img src=https://image.gslb.dawnlab.me/a5f402a0b0b9d8d105d1993394bb8bb7.png alt="图片显示失败" /></fancybox></p><h2 id="3-react-dom-将-vnode-转换成真正的-DOM-此时没有实现组件"><a href="#3-react-dom-将-vnode-转换成真正的-DOM-此时没有实现组件" class="headerlink" title="3. react-dom 将 vnode 转换成真正的 DOM (此时没有实现组件)"></a>3. react-dom 将 vnode 转换成真正的 DOM (此时没有实现组件)</h2><p>react-dom 上有一个 render 函数，将获得到的 vnode 转换成真实的 dom，并把它挂在到dom节点（第二个参数）上。</p><p>根据 vnode 的结果可以得到，vnode 有两种情况：</p><ol><li>vnode 是直接渲染的内容（文字）</li><li>vnode 是一个对象，代表一个 dom 元素（拥有 tag 属性）</li></ol><p>此时，我们只需递归创建元素，最后依次挂载到父元素上即可：</p><figure class="highlight js"><figcaption><span>render函数</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_render</span>(<span class="params"> vnode, container </span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 第一种情况</span></span><br><span class="line">    <span class="keyword">if</span>( vnode === <span class="literal">undefined</span> || vnode === <span class="literal">null</span> || <span class="keyword">typeof</span> vnode === <span class="string">"boolean"</span> ) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// 数字转换成 字符串</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">typeof</span> vnode === <span class="string">"number"</span> ) vnode = <span class="built_in">String</span>( vnode )</span><br><span class="line">    <span class="comment">// 如果 vnode 是字符串，直接渲染</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">typeof</span> vnode === <span class="string">"string"</span> )&#123;</span><br><span class="line">        <span class="comment">// 创建文本节点</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">document</span>.createTextNode( vnode )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二种情况</span></span><br><span class="line">    <span class="comment">// vnode 是虚拟 DOM 对象</span></span><br><span class="line">    <span class="keyword">const</span> &#123; tag, attrs &#125; = vnode</span><br><span class="line">    <span class="comment">// 创建节点对象</span></span><br><span class="line">    <span class="keyword">const</span> dom = <span class="built_in">document</span>.createElement( tag )</span><br><span class="line">    <span class="comment">// 绑定属性</span></span><br><span class="line">    <span class="keyword">if</span>( attrs )&#123;</span><br><span class="line">        <span class="built_in">Object</span>.keys( attrs ).forEach( <span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> value = attrs[key]</span><br><span class="line">            setAttribute( dom,  key, value )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 递归 渲染子节点</span></span><br><span class="line">    vnode.childrens &amp;&amp; vnode.childrens.forEach( <span class="function"><span class="params">child</span> =&gt;</span> render( child, dom ) )</span><br><span class="line">    <span class="comment">// 返回节点 并挂载子节点</span></span><br><span class="line">    <span class="keyword">return</span> container.appendChild( dom )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-实现函数组件和类组件"><a href="#4-实现函数组件和类组件" class="headerlink" title="4. 实现函数组件和类组件"></a>4. 实现函数组件和类组件</h2><p>实现思路：将函数组件封装成类组件，通过执行类组件的 render 函数得到 vnode</p><p>先看 vnode 结构：</p><figure class="highlight js"><figcaption><span>组件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"../react/index.js"</span></span><br><span class="line"><span class="keyword">const</span> ele = (</span><br><span class="line">    &lt;div className=<span class="string">"active"</span> title=<span class="string">"tan"</span>&gt;</span><br><span class="line">        hello,&lt;span&gt;react&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Home name="arr name" /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 函数组件</span></span><br><span class="line"><span class="regexp">function Home()&#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">        &lt;div className="active" title="tan"&gt;</span></span><br><span class="line"><span class="regexp">            hello,&lt;span&gt;react&lt;/</span>span&gt;</span><br><span class="line">            &#123;<span class="comment">/* &lt;Tan tan="我是传进来的参数" /&gt; */</span>&#125;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">console.log( ele )</span></span><br></pre></td></tr></table></figure><p><fancybox><img src=https://image.gslb.dawnlab.me/63dc847ab7cf8eb4764eb45a4136af2d.png alt="图片显示失败" /></fancybox></p><p>可见，<code>&lt;Home /&gt;</code> 被转换成了一个函数，此时，在 render 函数中，我们要多一个判断，并且我们将函数组件封装成类组件，方便统一管理、注入生命周期等，执行过程：</p><ol><li>判定是函数，调用 createComponent() 函数</li><li>使用 createComponent() 函数，将函数封装成类组件，返回类实例</li><li>使用 setComponentProps() 函数，设置组件的 props</li><li>调用 renderComponent() 函数，获取 vnode</li><li>使用 vnode 生成 dom 并返回渲染</li></ol><p><strong>实现代码请参考：</strong>react-dom/index.js</p><p><fancybox><img src=https://image.gslb.dawnlab.me/9d9cc84c24a612978e42a33c59e1ca1c.png alt="图片显示失败" /></fancybox></p><h2 id="5-实现生命周期"><a href="#5-实现生命周期" class="headerlink" title="5. 实现生命周期"></a>5. 实现生命周期</h2><p>在上述执行的过程中，插入生命周期。</p><p><strong>实现代码请参考：</strong>react-dom/index.js</p><h2 id="6-实现-diff-算法"><a href="#6-实现-diff-算法" class="headerlink" title="6. 实现 diff 算法"></a>6. 实现 diff 算法</h2><p>实质：与 dom 节点的 attribute 进行对比，替换数据已经变化的 DOM 节点，是 DOM 节点</p><p>实现思路：获取当前 dom 下<strong>一层</strong>的子节点，分出 vnode 下有 key 属性的节点（这里没懂）（ diffChildren 函数），遍历虚拟节点，对比是否改变，移除原组件，并在原位置插入新 dom（使用兄弟组件实现插入到原位置）</p><p><strong>实现代码请参考：</strong>react-dom/index.js，react-dom/diff.js</p><h2 id="7-实现异步-setState"><a href="#7-实现异步-setState" class="headerlink" title="7. 实现异步 setState"></a>7. 实现异步 setState</h2><p>异步 setState 可以优化整体的性能，避免不必要的渲染。</p><p>实质：使用 Object.assign() 合并多次 setState 的结果，只返回最终的结果。</p><p>实现思路：使用两个队列，一个保存 setState， 一个保存当前组件，一个组件一个组件的完成 setState，当完成 setState 后，执行 renderComponent() 函数，渲染组件</p><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="8. 总结"></a>8. 总结</h2><p>跟着教程<strong><a href="https://www.bilibili.com/video/av68588169" target="_blank" rel="noopener">从0撸一个丐版React.js</a></strong>一步一步搭建而成，虽有不懂，但是收获良多。</p><p>首先，感谢视频的分享，让我有机会一步一步的学习并实践。</p><p>通过一步一步的实际操作，对 react 整体的执行流程有了一定的认识，</p><p>加油！</p><p>2020.2.23 1.03</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;从 0 写一个简单的 React.js&lt;/p&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://blog.curtaintan.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>javascript之DOM事件</title>
    <link href="http://blog.curtaintan.club/2020/02/22/javascript%E4%B9%8BDOM%E4%BA%8B%E4%BB%B6/"/>
    <id>http://blog.curtaintan.club/2020/02/22/javascript%E4%B9%8BDOM%E4%BA%8B%E4%BB%B6/</id>
    <published>2020-02-22T06:34:43.000Z</published>
    <updated>2020-02-24T03:56:07.771Z</updated>
    
    <content type="html"><![CDATA[<p><fancybox><img src="https://image.gslb.dawnlab.me/a3a95260bca8115d010a419ee021f85a.png" alt=""></fancybox></p><p>本文主要介绍 DOM 事件级别、DOM 事件模型、事件流、Event 对象常见的应用和自定义 DOM 事件。</p><a id="more"></a><h1 id="1-DOM-事件级别"><a href="#1-DOM-事件级别" class="headerlink" title="1. DOM 事件级别"></a>1. DOM 事件级别</h1><p>DOM 事件分为3个级别：DOM 0级事件处理，DOM 2级事件处理和DOM 3级事件处理。</p><h2 id="1-1-DOM-0级事件"><a href="#1-1-DOM-0级事件" class="headerlink" title="1.1 DOM 0级事件"></a>1.1 DOM 0级事件</h2><p><strong>el.onclick=function(){}</strong></p><figure class="highlight js"><figcaption><span>DOM 0级事件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span><br><span class="line"> btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     alert(<span class="keyword">this</span>.innerHTML);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>为元素的一种事件绑定一个方法，这些方法都在冒泡阶段执行。</p><h2 id="1-2-DOM-2级事件"><a href="#1-2-DOM-2级事件" class="headerlink" title="1.2 DOM 2级事件"></a>1.2 DOM 2级事件</h2><p><strong>el.addEventListener(event-name, callback, useCapture)</strong></p><ul><li>event-name: 事件名称，可以是标准的DOM事件</li><li>callback: 回调函数，当事件触发时，函数会被注入一个参数为当前的事件对象 event</li><li>useCapture: 默认是false，代表事件句柄在冒泡阶段执行</li></ul><figure class="highlight js"><figcaption><span>DOM 2级事件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>, test, <span class="literal">false</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">e = e || <span class="built_in">window</span>.event;</span><br><span class="line">    alert((e.target || e.srcElement).innerHTML);</span><br><span class="line">    btn.removeEventListener(<span class="string">"click"</span>, test)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//IE9-:attachEvent()与detachEvent()。</span></span><br><span class="line"><span class="comment">//IE9+/chrom/FF:addEventListener()和removeEventListener()</span></span><br></pre></td></tr></table></figure><p>IE9以下的IE浏览器不支持 addEventListener()和removeEventListener()，使用 attachEvent()与detachEvent() 代替，因为IE9以下是不支持事件捕获的，所以也没有第三个参数，第一个事件名称前要加on。</p><h1 id="1-3-DOM-3级事件"><a href="#1-3-DOM-3级事件" class="headerlink" title="1.3 DOM 3级事件"></a>1.3 DOM 3级事件</h1><p>在DOM 2级事件的基础上添加了更多的事件类型。</p><ul><li>UI事件，当用户与页面上的元素交互时触发，如：load、scroll</li><li>焦点事件，当元素获得或失去焦点时触发，如：blur、focus</li><li>鼠标事件，当用户通过鼠标在页面执行操作时触发如：dblclick、mouseup</li><li>滚轮事件，当使用鼠标滚轮或类似设备时触发，如：mousewheel</li><li>文本事件，当在文档中输入文本时触发，如：textInput</li><li>键盘事件，当用户通过键盘在页面上执行操作时触发，如：keydown、keypress</li><li>合成事件，当为IME（输入法编辑器）输入字符时触发，如：compositionstart</li><li>变动事件，当底层DOM结构发生变化时触发，如：DOMsubtreeModified</li><li>动画事件，当css3 animation动画执行开始和结束时触发，如：webkitAnimationEnd mozAnimationEnd</li><li>同时DOM3级事件也允许使用者自定义一些事件。</li></ul><p><strong>说明：</strong></p><p>动画事件中不同浏览器的AnimationEnd写法：</p><ul><li>谷歌浏览器：webkitAnimationEnd</li><li>火狐浏览器：mozAnimationEnd</li><li>IE系浏览器：MSAnimationEnd</li><li>欧朋浏览器：oanimationend</li><li>通用浏览器：animationend</li></ul><h1 id="2、DOM事件模型和事件流"><a href="#2、DOM事件模型和事件流" class="headerlink" title="2、DOM事件模型和事件流"></a>2、DOM事件模型和事件流</h1><p><strong>DOM事件模型分为捕获和冒泡。</strong>一个事件发生后，会在子元素和父元素之间传播（propagation）。这种传播分成三个阶段。</p><p>（1）捕获阶段：事件从window对象自上而下向目标节点传播的阶段；<br>（2）目标阶段：真正的目标节点正在处理事件的阶段；<br>（3）冒泡阶段：事件从目标节点自下而上向window对象传播的阶段。</p><p><strong>DOM事件捕获的具体流程</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/bdfc8b5d16793a07dd301bdf2e3029c5.png" alt=""></fancybox></p><p>捕获是从上到下，事件先从window对象，然后再到document（对象），然后是html标签（通过document.documentElement获取html标签），然后是body标签（通过document.body获取body标签），然后按照普通的html结构一层一层往下传，最后到达目标元素。</p><p>这一系列的事件，就构成了事件流..</p><h1 id="3、Event对象常见的应用"><a href="#3、Event对象常见的应用" class="headerlink" title="3、Event对象常见的应用"></a>3、Event对象常见的应用</h1><h2 id="3-1-阻止默认事件"><a href="#3-1-阻止默认事件" class="headerlink" title="3.1 阻止默认事件"></a>3.1 阻止默认事件</h2><p><strong>event. preventDefault()</strong></p><p>调用此方法，将阻止默认事件的触发，例如：a 标签的跳转</p><p>阻止默认事件触发的方法：</p><figure class="highlight js"><figcaption><span>阻止默认事件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 使用空的 js </span></span><br><span class="line">&lt;a href=<span class="string">"javascript:;"</span>&gt;链接&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 2. 返回 false</span></span><br><span class="line"><span class="regexp">&lt;a id="test" href="http:/</span><span class="regexp">/www.cnblogs.com"&gt;链接&lt;/</span>a&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">test.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e = e || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 3. 使用 preventDefault</span></span><br><span class="line"><span class="regexp">&lt;a id="test" href="http:/</span><span class="regexp">/www.cnblogs.com"&gt;链接&lt;/</span>a&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">test.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e = e || <span class="built_in">window</span>.event;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="3-2-阻止事件冒泡"><a href="#3-2-阻止事件冒泡" class="headerlink" title="3.2 阻止事件冒泡"></a>3.2 阻止事件冒泡</h2><p><strong>event.stopPropagation()</strong></p><p>调用此方法，事件将停止冒泡。</p><h2 id="3-3-停止事件传播"><a href="#3-3-停止事件传播" class="headerlink" title="3.3 停止事件传播"></a>3.3 停止事件传播</h2><p><strong>event.stopImmediatePropagation()</strong></p><p>调用此方法，将阻止此方法后面的方法执行。例如：一个事件绑定多个方法，方法依次调用，调用此方法后面的方法将不会执行，且阻止事件冒泡。</p><figure class="highlight js"><figcaption><span>停止事件传播 stopImmediatePropagation</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">".btn"</span>)</span><br><span class="line"><span class="comment">// 第一个事件</span></span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"我是第一个注册的事件"</span> )</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 注册第二个事件</span></span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"我是第二个注册的事件，我要调用 event.stopImmediatePropagation()方法"</span> )</span><br><span class="line">    e.stopImmediatePropagation()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 注册第三个事件</span></span><br><span class="line">btn.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"我是第三个注册的事件"</span> )</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// document 捕获阶段事件</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener( <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"document---我在捕获阶段执行"</span> )</span><br><span class="line">&#125;, <span class="literal">true</span> )</span><br><span class="line"><span class="comment">// document 冒泡阶段事件</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener( <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"document---我在冒泡阶段执行"</span> )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>运行结果</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/bc3edc164f68c3acd2a32d51e9beb0b7.png" alt=""></fancybox></p><h2 id="3-4-获取被点击的子元素"><a href="#3-4-获取被点击的子元素" class="headerlink" title="3.4 获取被点击的子元素"></a>3.4 获取被点击的子元素</h2><p><strong>event.target</strong></p><p>将被点击的子元素绑定在此属性上，我们可以用此 <code>event.target</code> + <code>data-** 自定义属性</code> 实现事件代理。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-index</span>=<span class="string">"1"</span> &gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-index</span>=<span class="string">"2"</span> &gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-index</span>=<span class="string">"3"</span> &gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-index</span>=<span class="string">"4"</span> &gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">data-index</span>=<span class="string">"5"</span> &gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> ul = <span class="built_in">document</span>.querySelector(<span class="string">"ul"</span>)</span></span><br><span class="line"><span class="actionscript">    ul.addEventListener( <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span><span class="params">(e)</span></span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log( <span class="string">"e.target:"</span> )</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.dir( e.target )</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 使用 dataset 获取绑定在元素上的标记属性（例如：元素下标）</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log( <span class="string">"e.target.dataset"</span>, e.target.dataset )</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>运行结果：</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/49d08a68cf0a0a4804c1d243ccd9deee.png" alt=""></fancybox></p><h2 id="3-5-获取当前注册事件元素"><a href="#3-5-获取当前注册事件元素" class="headerlink" title="3.5 获取当前注册事件元素"></a>3.5 获取当前注册事件元素</h2><p><strong>event.currentTarget</strong></p><p>使用该属性，获取当前注册事件的元素。</p><h1 id="4-自定义事件"><a href="#4-自定义事件" class="headerlink" title="4. 自定义事件"></a>4. 自定义事件</h1><p>可以使用两种方式自定义事件：<code>new Event( eventType )</code> 和 <code>new CustomEvent( eventType, params )</code></p><h2 id="4-1-new-Event"><a href="#4-1-new-Event" class="headerlink" title="4.1 new Event()"></a>4.1 new Event()</h2><p>语法：<code>event = new Event(eventType, eventInit);</code></p><p>一般只传递第一个参数``eventType`，后面为 Event 对象上的参数</p><h2 id="4-2-CustomEvent"><a href="#4-2-CustomEvent" class="headerlink" title="4.2 CustomEvent()"></a>4.2 CustomEvent()</h2><p>语法：<code>event = new CustomEvent(eventType, { detail：params });</code></p><p>eventType：事件名称<br>params：自定义参数</p><h2 id="4-3-合并案例"><a href="#4-3-合并案例" class="headerlink" title="4.3 合并案例"></a>4.3 合并案例</h2><figure class="highlight js"><figcaption><span>自定义事件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">".btn"</span>)</span><br><span class="line"><span class="comment">// Event 自定义事件</span></span><br><span class="line"><span class="keyword">var</span> eve = <span class="keyword">new</span> Event(<span class="string">"go"</span>)</span><br><span class="line">btn.addEventListener( <span class="string">"go"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"我是自定义事件："</span>, e )</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// CustomEvent 事件构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCustomEvent</span>(<span class="params"> eventType = <span class="string">"mock-event"</span>, params = &#123;&#125; </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CustomEvent( eventType, &#123; <span class="attr">detail</span>: params &#125; )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// CustomEvent 事件</span></span><br><span class="line"><span class="keyword">var</span> event = createCustomEvent( <span class="string">"customGo"</span>, &#123; <span class="attr">name</span>: <span class="string">"tan"</span> &#125; )</span><br><span class="line">btn.addEventListener( <span class="string">"customGo"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> data </span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"我是传参事件------"</span>, data )</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 触发事件各个</span></span><br><span class="line">btn.addEventListener( <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"我的定义的 Click 事件"</span> )</span><br><span class="line">    btn.dispatchEvent( eve )</span><br><span class="line">    btn.dispatchEvent( event )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>运行结果：</strong></p><p><fancybox><img src="https://image.gslb.dawnlab.me/b5f271429ec73092af1077f1dc0f92a8.png" alt=""></fancybox></p><h1 id="5-总结"><a href="#5-总结" class="headerlink" title="5. 总结"></a>5. 总结</h1><p>关于事件，需要记住 </p><ol><li><code>addEventListener()</code> 函数的使用，</li><li><code>e.preventDefault()</code> 禁止默认事件</li><li><code>e.stopPropagation()</code> 阻止冒泡</li><li><code>e.target.dataset</code> 获取 dom 中 <code>data-**</code> 自定义属性</li></ol><p>自定义时间需要了解，并且自定义事件类似观察者模式，需要手动触发事件。</p><h1 id="6-参考材料"><a href="#6-参考材料" class="headerlink" title="6. 参考材料"></a>6. 参考材料</h1><p><a href="https://juejin.im/post/5bd2e5f8e51d4524640e1304" target="_blank" rel="noopener">浪里行舟-DOM事件机制</a></p><p><a href="https://juejin.im/post/5c4bd01fe51d45522b4f6e4e" target="_blank" rel="noopener">DOM 事件详解</a></p><p><a href="https://blog.csdn.net/qappleh/article/details/97778386" target="_blank" rel="noopener">css3判断animation动画是否完成，以及在动画完成后执行事件</a></p><p><a href="https://www.cnblogs.com/xmlys/p/7716134.html" target="_blank" rel="noopener">CSS浏览器前缀兼容写法</a></p><p><a href="https://www.cnblogs.com/cwsb/p/10384219.html" target="_blank" rel="noopener">自定义事件——Event和CustomEvent</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent" target="_blank" rel="noopener">MDN-CustomEvent</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;fancybox&gt;&lt;img src=&quot;https://image.gslb.dawnlab.me/a3a95260bca8115d010a419ee021f85a.png&quot; alt=&quot;&quot;&gt;&lt;/fancybox&gt;&lt;/p&gt;
&lt;p&gt;本文主要介绍 DOM 事件级别、DOM 事件模型、事件流、Event 对象常见的应用和自定义 DOM 事件。&lt;/p&gt;
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://blog.curtaintan.club/categories/JavaScript/"/>
    
    
      <category term="js基础" scheme="http://blog.curtaintan.club/tags/js%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>思路清晰---一次搞懂几种content-type的区别</title>
    <link href="http://blog.curtaintan.club/2020/02/19/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82%E5%87%A0%E7%A7%8Dcontent-type%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <id>http://blog.curtaintan.club/2020/02/19/%E6%80%9D%E8%B7%AF%E6%B8%85%E6%99%B0-%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82%E5%87%A0%E7%A7%8Dcontent-type%E7%9A%84%E5%8C%BA%E5%88%AB/</id>
    <published>2020-02-19T13:28:03.000Z</published>
    <updated>2020-02-19T14:08:06.724Z</updated>
    
    <content type="html"><![CDATA[<p>当使用 ajax 时，你是否还对 <code>setRequestHeader( &quot;content-type&quot;, &quot;*&quot; )</code> 的几种值傻傻分不清？？</p><p>不要慌，一次性记住他们…..</p><a id="more"></a><h1 id="1、Content-Type-的值类型"><a href="#1、Content-Type-的值类型" class="headerlink" title="1、Content-Type 的值类型"></a>1、Content-Type 的值类型</h1><ol><li>application/json：消息主体是序列化后的 JSON 字符串</li><li>application/x-www-form-urlencoded：数据被编码为名称/值对。这是标准的编码格式</li><li>multipart/form-data： 需要在表单中进行文件上传时，就需要使用该格式。常见的媒体格式是上传文件之时使用的</li><li>text/plain：数据以纯文本形式(text/json/xml/html)进行编码，其中不含任何控件或格式字符</li></ol><h1 id="2、application-json-和-application-x-www-form-urlencoded的区别"><a href="#2、application-json-和-application-x-www-form-urlencoded的区别" class="headerlink" title="2、application/json 和 application/x-www-form-urlencoded的区别"></a>2、application/json 和 application/x-www-form-urlencoded的区别</h1><h2 id="2-1-application-json："><a href="#2-1-application-json：" class="headerlink" title="2.1 application/json："></a>2.1 application/json：</h2><p>作用： 告诉服务器请求的主题内容是json格式的字符串，服务器端会对json字符串进行解析。<br>好处： 前端人员不需要关心数据结构的复杂度，只要是标准的 json 格式就能提交成功。</p><p><strong>使用案例：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.open( type, url, <span class="literal">true</span> )</span><br><span class="line">xhr.setRequestHeader( <span class="string">"Content-Type"</span> , <span class="string">"application/json"</span> )</span><br><span class="line"><span class="comment">// 传入参数是 JSON 字符串</span></span><br><span class="line">xhr.send( <span class="built_in">JSON</span>.stringify( data ) )</span><br></pre></td></tr></table></figure><h2 id="2-1-application-x-www-form-urlencoded："><a href="#2-1-application-x-www-form-urlencoded：" class="headerlink" title="2.1 application/x-www-form-urlencoded："></a>2.1 application/x-www-form-urlencoded：</h2><p>作用：在请求发送过程中会对数据进行序列化处理，以键值对形式 key1=value1&amp;key2=value2 的方式发送到服务器，<br>好处： 所有浏览器都支持<br>缺点：需要处理传入的参数为 key1=value1&amp;key2=value2 格式</p><h1 id="3、multipart-form-data"><a href="#3、multipart-form-data" class="headerlink" title="3、multipart/form-data"></a>3、multipart/form-data</h1><p>form 表单默认编码格式是：application/x-www-form-urlencoded</p><p>当表单需要发送文件或图片时，需要设置 enctype 为 multipart/form-data</p><p><strong>案例：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://**/uploadImage"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="4-使用-xhr-发送文件和图片"><a href="#4-使用-xhr-发送文件和图片" class="headerlink" title="4. 使用 xhr 发送文件和图片"></a>4. 使用 xhr 发送文件和图片</h1><p>只需将数据和文件放入 FormData 即可.</p><p><strong>案例：</strong></p><figure class="highlight js"><figcaption><span>xhr发送文件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取文件放入 FormData</span></span><br><span class="line"><span class="keyword">var</span> formdata = <span class="keyword">new</span> FormData()</span><br><span class="line"><span class="keyword">var</span> elFile = <span class="built_in">document</span>.getElementById( <span class="string">"myfile"</span> )</span><br><span class="line">elFile.addEventListener( <span class="string">"change"</span>, () =&gt; &#123;</span><br><span class="line">    formdata.append( <span class="string">"file"</span>, elFile.files[<span class="number">0</span>] )</span><br><span class="line">    <span class="comment">// 调用发送文件</span></span><br><span class="line">    sendFile()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 创建 xhr</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.open( <span class="string">"post"</span>, <span class="string">"http://***/uploadImage"</span> )</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( xhr.status === <span class="number">200</span> &amp;&amp; xhr.readyState === <span class="number">4</span> )&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"请求成功----"</span> )</span><br><span class="line">    <span class="built_in">console</span>.log( xhr.response )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendFile</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    xhr.send( formdata )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-总结"><a href="#5-总结" class="headerlink" title="5. 总结"></a>5. 总结</h1><p>这四个属性都能设置在 from 表达上的 enctype 上，</p><p>application/json 和 application/x-www-form-urlencoded 设置在 xhr 上，主要的区别是对上传参数的格式不同</p><p>multipart/form-data 设置在 form 表单上，用于上传文件和图片.</p><h1 id="6-参考材料"><a href="#6-参考材料" class="headerlink" title="6. 参考材料"></a>6. 参考材料</h1><p><a href="https://www.jianshu.com/p/2ac9297e00f9" target="_blank" rel="noopener">关于Content-Type几种值的区别及用法</a></p><p><a href="https://www.jianshu.com/p/24799c0f0008" target="_blank" rel="noopener">http请求content-type包括几种，区别是什么？</a></p><p><a href="https://blog.csdn.net/Raywang80s/article/details/74917693" target="_blank" rel="noopener">XMLHTTP中setRequestHeader方法和参数</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当使用 ajax 时，你是否还对 &lt;code&gt;setRequestHeader( &amp;quot;content-type&amp;quot;, &amp;quot;*&amp;quot; )&lt;/code&gt; 的几种值傻傻分不清？？&lt;/p&gt;
&lt;p&gt;不要慌，一次性记住他们…..&lt;/p&gt;
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://blog.curtaintan.club/categories/JavaScript/"/>
    
    
      <category term="js基础" scheme="http://blog.curtaintan.club/tags/js%E5%9F%BA%E7%A1%80/"/>
    
      <category term="ajax" scheme="http://blog.curtaintan.club/tags/ajax/"/>
    
  </entry>
  
  <entry>
    <title>封装一个ajax</title>
    <link href="http://blog.curtaintan.club/2020/02/19/%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AAajax/"/>
    <id>http://blog.curtaintan.club/2020/02/19/%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AAajax/</id>
    <published>2020-02-19T09:06:53.000Z</published>
    <updated>2020-02-19T14:11:40.280Z</updated>
    
    <content type="html"><![CDATA[<p>简单的封装一个 ajax：</p><ol><li>自动处理参数</li><li>支持 get 和 post</li><li>支持取消操作</li></ol><a id="more"></a><h1 id="1-基于-XMLHttpRequest-封装"><a href="#1-基于-XMLHttpRequest-封装" class="headerlink" title="1. 基于 XMLHttpRequest 封装"></a>1. 基于 XMLHttpRequest 封装</h1><p>XMLHttpRequest 相关信息请参考：<strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener">MDN–XMLHttpRequest</a></strong></p><p><strong>XMLHttpRequest 对象主要的属性：</strong><br><fancybox><img src="https://image.gslb.dawnlab.me/4bdab618bfd707da777479a77d683171.png" alt=""></fancybox></p><h2 id="1-1-原生-XHR-创建步骤"><a href="#1-1-原生-XHR-创建步骤" class="headerlink" title="1.1 原生 XHR 创建步骤"></a>1.1 原生 XHR 创建步骤</h2><p>总共分 5 步：</p><ol><li>第一步：使用 new XMLHttpRequest() 创建 XHR 实例</li><li>第二步：使用 xhr.open() 创建一个请求，并初始化相关 http 请求信息</li><li>设置请求头</li><li>设置响应 http 状态变化的函数</li><li>调用 send 方法，发送 http 请求</li></ol><p><strong>整体结构：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myAjax</span>(<span class="params"> obj </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.url = obj.url || <span class="string">""</span></span><br><span class="line">    <span class="keyword">this</span>.type = obj.type || <span class="string">"GET"</span></span><br><span class="line">    <span class="keyword">this</span>.data = obj.data ||&#123;&#125;</span><br><span class="line">    <span class="keyword">this</span>.success = obj.success || <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.error = obj.error || <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">&#125;</span><br><span class="line">myAjax.prototype.send = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">myAjax.prototype.abort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><strong>完成结果：</strong></p><figure class="highlight js"><figcaption><span>ajax ---- XMLHttpRequest</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myAjax</span>(<span class="params"> obj </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.url = obj.url || <span class="string">""</span></span><br><span class="line">    <span class="keyword">this</span>.type = obj.type || <span class="string">"GET"</span></span><br><span class="line">    <span class="keyword">this</span>.data = obj.data ||&#123;&#125;</span><br><span class="line">    <span class="keyword">this</span>.success = obj.success || <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.error = obj.error || <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myAjax.prototype.send = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 将数据取出来 以 key=value 的形式保存到数组中，方便后续操作</span></span><br><span class="line">    <span class="keyword">let</span> dataArr = []</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> key <span class="keyword">in</span> <span class="keyword">this</span>.data )&#123;</span><br><span class="line">        dataArr.push( key + <span class="string">"="</span> + <span class="keyword">this</span>.data[key] )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">this</span>.type === <span class="string">"GET"</span> || <span class="keyword">this</span>.type === <span class="string">"get"</span> )&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = <span class="keyword">this</span>.url + <span class="string">"?"</span> + dataArr.join(<span class="string">"&amp;"</span>)</span><br><span class="line">        <span class="comment">// 删除尾部的 ?，当 data 为空的时候会多出来 ?</span></span><br><span class="line">        <span class="keyword">this</span>.xhr.open( <span class="keyword">this</span>.type, <span class="keyword">this</span>.url.replace(<span class="regexp">/\?$/g</span>, <span class="string">""</span>), <span class="literal">true</span> )</span><br><span class="line">        <span class="keyword">this</span>.xhr.send()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">this</span>.type === <span class="string">"POST"</span> || <span class="keyword">this</span>.type === <span class="string">"post"</span> )&#123;</span><br><span class="line">        <span class="keyword">this</span>.xhr.open( <span class="keyword">this</span>.type, <span class="keyword">this</span>.url, <span class="literal">true</span> )</span><br><span class="line">        <span class="keyword">this</span>.xhr.setRequestHeader( <span class="string">"content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span> )</span><br><span class="line">        <span class="keyword">this</span>.xhr.send( dataArr.join( <span class="string">"&amp;"</span> ) )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 使用箭头函数   将 this 指向当前对象</span></span><br><span class="line">    <span class="keyword">this</span>.xhr.onreadystatechange = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>( <span class="keyword">this</span>.xhr.readyState === <span class="number">4</span> &amp;&amp; </span><br><span class="line">            <span class="comment">// 200 是请求成功，304 重定向使用缓存资源</span></span><br><span class="line">            ( <span class="keyword">this</span>.xhr.status === <span class="number">200</span> || <span class="keyword">this</span>.xhr.status === <span class="number">304</span> ) )&#123;</span><br><span class="line">                <span class="keyword">if</span>( <span class="keyword">this</span>.success &amp;&amp; <span class="keyword">this</span>.success <span class="keyword">instanceof</span> <span class="built_in">Function</span> )&#123;</span><br><span class="line">                    <span class="keyword">var</span> res = <span class="keyword">this</span>.xhr.responseText</span><br><span class="line">                    <span class="keyword">if</span>( <span class="keyword">typeof</span> res === <span class="string">"string"</span> )&#123;</span><br><span class="line">                        <span class="keyword">this</span>.success( <span class="built_in">JSON</span>.parse( res ) )</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">myAjax.prototype.abort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"已经取消请求..."</span> )</span><br><span class="line">    <span class="keyword">this</span>.xhr.abort()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-基于-fetch-封装"><a href="#2-基于-fetch-封装" class="headerlink" title="2. 基于 fetch 封装"></a>2. 基于 fetch 封装</h1><p>若果你不知道 fetch 的使用，请参考</p><ol><li><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/fetch" target="_blank" rel="noopener">MDN-fetch 文档</a></strong></li><li><strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">MDN-fetch 使用相关</a></strong></li></ol><p><strong>fetch 第二个参数选项：</strong></p><ol><li>method: 请求使用的方法，如 GET、POST。</li><li>headers: 请求的头信息，形式为 Headers 的对象或包含 ByteString 值的对象字面量。</li><li>body: 请求的 body 信息：可能是一个 Blob、BufferSource、FormData、URLSearchParams 或者 USVString 对象。注意 GET 或 HEAD 方法的请求不能包含 body 信息。</li><li>mode: 请求的模式，如 cors、 no-cors 或者 same-origin。</li><li>credentials: 请求的 credentials，如 omit、same-origin 或者 include。为了在当前域名内自动发送 cookie ， 必须提供这个选项， 从 Chrome 50 开始， 这个属性也可以接受 FederatedCredential 实例或是一个 PasswordCredential 实例。</li><li>cache:  请求的 cache 模式: default 、 no-store 、 reload 、 no-cache 、 force-cache 或者 only-if-cached 。</li><li>redirect: 可用的 redirect 模式: follow (自动重定向), error (如果产生重定向将自动终止并且抛出一个错误), 或者 manual (手动处理重定向). 在Chrome中，Chrome 47之前的默认值是 follow，从 Chrome 47开始是 manual。</li><li>referrer: 一个 USVString 可以是 no-referrer、client或一个 URL。默认是 client。</li><li>referrerPolicy: 指定了HTTP头部referer字段的值。可能为以下值之一： no-referrer、 no-referrer-when-downgrade、 origin、 origin-when-cross-origin、 unsafe-url 。</li><li>integrity: 包括请求的  subresource integrity 值</li><li>signal: 用于取消请求</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFetch</span>(<span class="params"> obj </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.url = obj.url || <span class="string">""</span></span><br><span class="line">    <span class="keyword">this</span>.type = obj.type || <span class="string">"GET"</span></span><br><span class="line">    <span class="keyword">this</span>.data = obj.data ||&#123;&#125;</span><br><span class="line">    <span class="keyword">this</span>.success = obj.success || <span class="literal">null</span></span><br><span class="line">    <span class="keyword">this</span>.error = obj.error || <span class="literal">null</span></span><br><span class="line">    <span class="comment">// 用于取消 fetch 请求</span></span><br><span class="line">    <span class="keyword">this</span>.controller = <span class="keyword">new</span> AbortController()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myFetch.prototype.send = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 将数据取出来 以 key=value 的形式保存到数组中，方便后续操作</span></span><br><span class="line">    <span class="keyword">let</span> dataArr = []</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> key <span class="keyword">in</span> <span class="keyword">this</span>.data )&#123;</span><br><span class="line">        dataArr.push( key + <span class="string">"="</span> + <span class="keyword">this</span>.data[key] )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">this</span>.type === <span class="string">"GET"</span> || <span class="keyword">this</span>.type === <span class="string">"get"</span> )&#123;</span><br><span class="line">        <span class="keyword">this</span>.url = <span class="keyword">this</span>.url + <span class="string">"?"</span> + dataArr.join(<span class="string">"&amp;"</span>)</span><br><span class="line">        <span class="comment">// 删除尾部的 ?，当 data 为空的时候会多出来 ?</span></span><br><span class="line">        fetch( <span class="keyword">this</span>.url.replace(<span class="regexp">/\?$/g</span>, <span class="string">""</span>), &#123;</span><br><span class="line">            mode: <span class="string">"cors"</span>,</span><br><span class="line">            method: <span class="string">"GET"</span>,</span><br><span class="line">            signal: <span class="keyword">this</span>.controller.signal</span><br><span class="line">        &#125;).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> res.json()</span><br><span class="line">        &#125;).then( <span class="function"><span class="params">resObj</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.success( resObj )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>( <span class="keyword">this</span>.type === <span class="string">"POST"</span> || <span class="keyword">this</span>.type === <span class="string">"post"</span> )&#123;</span><br><span class="line">        fetch( <span class="keyword">this</span>.url, &#123;</span><br><span class="line">            mode: <span class="string">"cors"</span>,</span><br><span class="line">            headers: &#123;</span><br><span class="line">                <span class="string">"Content-Type"</span> : <span class="string">"application/x-www-form-urlencoded"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            body: dataArr.join(<span class="string">"&amp;"</span>),</span><br><span class="line">            method: <span class="string">"POST"</span>,</span><br><span class="line">            signal: <span class="keyword">this</span>.controller.signal</span><br><span class="line">        &#125;).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log( <span class="string">"新鲜的数据："</span> ,res )</span><br><span class="line">            <span class="keyword">return</span> res.json()</span><br><span class="line">        &#125;).then( <span class="function"><span class="params">resObj</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.success( resObj )</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myFetch.prototype.abort = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"取消请求--"</span> )</span><br><span class="line">    <span class="keyword">this</span>.controller.abort()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-总结"><a href="#3-总结" class="headerlink" title="3. 总结"></a>3. 总结</h1><p>XMLHttp<br>使用原生 XMLHttpRequest 创建 ajax 的步骤分 5 步，一定要记住，</p><ol><li>使用 new XMLHttpRequest() 创建 xhr 实例</li><li>调用 open 方法初始化请求信息</li><li>设置 请求头</li><li>设置请求响应函数</li><li>调用 send 方法发送请求</li></ol><h1 id="4-关于发送文件和图片"><a href="#4-关于发送文件和图片" class="headerlink" title="4. 关于发送文件和图片"></a>4. 关于发送文件和图片</h1><p>发送文件和图片，需要搭配 <code>FormData</code></p><p>直接将 FormData 作为参数发送即可。</p><p><strong>案例:</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取文件放入 FormData</span></span><br><span class="line"><span class="keyword">var</span> formdata = <span class="keyword">new</span> FormData()</span><br><span class="line"><span class="keyword">var</span> elFile = <span class="built_in">document</span>.getElementById( <span class="string">"myfile"</span> )</span><br><span class="line">elFile.addEventListener( <span class="string">"change"</span>, () =&gt; &#123;</span><br><span class="line">    formdata.append( <span class="string">"file"</span>, elFile.files[<span class="number">0</span>] )</span><br><span class="line">    <span class="comment">// 调用发送文件</span></span><br><span class="line">    sendFile()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 创建 xhr</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xhr.open( <span class="string">"post"</span>, <span class="string">"http://***/uploadImage"</span> )</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( xhr.status === <span class="number">200</span> &amp;&amp; xhr.readyState === <span class="number">4</span> )&#123;</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"请求成功----"</span> )</span><br><span class="line">    <span class="built_in">console</span>.log( xhr.response )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendFile</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    xhr.send( formdata )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-参考材料"><a href="#5-参考材料" class="headerlink" title="5. 参考材料"></a>5. 参考材料</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener">MDN–XMLHttpRequest</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/fetch" target="_blank" rel="noopener">MDN-fetch 文档</a></p><p><a href="https://blog.csdn.net/hlinghling/article/details/52624757" target="_blank" rel="noopener">创建ajax过程</a></p><p><a href="https://blog.csdn.net/sinat_35767703/article/details/67633058" target="_blank" rel="noopener">AJAX实现步骤,XMLHttpRequest对象的方法</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;简单的封装一个 ajax：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;自动处理参数&lt;/li&gt;
&lt;li&gt;支持 get 和 post&lt;/li&gt;
&lt;li&gt;支持取消操作&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="前端" scheme="http://blog.curtaintan.club/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js基础" scheme="http://blog.curtaintan.club/tags/js%E5%9F%BA%E7%A1%80/"/>
    
      <category term="ajax" scheme="http://blog.curtaintan.club/tags/ajax/"/>
    
  </entry>
  
</feed>
